function FastClick(a){"use strict";var b,c=this;if(this.trackingClick=!1,this.trackingClickStart=0,this.targetElement=null,this.touchStartX=0,this.touchStartY=0,this.lastTouchIdentifier=0,this.touchBoundary=10,this.layer=a,!a||!a.nodeType)throw new TypeError("Layer must be a document node");this.onClick=function(){return FastClick.prototype.onClick.apply(c,arguments)},this.onMouse=function(){return FastClick.prototype.onMouse.apply(c,arguments)},this.onTouchStart=function(){return FastClick.prototype.onTouchStart.apply(c,arguments)},this.onTouchMove=function(){return FastClick.prototype.onTouchMove.apply(c,arguments)},this.onTouchEnd=function(){return FastClick.prototype.onTouchEnd.apply(c,arguments)},this.onTouchCancel=function(){return FastClick.prototype.onTouchCancel.apply(c,arguments)},FastClick.notNeeded(a)||(this.deviceIsAndroid&&(a.addEventListener("mouseover",this.onMouse,!0),a.addEventListener("mousedown",this.onMouse,!0),a.addEventListener("mouseup",this.onMouse,!0)),a.addEventListener("click",this.onClick,!0),a.addEventListener("touchstart",this.onTouchStart,!1),a.addEventListener("touchmove",this.onTouchMove,!1),a.addEventListener("touchend",this.onTouchEnd,!1),a.addEventListener("touchcancel",this.onTouchCancel,!1),Event.prototype.stopImmediatePropagation||(a.removeEventListener=function(b,c,d){var e=Node.prototype.removeEventListener;"click"===b?e.call(a,b,c.hijacked||c,d):e.call(a,b,c,d)},a.addEventListener=function(b,c,d){var e=Node.prototype.addEventListener;"click"===b?e.call(a,b,c.hijacked||(c.hijacked=function(a){a.propagationStopped||c(a)}),d):e.call(a,b,c,d)}),"function"==typeof a.onclick&&(b=a.onclick,a.addEventListener("click",function(a){b(a)},!1),a.onclick=null))}!function(a,b){"object"==typeof module&&"object"==typeof module.exports?module.exports=a.document?b(a,!0):function(a){if(!a.document)throw new Error("jQuery requires a window with a document");return b(a)}:b(a)}("undefined"!=typeof window?window:this,function(a,b){function c(a){var b=a.length,c=ab.type(a);return"function"===c||ab.isWindow(a)?!1:1===a.nodeType&&b?!0:"array"===c||0===b||"number"==typeof b&&b>0&&b-1 in a}function d(a,b,c){if(ab.isFunction(b))return ab.grep(a,function(a,d){return!!b.call(a,d,a)!==c});if(b.nodeType)return ab.grep(a,function(a){return a===b!==c});if("string"==typeof b){if(hb.test(b))return ab.filter(b,a,c);b=ab.filter(b,a)}return ab.grep(a,function(a){return U.call(b,a)>=0!==c})}function e(a,b){for(;(a=a[b])&&1!==a.nodeType;);return a}function f(a){var b=ob[a]={};return ab.each(a.match(nb)||[],function(a,c){b[c]=!0}),b}function g(){$.removeEventListener("DOMContentLoaded",g,!1),a.removeEventListener("load",g,!1),ab.ready()}function h(){Object.defineProperty(this.cache={},0,{get:function(){return{}}}),this.expando=ab.expando+Math.random()}function i(a,b,c){var d;if(void 0===c&&1===a.nodeType)if(d="data-"+b.replace(ub,"-$1").toLowerCase(),c=a.getAttribute(d),"string"==typeof c){try{c="true"===c?!0:"false"===c?!1:"null"===c?null:+c+""===c?+c:tb.test(c)?ab.parseJSON(c):c}catch(e){}sb.set(a,b,c)}else c=void 0;return c}function j(){return!0}function k(){return!1}function l(){try{return $.activeElement}catch(a){}}function m(a,b){return ab.nodeName(a,"table")&&ab.nodeName(11!==b.nodeType?b:b.firstChild,"tr")?a.getElementsByTagName("tbody")[0]||a.appendChild(a.ownerDocument.createElement("tbody")):a}function n(a){return a.type=(null!==a.getAttribute("type"))+"/"+a.type,a}function o(a){var b=Kb.exec(a.type);return b?a.type=b[1]:a.removeAttribute("type"),a}function p(a,b){for(var c=0,d=a.length;d>c;c++)rb.set(a[c],"globalEval",!b||rb.get(b[c],"globalEval"))}function q(a,b){var c,d,e,f,g,h,i,j;if(1===b.nodeType){if(rb.hasData(a)&&(f=rb.access(a),g=rb.set(b,f),j=f.events)){delete g.handle,g.events={};for(e in j)for(c=0,d=j[e].length;d>c;c++)ab.event.add(b,e,j[e][c])}sb.hasData(a)&&(h=sb.access(a),i=ab.extend({},h),sb.set(b,i))}}function r(a,b){var c=a.getElementsByTagName?a.getElementsByTagName(b||"*"):a.querySelectorAll?a.querySelectorAll(b||"*"):[];return void 0===b||b&&ab.nodeName(a,b)?ab.merge([a],c):c}function s(a,b){var c=b.nodeName.toLowerCase();"input"===c&&yb.test(a.type)?b.checked=a.checked:("input"===c||"textarea"===c)&&(b.defaultValue=a.defaultValue)}function t(b,c){var d=ab(c.createElement(b)).appendTo(c.body),e=a.getDefaultComputedStyle?a.getDefaultComputedStyle(d[0]).display:ab.css(d[0],"display");return d.detach(),e}function u(a){var b=$,c=Ob[a];return c||(c=t(a,b),"none"!==c&&c||(Nb=(Nb||ab("<iframe frameborder='0' width='0' height='0'/>")).appendTo(b.documentElement),b=Nb[0].contentDocument,b.write(),b.close(),c=t(a,b),Nb.detach()),Ob[a]=c),c}function v(a,b,c){var d,e,f,g,h=a.style;return c=c||Rb(a),c&&(g=c.getPropertyValue(b)||c[b]),c&&(""!==g||ab.contains(a.ownerDocument,a)||(g=ab.style(a,b)),Qb.test(g)&&Pb.test(b)&&(d=h.width,e=h.minWidth,f=h.maxWidth,h.minWidth=h.maxWidth=h.width=g,g=c.width,h.width=d,h.minWidth=e,h.maxWidth=f)),void 0!==g?g+"":g}function w(a,b){return{get:function(){return a()?void delete this.get:(this.get=b).apply(this,arguments)}}}function x(a,b){if(b in a)return b;for(var c=b[0].toUpperCase()+b.slice(1),d=b,e=Xb.length;e--;)if(b=Xb[e]+c,b in a)return b;return d}function y(a,b,c){var d=Tb.exec(b);return d?Math.max(0,d[1]-(c||0))+(d[2]||"px"):b}function z(a,b,c,d,e){for(var f=c===(d?"border":"content")?4:"width"===b?1:0,g=0;4>f;f+=2)"margin"===c&&(g+=ab.css(a,c+wb[f],!0,e)),d?("content"===c&&(g-=ab.css(a,"padding"+wb[f],!0,e)),"margin"!==c&&(g-=ab.css(a,"border"+wb[f]+"Width",!0,e))):(g+=ab.css(a,"padding"+wb[f],!0,e),"padding"!==c&&(g+=ab.css(a,"border"+wb[f]+"Width",!0,e)));return g}function A(a,b,c){var d=!0,e="width"===b?a.offsetWidth:a.offsetHeight,f=Rb(a),g="border-box"===ab.css(a,"boxSizing",!1,f);if(0>=e||null==e){if(e=v(a,b,f),(0>e||null==e)&&(e=a.style[b]),Qb.test(e))return e;d=g&&(Z.boxSizingReliable()||e===a.style[b]),e=parseFloat(e)||0}return e+z(a,b,c||(g?"border":"content"),d,f)+"px"}function B(a,b){for(var c,d,e,f=[],g=0,h=a.length;h>g;g++)d=a[g],d.style&&(f[g]=rb.get(d,"olddisplay"),c=d.style.display,b?(f[g]||"none"!==c||(d.style.display=""),""===d.style.display&&xb(d)&&(f[g]=rb.access(d,"olddisplay",u(d.nodeName)))):f[g]||(e=xb(d),(c&&"none"!==c||!e)&&rb.set(d,"olddisplay",e?c:ab.css(d,"display"))));for(g=0;h>g;g++)d=a[g],d.style&&(b&&"none"!==d.style.display&&""!==d.style.display||(d.style.display=b?f[g]||"":"none"));return a}function C(a,b,c,d,e){return new C.prototype.init(a,b,c,d,e)}function D(){return setTimeout(function(){Yb=void 0}),Yb=ab.now()}function E(a,b){var c,d=0,e={height:a};for(b=b?1:0;4>d;d+=2-b)c=wb[d],e["margin"+c]=e["padding"+c]=a;return b&&(e.opacity=e.width=a),e}function F(a,b,c){for(var d,e=(cc[b]||[]).concat(cc["*"]),f=0,g=e.length;g>f;f++)if(d=e[f].call(c,b,a))return d}function G(a,b,c){var d,e,f,g,h,i,j,k=this,l={},m=a.style,n=a.nodeType&&xb(a),o=rb.get(a,"fxshow");c.queue||(h=ab._queueHooks(a,"fx"),null==h.unqueued&&(h.unqueued=0,i=h.empty.fire,h.empty.fire=function(){h.unqueued||i()}),h.unqueued++,k.always(function(){k.always(function(){h.unqueued--,ab.queue(a,"fx").length||h.empty.fire()})})),1===a.nodeType&&("height"in b||"width"in b)&&(c.overflow=[m.overflow,m.overflowX,m.overflowY],j=ab.css(a,"display"),"none"===j&&(j=u(a.nodeName)),"inline"===j&&"none"===ab.css(a,"float")&&(m.display="inline-block")),c.overflow&&(m.overflow="hidden",k.always(function(){m.overflow=c.overflow[0],m.overflowX=c.overflow[1],m.overflowY=c.overflow[2]}));for(d in b)if(e=b[d],$b.exec(e)){if(delete b[d],f=f||"toggle"===e,e===(n?"hide":"show")){if("show"!==e||!o||void 0===o[d])continue;n=!0}l[d]=o&&o[d]||ab.style(a,d)}if(!ab.isEmptyObject(l)){o?"hidden"in o&&(n=o.hidden):o=rb.access(a,"fxshow",{}),f&&(o.hidden=!n),n?ab(a).show():k.done(function(){ab(a).hide()}),k.done(function(){var b;rb.remove(a,"fxshow");for(b in l)ab.style(a,b,l[b])});for(d in l)g=F(n?o[d]:0,d,k),d in o||(o[d]=g.start,n&&(g.end=g.start,g.start="width"===d||"height"===d?1:0))}}function H(a,b){var c,d,e,f,g;for(c in a)if(d=ab.camelCase(c),e=b[d],f=a[c],ab.isArray(f)&&(e=f[1],f=a[c]=f[0]),c!==d&&(a[d]=f,delete a[c]),g=ab.cssHooks[d],g&&"expand"in g){f=g.expand(f),delete a[d];for(c in f)c in a||(a[c]=f[c],b[c]=e)}else b[d]=e}function I(a,b,c){var d,e,f=0,g=bc.length,h=ab.Deferred().always(function(){delete i.elem}),i=function(){if(e)return!1;for(var b=Yb||D(),c=Math.max(0,j.startTime+j.duration-b),d=c/j.duration||0,f=1-d,g=0,i=j.tweens.length;i>g;g++)j.tweens[g].run(f);return h.notifyWith(a,[j,f,c]),1>f&&i?c:(h.resolveWith(a,[j]),!1)},j=h.promise({elem:a,props:ab.extend({},b),opts:ab.extend(!0,{specialEasing:{}},c),originalProperties:b,originalOptions:c,startTime:Yb||D(),duration:c.duration,tweens:[],createTween:function(b,c){var d=ab.Tween(a,j.opts,b,c,j.opts.specialEasing[b]||j.opts.easing);return j.tweens.push(d),d},stop:function(b){var c=0,d=b?j.tweens.length:0;if(e)return this;for(e=!0;d>c;c++)j.tweens[c].run(1);return b?h.resolveWith(a,[j,b]):h.rejectWith(a,[j,b]),this}}),k=j.props;for(H(k,j.opts.specialEasing);g>f;f++)if(d=bc[f].call(j,a,k,j.opts))return d;return ab.map(k,F,j),ab.isFunction(j.opts.start)&&j.opts.start.call(a,j),ab.fx.timer(ab.extend(i,{elem:a,anim:j,queue:j.opts.queue})),j.progress(j.opts.progress).done(j.opts.done,j.opts.complete).fail(j.opts.fail).always(j.opts.always)}function J(a){return function(b,c){"string"!=typeof b&&(c=b,b="*");var d,e=0,f=b.toLowerCase().match(nb)||[];if(ab.isFunction(c))for(;d=f[e++];)"+"===d[0]?(d=d.slice(1)||"*",(a[d]=a[d]||[]).unshift(c)):(a[d]=a[d]||[]).push(c)}}function K(a,b,c,d){function e(h){var i;return f[h]=!0,ab.each(a[h]||[],function(a,h){var j=h(b,c,d);return"string"!=typeof j||g||f[j]?g?!(i=j):void 0:(b.dataTypes.unshift(j),e(j),!1)}),i}var f={},g=a===vc;return e(b.dataTypes[0])||!f["*"]&&e("*")}function L(a,b){var c,d,e=ab.ajaxSettings.flatOptions||{};for(c in b)void 0!==b[c]&&((e[c]?a:d||(d={}))[c]=b[c]);return d&&ab.extend(!0,a,d),a}function M(a,b,c){for(var d,e,f,g,h=a.contents,i=a.dataTypes;"*"===i[0];)i.shift(),void 0===d&&(d=a.mimeType||b.getResponseHeader("Content-Type"));if(d)for(e in h)if(h[e]&&h[e].test(d)){i.unshift(e);break}if(i[0]in c)f=i[0];else{for(e in c){if(!i[0]||a.converters[e+" "+i[0]]){f=e;break}g||(g=e)}f=f||g}return f?(f!==i[0]&&i.unshift(f),c[f]):void 0}function N(a,b,c,d){var e,f,g,h,i,j={},k=a.dataTypes.slice();if(k[1])for(g in a.converters)j[g.toLowerCase()]=a.converters[g];for(f=k.shift();f;)if(a.responseFields[f]&&(c[a.responseFields[f]]=b),!i&&d&&a.dataFilter&&(b=a.dataFilter(b,a.dataType)),i=f,f=k.shift())if("*"===f)f=i;else if("*"!==i&&i!==f){if(g=j[i+" "+f]||j["* "+f],!g)for(e in j)if(h=e.split(" "),h[1]===f&&(g=j[i+" "+h[0]]||j["* "+h[0]])){g===!0?g=j[e]:j[e]!==!0&&(f=h[0],k.unshift(h[1]));break}if(g!==!0)if(g&&a["throws"])b=g(b);else try{b=g(b)}catch(l){return{state:"parsererror",error:g?l:"No conversion from "+i+" to "+f}}}return{state:"success",data:b}}function O(a,b,c,d){var e;if(ab.isArray(b))ab.each(b,function(b,e){c||zc.test(a)?d(a,e):O(a+"["+("object"==typeof e?b:"")+"]",e,c,d)});else if(c||"object"!==ab.type(b))d(a,b);else for(e in b)O(a+"["+e+"]",b[e],c,d)}function P(a){return ab.isWindow(a)?a:9===a.nodeType&&a.defaultView}var Q=[],R=Q.slice,S=Q.concat,T=Q.push,U=Q.indexOf,V={},W=V.toString,X=V.hasOwnProperty,Y="".trim,Z={},$=a.document,_="2.1.0",ab=function(a,b){return new ab.fn.init(a,b)},bb=/^-ms-/,cb=/-([\da-z])/gi,db=function(a,b){return b.toUpperCase()};ab.fn=ab.prototype={jquery:_,constructor:ab,selector:"",length:0,toArray:function(){return R.call(this)},get:function(a){return null!=a?0>a?this[a+this.length]:this[a]:R.call(this)},pushStack:function(a){var b=ab.merge(this.constructor(),a);return b.prevObject=this,b.context=this.context,b},each:function(a,b){return ab.each(this,a,b)},map:function(a){return this.pushStack(ab.map(this,function(b,c){return a.call(b,c,b)}))},slice:function(){return this.pushStack(R.apply(this,arguments))},first:function(){return this.eq(0)},last:function(){return this.eq(-1)},eq:function(a){var b=this.length,c=+a+(0>a?b:0);return this.pushStack(c>=0&&b>c?[this[c]]:[])},end:function(){return this.prevObject||this.constructor(null)},push:T,sort:Q.sort,splice:Q.splice},ab.extend=ab.fn.extend=function(){var a,b,c,d,e,f,g=arguments[0]||{},h=1,i=arguments.length,j=!1;for("boolean"==typeof g&&(j=g,g=arguments[h]||{},h++),"object"==typeof g||ab.isFunction(g)||(g={}),h===i&&(g=this,h--);i>h;h++)if(null!=(a=arguments[h]))for(b in a)c=g[b],d=a[b],g!==d&&(j&&d&&(ab.isPlainObject(d)||(e=ab.isArray(d)))?(e?(e=!1,f=c&&ab.isArray(c)?c:[]):f=c&&ab.isPlainObject(c)?c:{},g[b]=ab.extend(j,f,d)):void 0!==d&&(g[b]=d));return g},ab.extend({expando:"jQuery"+(_+Math.random()).replace(/\D/g,""),isReady:!0,error:function(a){throw new Error(a)},noop:function(){},isFunction:function(a){return"function"===ab.type(a)},isArray:Array.isArray,isWindow:function(a){return null!=a&&a===a.window},isNumeric:function(a){return a-parseFloat(a)>=0},isPlainObject:function(a){if("object"!==ab.type(a)||a.nodeType||ab.isWindow(a))return!1;try{if(a.constructor&&!X.call(a.constructor.prototype,"isPrototypeOf"))return!1}catch(b){return!1}return!0},isEmptyObject:function(a){var b;for(b in a)return!1;return!0},type:function(a){return null==a?a+"":"object"==typeof a||"function"==typeof a?V[W.call(a)]||"object":typeof a},globalEval:function(a){var b,c=eval;a=ab.trim(a),a&&(1===a.indexOf("use strict")?(b=$.createElement("script"),b.text=a,$.head.appendChild(b).parentNode.removeChild(b)):c(a))},camelCase:function(a){return a.replace(bb,"ms-").replace(cb,db)},nodeName:function(a,b){return a.nodeName&&a.nodeName.toLowerCase()===b.toLowerCase()},each:function(a,b,d){var e,f=0,g=a.length,h=c(a);if(d){if(h)for(;g>f&&(e=b.apply(a[f],d),e!==!1);f++);else for(f in a)if(e=b.apply(a[f],d),e===!1)break}else if(h)for(;g>f&&(e=b.call(a[f],f,a[f]),e!==!1);f++);else for(f in a)if(e=b.call(a[f],f,a[f]),e===!1)break;return a},trim:function(a){return null==a?"":Y.call(a)},makeArray:function(a,b){var d=b||[];return null!=a&&(c(Object(a))?ab.merge(d,"string"==typeof a?[a]:a):T.call(d,a)),d},inArray:function(a,b,c){return null==b?-1:U.call(b,a,c)},merge:function(a,b){for(var c=+b.length,d=0,e=a.length;c>d;d++)a[e++]=b[d];return a.length=e,a},grep:function(a,b,c){for(var d,e=[],f=0,g=a.length,h=!c;g>f;f++)d=!b(a[f],f),d!==h&&e.push(a[f]);return e},map:function(a,b,d){var e,f=0,g=a.length,h=c(a),i=[];if(h)for(;g>f;f++)e=b(a[f],f,d),null!=e&&i.push(e);else for(f in a)e=b(a[f],f,d),null!=e&&i.push(e);return S.apply([],i)},guid:1,proxy:function(a,b){var c,d,e;return"string"==typeof b&&(c=a[b],b=a,a=c),ab.isFunction(a)?(d=R.call(arguments,2),e=function(){return a.apply(b||this,d.concat(R.call(arguments)))},e.guid=a.guid=a.guid||ab.guid++,e):void 0},now:Date.now,support:Z}),ab.each("Boolean Number String Function Array Date RegExp Object Error".split(" "),function(a,b){V["[object "+b+"]"]=b.toLowerCase()});var eb=function(a){function b(a,b,c,d){var e,f,g,h,i,j,l,o,p,q;if((b?b.ownerDocument||b:O)!==G&&F(b),b=b||G,c=c||[],!a||"string"!=typeof a)return c;if(1!==(h=b.nodeType)&&9!==h)return[];if(I&&!d){if(e=sb.exec(a))if(g=e[1]){if(9===h){if(f=b.getElementById(g),!f||!f.parentNode)return c;if(f.id===g)return c.push(f),c}else if(b.ownerDocument&&(f=b.ownerDocument.getElementById(g))&&M(b,f)&&f.id===g)return c.push(f),c}else{if(e[2])return _.apply(c,b.getElementsByTagName(a)),c;if((g=e[3])&&x.getElementsByClassName&&b.getElementsByClassName)return _.apply(c,b.getElementsByClassName(g)),c}if(x.qsa&&(!J||!J.test(a))){if(o=l=N,p=b,q=9===h&&a,1===h&&"object"!==b.nodeName.toLowerCase()){for(j=m(a),(l=b.getAttribute("id"))?o=l.replace(ub,"\\$&"):b.setAttribute("id",o),o="[id='"+o+"'] ",i=j.length;i--;)j[i]=o+n(j[i]);p=tb.test(a)&&k(b.parentNode)||b,q=j.join(",")}if(q)try{return _.apply(c,p.querySelectorAll(q)),c}catch(r){}finally{l||b.removeAttribute("id")}}}return v(a.replace(ib,"$1"),b,c,d)}function c(){function a(c,d){return b.push(c+" ")>y.cacheLength&&delete a[b.shift()],a[c+" "]=d}var b=[];return a}function d(a){return a[N]=!0,a}function e(a){var b=G.createElement("div");try{return!!a(b)}catch(c){return!1}finally{b.parentNode&&b.parentNode.removeChild(b),b=null}}function f(a,b){for(var c=a.split("|"),d=a.length;d--;)y.attrHandle[c[d]]=b}function g(a,b){var c=b&&a,d=c&&1===a.nodeType&&1===b.nodeType&&(~b.sourceIndex||W)-(~a.sourceIndex||W);if(d)return d;if(c)for(;c=c.nextSibling;)if(c===b)return-1;return a?1:-1}function h(a){return function(b){var c=b.nodeName.toLowerCase();return"input"===c&&b.type===a}}function i(a){return function(b){var c=b.nodeName.toLowerCase();return("input"===c||"button"===c)&&b.type===a}}function j(a){return d(function(b){return b=+b,d(function(c,d){for(var e,f=a([],c.length,b),g=f.length;g--;)c[e=f[g]]&&(c[e]=!(d[e]=c[e]))})})}function k(a){return a&&typeof a.getElementsByTagName!==V&&a}function l(){}function m(a,c){var d,e,f,g,h,i,j,k=S[a+" "];if(k)return c?0:k.slice(0);for(h=a,i=[],j=y.preFilter;h;){(!d||(e=jb.exec(h)))&&(e&&(h=h.slice(e[0].length)||h),i.push(f=[])),d=!1,(e=kb.exec(h))&&(d=e.shift(),f.push({value:d,type:e[0].replace(ib," ")}),h=h.slice(d.length));for(g in y.filter)!(e=ob[g].exec(h))||j[g]&&!(e=j[g](e))||(d=e.shift(),f.push({value:d,type:g,matches:e}),h=h.slice(d.length));if(!d)break}return c?h.length:h?b.error(a):S(a,i).slice(0)}function n(a){for(var b=0,c=a.length,d="";c>b;b++)d+=a[b].value;return d}function o(a,b,c){var d=b.dir,e=c&&"parentNode"===d,f=Q++;return b.first?function(b,c,f){for(;b=b[d];)if(1===b.nodeType||e)return a(b,c,f)}:function(b,c,g){var h,i,j=[P,f];if(g){for(;b=b[d];)if((1===b.nodeType||e)&&a(b,c,g))return!0}else for(;b=b[d];)if(1===b.nodeType||e){if(i=b[N]||(b[N]={}),(h=i[d])&&h[0]===P&&h[1]===f)return j[2]=h[2];if(i[d]=j,j[2]=a(b,c,g))return!0}}}function p(a){return a.length>1?function(b,c,d){for(var e=a.length;e--;)if(!a[e](b,c,d))return!1;return!0}:a[0]}function q(a,b,c,d,e){for(var f,g=[],h=0,i=a.length,j=null!=b;i>h;h++)(f=a[h])&&(!c||c(f,d,e))&&(g.push(f),j&&b.push(h));return g}function r(a,b,c,e,f,g){return e&&!e[N]&&(e=r(e)),f&&!f[N]&&(f=r(f,g)),d(function(d,g,h,i){var j,k,l,m=[],n=[],o=g.length,p=d||u(b||"*",h.nodeType?[h]:h,[]),r=!a||!d&&b?p:q(p,m,a,h,i),s=c?f||(d?a:o||e)?[]:g:r;if(c&&c(r,s,h,i),e)for(j=q(s,n),e(j,[],h,i),k=j.length;k--;)(l=j[k])&&(s[n[k]]=!(r[n[k]]=l));if(d){if(f||a){if(f){for(j=[],k=s.length;k--;)(l=s[k])&&j.push(r[k]=l);f(null,s=[],j,i)}for(k=s.length;k--;)(l=s[k])&&(j=f?bb.call(d,l):m[k])>-1&&(d[j]=!(g[j]=l))}}else s=q(s===g?s.splice(o,s.length):s),f?f(null,g,s,i):_.apply(g,s)})}function s(a){for(var b,c,d,e=a.length,f=y.relative[a[0].type],g=f||y.relative[" "],h=f?1:0,i=o(function(a){return a===b},g,!0),j=o(function(a){return bb.call(b,a)>-1},g,!0),k=[function(a,c,d){return!f&&(d||c!==C)||((b=c).nodeType?i(a,c,d):j(a,c,d))}];e>h;h++)if(c=y.relative[a[h].type])k=[o(p(k),c)];else{if(c=y.filter[a[h].type].apply(null,a[h].matches),c[N]){for(d=++h;e>d&&!y.relative[a[d].type];d++);return r(h>1&&p(k),h>1&&n(a.slice(0,h-1).concat({value:" "===a[h-2].type?"*":""})).replace(ib,"$1"),c,d>h&&s(a.slice(h,d)),e>d&&s(a=a.slice(d)),e>d&&n(a))}k.push(c)}return p(k)}function t(a,c){var e=c.length>0,f=a.length>0,g=function(d,g,h,i,j){var k,l,m,n=0,o="0",p=d&&[],r=[],s=C,t=d||f&&y.find.TAG("*",j),u=P+=null==s?1:Math.random()||.1,v=t.length;for(j&&(C=g!==G&&g);o!==v&&null!=(k=t[o]);o++){if(f&&k){for(l=0;m=a[l++];)if(m(k,g,h)){i.push(k);break}j&&(P=u)}e&&((k=!m&&k)&&n--,d&&p.push(k))}if(n+=o,e&&o!==n){for(l=0;m=c[l++];)m(p,r,g,h);if(d){if(n>0)for(;o--;)p[o]||r[o]||(r[o]=Z.call(i));r=q(r)}_.apply(i,r),j&&!d&&r.length>0&&n+c.length>1&&b.uniqueSort(i)}return j&&(P=u,C=s),p};return e?d(g):g}function u(a,c,d){for(var e=0,f=c.length;f>e;e++)b(a,c[e],d);return d}function v(a,b,c,d){var e,f,g,h,i,j=m(a);if(!d&&1===j.length){if(f=j[0]=j[0].slice(0),f.length>2&&"ID"===(g=f[0]).type&&x.getById&&9===b.nodeType&&I&&y.relative[f[1].type]){if(b=(y.find.ID(g.matches[0].replace(vb,wb),b)||[])[0],!b)return c;a=a.slice(f.shift().value.length)}for(e=ob.needsContext.test(a)?0:f.length;e--&&(g=f[e],!y.relative[h=g.type]);)if((i=y.find[h])&&(d=i(g.matches[0].replace(vb,wb),tb.test(f[0].type)&&k(b.parentNode)||b))){if(f.splice(e,1),a=d.length&&n(f),!a)return _.apply(c,d),c;break}}return B(a,j)(d,b,!I,c,tb.test(a)&&k(b.parentNode)||b),c}var w,x,y,z,A,B,C,D,E,F,G,H,I,J,K,L,M,N="sizzle"+-new Date,O=a.document,P=0,Q=0,R=c(),S=c(),T=c(),U=function(a,b){return a===b&&(E=!0),0},V="undefined",W=1<<31,X={}.hasOwnProperty,Y=[],Z=Y.pop,$=Y.push,_=Y.push,ab=Y.slice,bb=Y.indexOf||function(a){for(var b=0,c=this.length;c>b;b++)if(this[b]===a)return b;return-1},cb="checked|selected|async|autofocus|autoplay|controls|defer|disabled|hidden|ismap|loop|multiple|open|readonly|required|scoped",db="[\\x20\\t\\r\\n\\f]",eb="(?:\\\\.|[\\w-]|[^\\x00-\\xa0])+",fb=eb.replace("w","w#"),gb="\\["+db+"*("+eb+")"+db+"*(?:([*^$|!~]?=)"+db+"*(?:(['\"])((?:\\\\.|[^\\\\])*?)\\3|("+fb+")|)|)"+db+"*\\]",hb=":("+eb+")(?:\\(((['\"])((?:\\\\.|[^\\\\])*?)\\3|((?:\\\\.|[^\\\\()[\\]]|"+gb.replace(3,8)+")*)|.*)\\)|)",ib=new RegExp("^"+db+"+|((?:^|[^\\\\])(?:\\\\.)*)"+db+"+$","g"),jb=new RegExp("^"+db+"*,"+db+"*"),kb=new RegExp("^"+db+"*([>+~]|"+db+")"+db+"*"),lb=new RegExp("="+db+"*([^\\]'\"]*?)"+db+"*\\]","g"),mb=new RegExp(hb),nb=new RegExp("^"+fb+"$"),ob={ID:new RegExp("^#("+eb+")"),CLASS:new RegExp("^\\.("+eb+")"),TAG:new RegExp("^("+eb.replace("w","w*")+")"),ATTR:new RegExp("^"+gb),PSEUDO:new RegExp("^"+hb),CHILD:new RegExp("^:(only|first|last|nth|nth-last)-(child|of-type)(?:\\("+db+"*(even|odd|(([+-]|)(\\d*)n|)"+db+"*(?:([+-]|)"+db+"*(\\d+)|))"+db+"*\\)|)","i"),bool:new RegExp("^(?:"+cb+")$","i"),needsContext:new RegExp("^"+db+"*[>+~]|:(even|odd|eq|gt|lt|nth|first|last)(?:\\("+db+"*((?:-\\d)?\\d*)"+db+"*\\)|)(?=[^-]|$)","i")},pb=/^(?:input|select|textarea|button)$/i,qb=/^h\d$/i,rb=/^[^{]+\{\s*\[native \w/,sb=/^(?:#([\w-]+)|(\w+)|\.([\w-]+))$/,tb=/[+~]/,ub=/'|\\/g,vb=new RegExp("\\\\([\\da-f]{1,6}"+db+"?|("+db+")|.)","ig"),wb=function(a,b,c){var d="0x"+b-65536;return d!==d||c?b:0>d?String.fromCharCode(d+65536):String.fromCharCode(d>>10|55296,1023&d|56320)};try{_.apply(Y=ab.call(O.childNodes),O.childNodes),Y[O.childNodes.length].nodeType}catch(xb){_={apply:Y.length?function(a,b){$.apply(a,ab.call(b))}:function(a,b){for(var c=a.length,d=0;a[c++]=b[d++];);a.length=c-1}}}x=b.support={},A=b.isXML=function(a){var b=a&&(a.ownerDocument||a).documentElement;return b?"HTML"!==b.nodeName:!1},F=b.setDocument=function(a){var b,c=a?a.ownerDocument||a:O,d=c.defaultView;return c!==G&&9===c.nodeType&&c.documentElement?(G=c,H=c.documentElement,I=!A(c),d&&d!==d.top&&(d.addEventListener?d.addEventListener("unload",function(){F()},!1):d.attachEvent&&d.attachEvent("onunload",function(){F()})),x.attributes=e(function(a){return a.className="i",!a.getAttribute("className")}),x.getElementsByTagName=e(function(a){return a.appendChild(c.createComment("")),!a.getElementsByTagName("*").length}),x.getElementsByClassName=rb.test(c.getElementsByClassName)&&e(function(a){return a.innerHTML="<div class='a'></div><div class='a i'></div>",a.firstChild.className="i",2===a.getElementsByClassName("i").length}),x.getById=e(function(a){return H.appendChild(a).id=N,!c.getElementsByName||!c.getElementsByName(N).length}),x.getById?(y.find.ID=function(a,b){if(typeof b.getElementById!==V&&I){var c=b.getElementById(a);return c&&c.parentNode?[c]:[]}},y.filter.ID=function(a){var b=a.replace(vb,wb);return function(a){return a.getAttribute("id")===b}}):(delete y.find.ID,y.filter.ID=function(a){var b=a.replace(vb,wb);return function(a){var c=typeof a.getAttributeNode!==V&&a.getAttributeNode("id");return c&&c.value===b}}),y.find.TAG=x.getElementsByTagName?function(a,b){return typeof b.getElementsByTagName!==V?b.getElementsByTagName(a):void 0}:function(a,b){var c,d=[],e=0,f=b.getElementsByTagName(a);if("*"===a){for(;c=f[e++];)1===c.nodeType&&d.push(c);return d}return f},y.find.CLASS=x.getElementsByClassName&&function(a,b){return typeof b.getElementsByClassName!==V&&I?b.getElementsByClassName(a):void 0},K=[],J=[],(x.qsa=rb.test(c.querySelectorAll))&&(e(function(a){a.innerHTML="<select t=''><option selected=''></option></select>",a.querySelectorAll("[t^='']").length&&J.push("[*^$]="+db+"*(?:''|\"\")"),a.querySelectorAll("[selected]").length||J.push("\\["+db+"*(?:value|"+cb+")"),a.querySelectorAll(":checked").length||J.push(":checked")}),e(function(a){var b=c.createElement("input");b.setAttribute("type","hidden"),a.appendChild(b).setAttribute("name","D"),a.querySelectorAll("[name=d]").length&&J.push("name"+db+"*[*^$|!~]?="),a.querySelectorAll(":enabled").length||J.push(":enabled",":disabled"),a.querySelectorAll("*,:x"),J.push(",.*:")})),(x.matchesSelector=rb.test(L=H.webkitMatchesSelector||H.mozMatchesSelector||H.oMatchesSelector||H.msMatchesSelector))&&e(function(a){x.disconnectedMatch=L.call(a,"div"),L.call(a,"[s!='']:x"),K.push("!=",hb)}),J=J.length&&new RegExp(J.join("|")),K=K.length&&new RegExp(K.join("|")),b=rb.test(H.compareDocumentPosition),M=b||rb.test(H.contains)?function(a,b){var c=9===a.nodeType?a.documentElement:a,d=b&&b.parentNode;return a===d||!(!d||1!==d.nodeType||!(c.contains?c.contains(d):a.compareDocumentPosition&&16&a.compareDocumentPosition(d)))}:function(a,b){if(b)for(;b=b.parentNode;)if(b===a)return!0;return!1},U=b?function(a,b){if(a===b)return E=!0,0;var d=!a.compareDocumentPosition-!b.compareDocumentPosition;return d?d:(d=(a.ownerDocument||a)===(b.ownerDocument||b)?a.compareDocumentPosition(b):1,1&d||!x.sortDetached&&b.compareDocumentPosition(a)===d?a===c||a.ownerDocument===O&&M(O,a)?-1:b===c||b.ownerDocument===O&&M(O,b)?1:D?bb.call(D,a)-bb.call(D,b):0:4&d?-1:1)}:function(a,b){if(a===b)return E=!0,0;var d,e=0,f=a.parentNode,h=b.parentNode,i=[a],j=[b];if(!f||!h)return a===c?-1:b===c?1:f?-1:h?1:D?bb.call(D,a)-bb.call(D,b):0;if(f===h)return g(a,b);for(d=a;d=d.parentNode;)i.unshift(d);for(d=b;d=d.parentNode;)j.unshift(d);for(;i[e]===j[e];)e++;return e?g(i[e],j[e]):i[e]===O?-1:j[e]===O?1:0},c):G},b.matches=function(a,c){return b(a,null,null,c)},b.matchesSelector=function(a,c){if((a.ownerDocument||a)!==G&&F(a),c=c.replace(lb,"='$1']"),!(!x.matchesSelector||!I||K&&K.test(c)||J&&J.test(c)))try{var d=L.call(a,c);if(d||x.disconnectedMatch||a.document&&11!==a.document.nodeType)return d}catch(e){}return b(c,G,null,[a]).length>0},b.contains=function(a,b){return(a.ownerDocument||a)!==G&&F(a),M(a,b)},b.attr=function(a,b){(a.ownerDocument||a)!==G&&F(a);var c=y.attrHandle[b.toLowerCase()],d=c&&X.call(y.attrHandle,b.toLowerCase())?c(a,b,!I):void 0;return void 0!==d?d:x.attributes||!I?a.getAttribute(b):(d=a.getAttributeNode(b))&&d.specified?d.value:null},b.error=function(a){throw new Error("Syntax error, unrecognized expression: "+a)},b.uniqueSort=function(a){var b,c=[],d=0,e=0;if(E=!x.detectDuplicates,D=!x.sortStable&&a.slice(0),a.sort(U),E){for(;b=a[e++];)b===a[e]&&(d=c.push(e));for(;d--;)a.splice(c[d],1)}return D=null,a},z=b.getText=function(a){var b,c="",d=0,e=a.nodeType;if(e){if(1===e||9===e||11===e){if("string"==typeof a.textContent)return a.textContent;for(a=a.firstChild;a;a=a.nextSibling)c+=z(a)}else if(3===e||4===e)return a.nodeValue}else for(;b=a[d++];)c+=z(b);return c},y=b.selectors={cacheLength:50,createPseudo:d,match:ob,attrHandle:{},find:{},relative:{">":{dir:"parentNode",first:!0}," ":{dir:"parentNode"},"+":{dir:"previousSibling",first:!0},"~":{dir:"previousSibling"}},preFilter:{ATTR:function(a){return a[1]=a[1].replace(vb,wb),a[3]=(a[4]||a[5]||"").replace(vb,wb),"~="===a[2]&&(a[3]=" "+a[3]+" "),a.slice(0,4)},CHILD:function(a){return a[1]=a[1].toLowerCase(),"nth"===a[1].slice(0,3)?(a[3]||b.error(a[0]),a[4]=+(a[4]?a[5]+(a[6]||1):2*("even"===a[3]||"odd"===a[3])),a[5]=+(a[7]+a[8]||"odd"===a[3])):a[3]&&b.error(a[0]),a},PSEUDO:function(a){var b,c=!a[5]&&a[2];return ob.CHILD.test(a[0])?null:(a[3]&&void 0!==a[4]?a[2]=a[4]:c&&mb.test(c)&&(b=m(c,!0))&&(b=c.indexOf(")",c.length-b)-c.length)&&(a[0]=a[0].slice(0,b),a[2]=c.slice(0,b)),a.slice(0,3))}},filter:{TAG:function(a){var b=a.replace(vb,wb).toLowerCase();return"*"===a?function(){return!0}:function(a){return a.nodeName&&a.nodeName.toLowerCase()===b}},CLASS:function(a){var b=R[a+" "];return b||(b=new RegExp("(^|"+db+")"+a+"("+db+"|$)"))&&R(a,function(a){return b.test("string"==typeof a.className&&a.className||typeof a.getAttribute!==V&&a.getAttribute("class")||"")})},ATTR:function(a,c,d){return function(e){var f=b.attr(e,a);return null==f?"!="===c:c?(f+="","="===c?f===d:"!="===c?f!==d:"^="===c?d&&0===f.indexOf(d):"*="===c?d&&f.indexOf(d)>-1:"$="===c?d&&f.slice(-d.length)===d:"~="===c?(" "+f+" ").indexOf(d)>-1:"|="===c?f===d||f.slice(0,d.length+1)===d+"-":!1):!0}},CHILD:function(a,b,c,d,e){var f="nth"!==a.slice(0,3),g="last"!==a.slice(-4),h="of-type"===b;return 1===d&&0===e?function(a){return!!a.parentNode}:function(b,c,i){var j,k,l,m,n,o,p=f!==g?"nextSibling":"previousSibling",q=b.parentNode,r=h&&b.nodeName.toLowerCase(),s=!i&&!h;if(q){if(f){for(;p;){for(l=b;l=l[p];)if(h?l.nodeName.toLowerCase()===r:1===l.nodeType)return!1;o=p="only"===a&&!o&&"nextSibling"}return!0}if(o=[g?q.firstChild:q.lastChild],g&&s){for(k=q[N]||(q[N]={}),j=k[a]||[],n=j[0]===P&&j[1],m=j[0]===P&&j[2],l=n&&q.childNodes[n];l=++n&&l&&l[p]||(m=n=0)||o.pop();)if(1===l.nodeType&&++m&&l===b){k[a]=[P,n,m];break}}else if(s&&(j=(b[N]||(b[N]={}))[a])&&j[0]===P)m=j[1];else for(;(l=++n&&l&&l[p]||(m=n=0)||o.pop())&&((h?l.nodeName.toLowerCase()!==r:1!==l.nodeType)||!++m||(s&&((l[N]||(l[N]={}))[a]=[P,m]),l!==b)););return m-=e,m===d||m%d===0&&m/d>=0}}},PSEUDO:function(a,c){var e,f=y.pseudos[a]||y.setFilters[a.toLowerCase()]||b.error("unsupported pseudo: "+a);return f[N]?f(c):f.length>1?(e=[a,a,"",c],y.setFilters.hasOwnProperty(a.toLowerCase())?d(function(a,b){for(var d,e=f(a,c),g=e.length;g--;)d=bb.call(a,e[g]),a[d]=!(b[d]=e[g])}):function(a){return f(a,0,e)}):f}},pseudos:{not:d(function(a){var b=[],c=[],e=B(a.replace(ib,"$1"));return e[N]?d(function(a,b,c,d){for(var f,g=e(a,null,d,[]),h=a.length;h--;)(f=g[h])&&(a[h]=!(b[h]=f))}):function(a,d,f){return b[0]=a,e(b,null,f,c),!c.pop()}}),has:d(function(a){return function(c){return b(a,c).length>0}}),contains:d(function(a){return function(b){return(b.textContent||b.innerText||z(b)).indexOf(a)>-1}}),lang:d(function(a){return nb.test(a||"")||b.error("unsupported lang: "+a),a=a.replace(vb,wb).toLowerCase(),function(b){var c;do if(c=I?b.lang:b.getAttribute("xml:lang")||b.getAttribute("lang"))return c=c.toLowerCase(),c===a||0===c.indexOf(a+"-");while((b=b.parentNode)&&1===b.nodeType);return!1}}),target:function(b){var c=a.location&&a.location.hash;return c&&c.slice(1)===b.id},root:function(a){return a===H},focus:function(a){return a===G.activeElement&&(!G.hasFocus||G.hasFocus())&&!!(a.type||a.href||~a.tabIndex)},enabled:function(a){return a.disabled===!1},disabled:function(a){return a.disabled===!0},checked:function(a){var b=a.nodeName.toLowerCase();return"input"===b&&!!a.checked||"option"===b&&!!a.selected},selected:function(a){return a.parentNode&&a.parentNode.selectedIndex,a.selected===!0},empty:function(a){for(a=a.firstChild;a;a=a.nextSibling)if(a.nodeType<6)return!1;return!0},parent:function(a){return!y.pseudos.empty(a)},header:function(a){return qb.test(a.nodeName)},input:function(a){return pb.test(a.nodeName)},button:function(a){var b=a.nodeName.toLowerCase();return"input"===b&&"button"===a.type||"button"===b},text:function(a){var b;return"input"===a.nodeName.toLowerCase()&&"text"===a.type&&(null==(b=a.getAttribute("type"))||"text"===b.toLowerCase())},first:j(function(){return[0]}),last:j(function(a,b){return[b-1]}),eq:j(function(a,b,c){return[0>c?c+b:c]}),even:j(function(a,b){for(var c=0;b>c;c+=2)a.push(c);return a}),odd:j(function(a,b){for(var c=1;b>c;c+=2)a.push(c);return a}),lt:j(function(a,b,c){for(var d=0>c?c+b:c;--d>=0;)a.push(d);return a}),gt:j(function(a,b,c){for(var d=0>c?c+b:c;++d<b;)a.push(d);return a})}},y.pseudos.nth=y.pseudos.eq;for(w in{radio:!0,checkbox:!0,file:!0,password:!0,image:!0})y.pseudos[w]=h(w);for(w in{submit:!0,reset:!0})y.pseudos[w]=i(w);return l.prototype=y.filters=y.pseudos,y.setFilters=new l,B=b.compile=function(a,b){var c,d=[],e=[],f=T[a+" "];
if(!f){for(b||(b=m(a)),c=b.length;c--;)f=s(b[c]),f[N]?d.push(f):e.push(f);f=T(a,t(e,d))}return f},x.sortStable=N.split("").sort(U).join("")===N,x.detectDuplicates=!!E,F(),x.sortDetached=e(function(a){return 1&a.compareDocumentPosition(G.createElement("div"))}),e(function(a){return a.innerHTML="<a href='#'></a>","#"===a.firstChild.getAttribute("href")})||f("type|href|height|width",function(a,b,c){return c?void 0:a.getAttribute(b,"type"===b.toLowerCase()?1:2)}),x.attributes&&e(function(a){return a.innerHTML="<input/>",a.firstChild.setAttribute("value",""),""===a.firstChild.getAttribute("value")})||f("value",function(a,b,c){return c||"input"!==a.nodeName.toLowerCase()?void 0:a.defaultValue}),e(function(a){return null==a.getAttribute("disabled")})||f(cb,function(a,b,c){var d;return c?void 0:a[b]===!0?b.toLowerCase():(d=a.getAttributeNode(b))&&d.specified?d.value:null}),b}(a);ab.find=eb,ab.expr=eb.selectors,ab.expr[":"]=ab.expr.pseudos,ab.unique=eb.uniqueSort,ab.text=eb.getText,ab.isXMLDoc=eb.isXML,ab.contains=eb.contains;var fb=ab.expr.match.needsContext,gb=/^<(\w+)\s*\/?>(?:<\/\1>|)$/,hb=/^.[^:#\[\.,]*$/;ab.filter=function(a,b,c){var d=b[0];return c&&(a=":not("+a+")"),1===b.length&&1===d.nodeType?ab.find.matchesSelector(d,a)?[d]:[]:ab.find.matches(a,ab.grep(b,function(a){return 1===a.nodeType}))},ab.fn.extend({find:function(a){var b,c=this.length,d=[],e=this;if("string"!=typeof a)return this.pushStack(ab(a).filter(function(){for(b=0;c>b;b++)if(ab.contains(e[b],this))return!0}));for(b=0;c>b;b++)ab.find(a,e[b],d);return d=this.pushStack(c>1?ab.unique(d):d),d.selector=this.selector?this.selector+" "+a:a,d},filter:function(a){return this.pushStack(d(this,a||[],!1))},not:function(a){return this.pushStack(d(this,a||[],!0))},is:function(a){return!!d(this,"string"==typeof a&&fb.test(a)?ab(a):a||[],!1).length}});var ib,jb=/^(?:\s*(<[\w\W]+>)[^>]*|#([\w-]*))$/,kb=ab.fn.init=function(a,b){var c,d;if(!a)return this;if("string"==typeof a){if(c="<"===a[0]&&">"===a[a.length-1]&&a.length>=3?[null,a,null]:jb.exec(a),!c||!c[1]&&b)return!b||b.jquery?(b||ib).find(a):this.constructor(b).find(a);if(c[1]){if(b=b instanceof ab?b[0]:b,ab.merge(this,ab.parseHTML(c[1],b&&b.nodeType?b.ownerDocument||b:$,!0)),gb.test(c[1])&&ab.isPlainObject(b))for(c in b)ab.isFunction(this[c])?this[c](b[c]):this.attr(c,b[c]);return this}return d=$.getElementById(c[2]),d&&d.parentNode&&(this.length=1,this[0]=d),this.context=$,this.selector=a,this}return a.nodeType?(this.context=this[0]=a,this.length=1,this):ab.isFunction(a)?"undefined"!=typeof ib.ready?ib.ready(a):a(ab):(void 0!==a.selector&&(this.selector=a.selector,this.context=a.context),ab.makeArray(a,this))};kb.prototype=ab.fn,ib=ab($);var lb=/^(?:parents|prev(?:Until|All))/,mb={children:!0,contents:!0,next:!0,prev:!0};ab.extend({dir:function(a,b,c){for(var d=[],e=void 0!==c;(a=a[b])&&9!==a.nodeType;)if(1===a.nodeType){if(e&&ab(a).is(c))break;d.push(a)}return d},sibling:function(a,b){for(var c=[];a;a=a.nextSibling)1===a.nodeType&&a!==b&&c.push(a);return c}}),ab.fn.extend({has:function(a){var b=ab(a,this),c=b.length;return this.filter(function(){for(var a=0;c>a;a++)if(ab.contains(this,b[a]))return!0})},closest:function(a,b){for(var c,d=0,e=this.length,f=[],g=fb.test(a)||"string"!=typeof a?ab(a,b||this.context):0;e>d;d++)for(c=this[d];c&&c!==b;c=c.parentNode)if(c.nodeType<11&&(g?g.index(c)>-1:1===c.nodeType&&ab.find.matchesSelector(c,a))){f.push(c);break}return this.pushStack(f.length>1?ab.unique(f):f)},index:function(a){return a?"string"==typeof a?U.call(ab(a),this[0]):U.call(this,a.jquery?a[0]:a):this[0]&&this[0].parentNode?this.first().prevAll().length:-1},add:function(a,b){return this.pushStack(ab.unique(ab.merge(this.get(),ab(a,b))))},addBack:function(a){return this.add(null==a?this.prevObject:this.prevObject.filter(a))}}),ab.each({parent:function(a){var b=a.parentNode;return b&&11!==b.nodeType?b:null},parents:function(a){return ab.dir(a,"parentNode")},parentsUntil:function(a,b,c){return ab.dir(a,"parentNode",c)},next:function(a){return e(a,"nextSibling")},prev:function(a){return e(a,"previousSibling")},nextAll:function(a){return ab.dir(a,"nextSibling")},prevAll:function(a){return ab.dir(a,"previousSibling")},nextUntil:function(a,b,c){return ab.dir(a,"nextSibling",c)},prevUntil:function(a,b,c){return ab.dir(a,"previousSibling",c)},siblings:function(a){return ab.sibling((a.parentNode||{}).firstChild,a)},children:function(a){return ab.sibling(a.firstChild)},contents:function(a){return a.contentDocument||ab.merge([],a.childNodes)}},function(a,b){ab.fn[a]=function(c,d){var e=ab.map(this,b,c);return"Until"!==a.slice(-5)&&(d=c),d&&"string"==typeof d&&(e=ab.filter(d,e)),this.length>1&&(mb[a]||ab.unique(e),lb.test(a)&&e.reverse()),this.pushStack(e)}});var nb=/\S+/g,ob={};ab.Callbacks=function(a){a="string"==typeof a?ob[a]||f(a):ab.extend({},a);var b,c,d,e,g,h,i=[],j=!a.once&&[],k=function(f){for(b=a.memory&&f,c=!0,h=e||0,e=0,g=i.length,d=!0;i&&g>h;h++)if(i[h].apply(f[0],f[1])===!1&&a.stopOnFalse){b=!1;break}d=!1,i&&(j?j.length&&k(j.shift()):b?i=[]:l.disable())},l={add:function(){if(i){var c=i.length;!function f(b){ab.each(b,function(b,c){var d=ab.type(c);"function"===d?a.unique&&l.has(c)||i.push(c):c&&c.length&&"string"!==d&&f(c)})}(arguments),d?g=i.length:b&&(e=c,k(b))}return this},remove:function(){return i&&ab.each(arguments,function(a,b){for(var c;(c=ab.inArray(b,i,c))>-1;)i.splice(c,1),d&&(g>=c&&g--,h>=c&&h--)}),this},has:function(a){return a?ab.inArray(a,i)>-1:!(!i||!i.length)},empty:function(){return i=[],g=0,this},disable:function(){return i=j=b=void 0,this},disabled:function(){return!i},lock:function(){return j=void 0,b||l.disable(),this},locked:function(){return!j},fireWith:function(a,b){return!i||c&&!j||(b=b||[],b=[a,b.slice?b.slice():b],d?j.push(b):k(b)),this},fire:function(){return l.fireWith(this,arguments),this},fired:function(){return!!c}};return l},ab.extend({Deferred:function(a){var b=[["resolve","done",ab.Callbacks("once memory"),"resolved"],["reject","fail",ab.Callbacks("once memory"),"rejected"],["notify","progress",ab.Callbacks("memory")]],c="pending",d={state:function(){return c},always:function(){return e.done(arguments).fail(arguments),this},then:function(){var a=arguments;return ab.Deferred(function(c){ab.each(b,function(b,f){var g=ab.isFunction(a[b])&&a[b];e[f[1]](function(){var a=g&&g.apply(this,arguments);a&&ab.isFunction(a.promise)?a.promise().done(c.resolve).fail(c.reject).progress(c.notify):c[f[0]+"With"](this===d?c.promise():this,g?[a]:arguments)})}),a=null}).promise()},promise:function(a){return null!=a?ab.extend(a,d):d}},e={};return d.pipe=d.then,ab.each(b,function(a,f){var g=f[2],h=f[3];d[f[1]]=g.add,h&&g.add(function(){c=h},b[1^a][2].disable,b[2][2].lock),e[f[0]]=function(){return e[f[0]+"With"](this===e?d:this,arguments),this},e[f[0]+"With"]=g.fireWith}),d.promise(e),a&&a.call(e,e),e},when:function(a){var b,c,d,e=0,f=R.call(arguments),g=f.length,h=1!==g||a&&ab.isFunction(a.promise)?g:0,i=1===h?a:ab.Deferred(),j=function(a,c,d){return function(e){c[a]=this,d[a]=arguments.length>1?R.call(arguments):e,d===b?i.notifyWith(c,d):--h||i.resolveWith(c,d)}};if(g>1)for(b=new Array(g),c=new Array(g),d=new Array(g);g>e;e++)f[e]&&ab.isFunction(f[e].promise)?f[e].promise().done(j(e,d,f)).fail(i.reject).progress(j(e,c,b)):--h;return h||i.resolveWith(d,f),i.promise()}});var pb;ab.fn.ready=function(a){return ab.ready.promise().done(a),this},ab.extend({isReady:!1,readyWait:1,holdReady:function(a){a?ab.readyWait++:ab.ready(!0)},ready:function(a){(a===!0?--ab.readyWait:ab.isReady)||(ab.isReady=!0,a!==!0&&--ab.readyWait>0||(pb.resolveWith($,[ab]),ab.fn.trigger&&ab($).trigger("ready").off("ready")))}}),ab.ready.promise=function(b){return pb||(pb=ab.Deferred(),"complete"===$.readyState?setTimeout(ab.ready):($.addEventListener("DOMContentLoaded",g,!1),a.addEventListener("load",g,!1))),pb.promise(b)},ab.ready.promise();var qb=ab.access=function(a,b,c,d,e,f,g){var h=0,i=a.length,j=null==c;if("object"===ab.type(c)){e=!0;for(h in c)ab.access(a,b,h,c[h],!0,f,g)}else if(void 0!==d&&(e=!0,ab.isFunction(d)||(g=!0),j&&(g?(b.call(a,d),b=null):(j=b,b=function(a,b,c){return j.call(ab(a),c)})),b))for(;i>h;h++)b(a[h],c,g?d:d.call(a[h],h,b(a[h],c)));return e?a:j?b.call(a):i?b(a[0],c):f};ab.acceptData=function(a){return 1===a.nodeType||9===a.nodeType||!+a.nodeType},h.uid=1,h.accepts=ab.acceptData,h.prototype={key:function(a){if(!h.accepts(a))return 0;var b={},c=a[this.expando];if(!c){c=h.uid++;try{b[this.expando]={value:c},Object.defineProperties(a,b)}catch(d){b[this.expando]=c,ab.extend(a,b)}}return this.cache[c]||(this.cache[c]={}),c},set:function(a,b,c){var d,e=this.key(a),f=this.cache[e];if("string"==typeof b)f[b]=c;else if(ab.isEmptyObject(f))ab.extend(this.cache[e],b);else for(d in b)f[d]=b[d];return f},get:function(a,b){var c=this.cache[this.key(a)];return void 0===b?c:c[b]},access:function(a,b,c){var d;return void 0===b||b&&"string"==typeof b&&void 0===c?(d=this.get(a,b),void 0!==d?d:this.get(a,ab.camelCase(b))):(this.set(a,b,c),void 0!==c?c:b)},remove:function(a,b){var c,d,e,f=this.key(a),g=this.cache[f];if(void 0===b)this.cache[f]={};else{ab.isArray(b)?d=b.concat(b.map(ab.camelCase)):(e=ab.camelCase(b),b in g?d=[b,e]:(d=e,d=d in g?[d]:d.match(nb)||[])),c=d.length;for(;c--;)delete g[d[c]]}},hasData:function(a){return!ab.isEmptyObject(this.cache[a[this.expando]]||{})},discard:function(a){a[this.expando]&&delete this.cache[a[this.expando]]}};var rb=new h,sb=new h,tb=/^(?:\{[\w\W]*\}|\[[\w\W]*\])$/,ub=/([A-Z])/g;ab.extend({hasData:function(a){return sb.hasData(a)||rb.hasData(a)},data:function(a,b,c){return sb.access(a,b,c)},removeData:function(a,b){sb.remove(a,b)},_data:function(a,b,c){return rb.access(a,b,c)},_removeData:function(a,b){rb.remove(a,b)}}),ab.fn.extend({data:function(a,b){var c,d,e,f=this[0],g=f&&f.attributes;if(void 0===a){if(this.length&&(e=sb.get(f),1===f.nodeType&&!rb.get(f,"hasDataAttrs"))){for(c=g.length;c--;)d=g[c].name,0===d.indexOf("data-")&&(d=ab.camelCase(d.slice(5)),i(f,d,e[d]));rb.set(f,"hasDataAttrs",!0)}return e}return"object"==typeof a?this.each(function(){sb.set(this,a)}):qb(this,function(b){var c,d=ab.camelCase(a);if(f&&void 0===b){if(c=sb.get(f,a),void 0!==c)return c;if(c=sb.get(f,d),void 0!==c)return c;if(c=i(f,d,void 0),void 0!==c)return c}else this.each(function(){var c=sb.get(this,d);sb.set(this,d,b),-1!==a.indexOf("-")&&void 0!==c&&sb.set(this,a,b)})},null,b,arguments.length>1,null,!0)},removeData:function(a){return this.each(function(){sb.remove(this,a)})}}),ab.extend({queue:function(a,b,c){var d;return a?(b=(b||"fx")+"queue",d=rb.get(a,b),c&&(!d||ab.isArray(c)?d=rb.access(a,b,ab.makeArray(c)):d.push(c)),d||[]):void 0},dequeue:function(a,b){b=b||"fx";var c=ab.queue(a,b),d=c.length,e=c.shift(),f=ab._queueHooks(a,b),g=function(){ab.dequeue(a,b)};"inprogress"===e&&(e=c.shift(),d--),e&&("fx"===b&&c.unshift("inprogress"),delete f.stop,e.call(a,g,f)),!d&&f&&f.empty.fire()},_queueHooks:function(a,b){var c=b+"queueHooks";return rb.get(a,c)||rb.access(a,c,{empty:ab.Callbacks("once memory").add(function(){rb.remove(a,[b+"queue",c])})})}}),ab.fn.extend({queue:function(a,b){var c=2;return"string"!=typeof a&&(b=a,a="fx",c--),arguments.length<c?ab.queue(this[0],a):void 0===b?this:this.each(function(){var c=ab.queue(this,a,b);ab._queueHooks(this,a),"fx"===a&&"inprogress"!==c[0]&&ab.dequeue(this,a)})},dequeue:function(a){return this.each(function(){ab.dequeue(this,a)})},clearQueue:function(a){return this.queue(a||"fx",[])},promise:function(a,b){var c,d=1,e=ab.Deferred(),f=this,g=this.length,h=function(){--d||e.resolveWith(f,[f])};for("string"!=typeof a&&(b=a,a=void 0),a=a||"fx";g--;)c=rb.get(f[g],a+"queueHooks"),c&&c.empty&&(d++,c.empty.add(h));return h(),e.promise(b)}});var vb=/[+-]?(?:\d*\.|)\d+(?:[eE][+-]?\d+|)/.source,wb=["Top","Right","Bottom","Left"],xb=function(a,b){return a=b||a,"none"===ab.css(a,"display")||!ab.contains(a.ownerDocument,a)},yb=/^(?:checkbox|radio)$/i;!function(){var a=$.createDocumentFragment(),b=a.appendChild($.createElement("div"));b.innerHTML="<input type='radio' checked='checked' name='t'/>",Z.checkClone=b.cloneNode(!0).cloneNode(!0).lastChild.checked,b.innerHTML="<textarea>x</textarea>",Z.noCloneChecked=!!b.cloneNode(!0).lastChild.defaultValue}();var zb="undefined";Z.focusinBubbles="onfocusin"in a;var Ab=/^key/,Bb=/^(?:mouse|contextmenu)|click/,Cb=/^(?:focusinfocus|focusoutblur)$/,Db=/^([^.]*)(?:\.(.+)|)$/;ab.event={global:{},add:function(a,b,c,d,e){var f,g,h,i,j,k,l,m,n,o,p,q=rb.get(a);if(q)for(c.handler&&(f=c,c=f.handler,e=f.selector),c.guid||(c.guid=ab.guid++),(i=q.events)||(i=q.events={}),(g=q.handle)||(g=q.handle=function(b){return typeof ab!==zb&&ab.event.triggered!==b.type?ab.event.dispatch.apply(a,arguments):void 0}),b=(b||"").match(nb)||[""],j=b.length;j--;)h=Db.exec(b[j])||[],n=p=h[1],o=(h[2]||"").split(".").sort(),n&&(l=ab.event.special[n]||{},n=(e?l.delegateType:l.bindType)||n,l=ab.event.special[n]||{},k=ab.extend({type:n,origType:p,data:d,handler:c,guid:c.guid,selector:e,needsContext:e&&ab.expr.match.needsContext.test(e),namespace:o.join(".")},f),(m=i[n])||(m=i[n]=[],m.delegateCount=0,l.setup&&l.setup.call(a,d,o,g)!==!1||a.addEventListener&&a.addEventListener(n,g,!1)),l.add&&(l.add.call(a,k),k.handler.guid||(k.handler.guid=c.guid)),e?m.splice(m.delegateCount++,0,k):m.push(k),ab.event.global[n]=!0)},remove:function(a,b,c,d,e){var f,g,h,i,j,k,l,m,n,o,p,q=rb.hasData(a)&&rb.get(a);if(q&&(i=q.events)){for(b=(b||"").match(nb)||[""],j=b.length;j--;)if(h=Db.exec(b[j])||[],n=p=h[1],o=(h[2]||"").split(".").sort(),n){for(l=ab.event.special[n]||{},n=(d?l.delegateType:l.bindType)||n,m=i[n]||[],h=h[2]&&new RegExp("(^|\\.)"+o.join("\\.(?:.*\\.|)")+"(\\.|$)"),g=f=m.length;f--;)k=m[f],!e&&p!==k.origType||c&&c.guid!==k.guid||h&&!h.test(k.namespace)||d&&d!==k.selector&&("**"!==d||!k.selector)||(m.splice(f,1),k.selector&&m.delegateCount--,l.remove&&l.remove.call(a,k));g&&!m.length&&(l.teardown&&l.teardown.call(a,o,q.handle)!==!1||ab.removeEvent(a,n,q.handle),delete i[n])}else for(n in i)ab.event.remove(a,n+b[j],c,d,!0);ab.isEmptyObject(i)&&(delete q.handle,rb.remove(a,"events"))}},trigger:function(b,c,d,e){var f,g,h,i,j,k,l,m=[d||$],n=X.call(b,"type")?b.type:b,o=X.call(b,"namespace")?b.namespace.split("."):[];if(g=h=d=d||$,3!==d.nodeType&&8!==d.nodeType&&!Cb.test(n+ab.event.triggered)&&(n.indexOf(".")>=0&&(o=n.split("."),n=o.shift(),o.sort()),j=n.indexOf(":")<0&&"on"+n,b=b[ab.expando]?b:new ab.Event(n,"object"==typeof b&&b),b.isTrigger=e?2:3,b.namespace=o.join("."),b.namespace_re=b.namespace?new RegExp("(^|\\.)"+o.join("\\.(?:.*\\.|)")+"(\\.|$)"):null,b.result=void 0,b.target||(b.target=d),c=null==c?[b]:ab.makeArray(c,[b]),l=ab.event.special[n]||{},e||!l.trigger||l.trigger.apply(d,c)!==!1)){if(!e&&!l.noBubble&&!ab.isWindow(d)){for(i=l.delegateType||n,Cb.test(i+n)||(g=g.parentNode);g;g=g.parentNode)m.push(g),h=g;h===(d.ownerDocument||$)&&m.push(h.defaultView||h.parentWindow||a)}for(f=0;(g=m[f++])&&!b.isPropagationStopped();)b.type=f>1?i:l.bindType||n,k=(rb.get(g,"events")||{})[b.type]&&rb.get(g,"handle"),k&&k.apply(g,c),k=j&&g[j],k&&k.apply&&ab.acceptData(g)&&(b.result=k.apply(g,c),b.result===!1&&b.preventDefault());return b.type=n,e||b.isDefaultPrevented()||l._default&&l._default.apply(m.pop(),c)!==!1||!ab.acceptData(d)||j&&ab.isFunction(d[n])&&!ab.isWindow(d)&&(h=d[j],h&&(d[j]=null),ab.event.triggered=n,d[n](),ab.event.triggered=void 0,h&&(d[j]=h)),b.result}},dispatch:function(a){a=ab.event.fix(a);var b,c,d,e,f,g=[],h=R.call(arguments),i=(rb.get(this,"events")||{})[a.type]||[],j=ab.event.special[a.type]||{};if(h[0]=a,a.delegateTarget=this,!j.preDispatch||j.preDispatch.call(this,a)!==!1){for(g=ab.event.handlers.call(this,a,i),b=0;(e=g[b++])&&!a.isPropagationStopped();)for(a.currentTarget=e.elem,c=0;(f=e.handlers[c++])&&!a.isImmediatePropagationStopped();)(!a.namespace_re||a.namespace_re.test(f.namespace))&&(a.handleObj=f,a.data=f.data,d=((ab.event.special[f.origType]||{}).handle||f.handler).apply(e.elem,h),void 0!==d&&(a.result=d)===!1&&(a.preventDefault(),a.stopPropagation()));return j.postDispatch&&j.postDispatch.call(this,a),a.result}},handlers:function(a,b){var c,d,e,f,g=[],h=b.delegateCount,i=a.target;if(h&&i.nodeType&&(!a.button||"click"!==a.type))for(;i!==this;i=i.parentNode||this)if(i.disabled!==!0||"click"!==a.type){for(d=[],c=0;h>c;c++)f=b[c],e=f.selector+" ",void 0===d[e]&&(d[e]=f.needsContext?ab(e,this).index(i)>=0:ab.find(e,this,null,[i]).length),d[e]&&d.push(f);d.length&&g.push({elem:i,handlers:d})}return h<b.length&&g.push({elem:this,handlers:b.slice(h)}),g},props:"altKey bubbles cancelable ctrlKey currentTarget eventPhase metaKey relatedTarget shiftKey target timeStamp view which".split(" "),fixHooks:{},keyHooks:{props:"char charCode key keyCode".split(" "),filter:function(a,b){return null==a.which&&(a.which=null!=b.charCode?b.charCode:b.keyCode),a}},mouseHooks:{props:"button buttons clientX clientY offsetX offsetY pageX pageY screenX screenY toElement".split(" "),filter:function(a,b){var c,d,e,f=b.button;return null==a.pageX&&null!=b.clientX&&(c=a.target.ownerDocument||$,d=c.documentElement,e=c.body,a.pageX=b.clientX+(d&&d.scrollLeft||e&&e.scrollLeft||0)-(d&&d.clientLeft||e&&e.clientLeft||0),a.pageY=b.clientY+(d&&d.scrollTop||e&&e.scrollTop||0)-(d&&d.clientTop||e&&e.clientTop||0)),a.which||void 0===f||(a.which=1&f?1:2&f?3:4&f?2:0),a}},fix:function(a){if(a[ab.expando])return a;var b,c,d,e=a.type,f=a,g=this.fixHooks[e];for(g||(this.fixHooks[e]=g=Bb.test(e)?this.mouseHooks:Ab.test(e)?this.keyHooks:{}),d=g.props?this.props.concat(g.props):this.props,a=new ab.Event(f),b=d.length;b--;)c=d[b],a[c]=f[c];return a.target||(a.target=$),3===a.target.nodeType&&(a.target=a.target.parentNode),g.filter?g.filter(a,f):a},special:{load:{noBubble:!0},focus:{trigger:function(){return this!==l()&&this.focus?(this.focus(),!1):void 0},delegateType:"focusin"},blur:{trigger:function(){return this===l()&&this.blur?(this.blur(),!1):void 0},delegateType:"focusout"},click:{trigger:function(){return"checkbox"===this.type&&this.click&&ab.nodeName(this,"input")?(this.click(),!1):void 0},_default:function(a){return ab.nodeName(a.target,"a")}},beforeunload:{postDispatch:function(a){void 0!==a.result&&(a.originalEvent.returnValue=a.result)}}},simulate:function(a,b,c,d){var e=ab.extend(new ab.Event,c,{type:a,isSimulated:!0,originalEvent:{}});d?ab.event.trigger(e,null,b):ab.event.dispatch.call(b,e),e.isDefaultPrevented()&&c.preventDefault()}},ab.removeEvent=function(a,b,c){a.removeEventListener&&a.removeEventListener(b,c,!1)},ab.Event=function(a,b){return this instanceof ab.Event?(a&&a.type?(this.originalEvent=a,this.type=a.type,this.isDefaultPrevented=a.defaultPrevented||void 0===a.defaultPrevented&&a.getPreventDefault&&a.getPreventDefault()?j:k):this.type=a,b&&ab.extend(this,b),this.timeStamp=a&&a.timeStamp||ab.now(),void(this[ab.expando]=!0)):new ab.Event(a,b)},ab.Event.prototype={isDefaultPrevented:k,isPropagationStopped:k,isImmediatePropagationStopped:k,preventDefault:function(){var a=this.originalEvent;this.isDefaultPrevented=j,a&&a.preventDefault&&a.preventDefault()},stopPropagation:function(){var a=this.originalEvent;this.isPropagationStopped=j,a&&a.stopPropagation&&a.stopPropagation()},stopImmediatePropagation:function(){this.isImmediatePropagationStopped=j,this.stopPropagation()}},ab.each({mouseenter:"mouseover",mouseleave:"mouseout"},function(a,b){ab.event.special[a]={delegateType:b,bindType:b,handle:function(a){var c,d=this,e=a.relatedTarget,f=a.handleObj;return(!e||e!==d&&!ab.contains(d,e))&&(a.type=f.origType,c=f.handler.apply(this,arguments),a.type=b),c}}}),Z.focusinBubbles||ab.each({focus:"focusin",blur:"focusout"},function(a,b){var c=function(a){ab.event.simulate(b,a.target,ab.event.fix(a),!0)};ab.event.special[b]={setup:function(){var d=this.ownerDocument||this,e=rb.access(d,b);e||d.addEventListener(a,c,!0),rb.access(d,b,(e||0)+1)},teardown:function(){var d=this.ownerDocument||this,e=rb.access(d,b)-1;e?rb.access(d,b,e):(d.removeEventListener(a,c,!0),rb.remove(d,b))}}}),ab.fn.extend({on:function(a,b,c,d,e){var f,g;if("object"==typeof a){"string"!=typeof b&&(c=c||b,b=void 0);for(g in a)this.on(g,b,c,a[g],e);return this}if(null==c&&null==d?(d=b,c=b=void 0):null==d&&("string"==typeof b?(d=c,c=void 0):(d=c,c=b,b=void 0)),d===!1)d=k;else if(!d)return this;return 1===e&&(f=d,d=function(a){return ab().off(a),f.apply(this,arguments)},d.guid=f.guid||(f.guid=ab.guid++)),this.each(function(){ab.event.add(this,a,d,c,b)})},one:function(a,b,c,d){return this.on(a,b,c,d,1)},off:function(a,b,c){var d,e;if(a&&a.preventDefault&&a.handleObj)return d=a.handleObj,ab(a.delegateTarget).off(d.namespace?d.origType+"."+d.namespace:d.origType,d.selector,d.handler),this;if("object"==typeof a){for(e in a)this.off(e,b,a[e]);return this}return(b===!1||"function"==typeof b)&&(c=b,b=void 0),c===!1&&(c=k),this.each(function(){ab.event.remove(this,a,c,b)})},trigger:function(a,b){return this.each(function(){ab.event.trigger(a,b,this)})},triggerHandler:function(a,b){var c=this[0];return c?ab.event.trigger(a,b,c,!0):void 0}});var Eb=/<(?!area|br|col|embed|hr|img|input|link|meta|param)(([\w:]+)[^>]*)\/>/gi,Fb=/<([\w:]+)/,Gb=/<|&#?\w+;/,Hb=/<(?:script|style|link)/i,Ib=/checked\s*(?:[^=]|=\s*.checked.)/i,Jb=/^$|\/(?:java|ecma)script/i,Kb=/^true\/(.*)/,Lb=/^\s*<!(?:\[CDATA\[|--)|(?:\]\]|--)>\s*$/g,Mb={option:[1,"<select multiple='multiple'>","</select>"],thead:[1,"<table>","</table>"],col:[2,"<table><colgroup>","</colgroup></table>"],tr:[2,"<table><tbody>","</tbody></table>"],td:[3,"<table><tbody><tr>","</tr></tbody></table>"],_default:[0,"",""]};Mb.optgroup=Mb.option,Mb.tbody=Mb.tfoot=Mb.colgroup=Mb.caption=Mb.thead,Mb.th=Mb.td,ab.extend({clone:function(a,b,c){var d,e,f,g,h=a.cloneNode(!0),i=ab.contains(a.ownerDocument,a);if(!(Z.noCloneChecked||1!==a.nodeType&&11!==a.nodeType||ab.isXMLDoc(a)))for(g=r(h),f=r(a),d=0,e=f.length;e>d;d++)s(f[d],g[d]);if(b)if(c)for(f=f||r(a),g=g||r(h),d=0,e=f.length;e>d;d++)q(f[d],g[d]);else q(a,h);return g=r(h,"script"),g.length>0&&p(g,!i&&r(a,"script")),h},buildFragment:function(a,b,c,d){for(var e,f,g,h,i,j,k=b.createDocumentFragment(),l=[],m=0,n=a.length;n>m;m++)if(e=a[m],e||0===e)if("object"===ab.type(e))ab.merge(l,e.nodeType?[e]:e);else if(Gb.test(e)){for(f=f||k.appendChild(b.createElement("div")),g=(Fb.exec(e)||["",""])[1].toLowerCase(),h=Mb[g]||Mb._default,f.innerHTML=h[1]+e.replace(Eb,"<$1></$2>")+h[2],j=h[0];j--;)f=f.lastChild;ab.merge(l,f.childNodes),f=k.firstChild,f.textContent=""}else l.push(b.createTextNode(e));for(k.textContent="",m=0;e=l[m++];)if((!d||-1===ab.inArray(e,d))&&(i=ab.contains(e.ownerDocument,e),f=r(k.appendChild(e),"script"),i&&p(f),c))for(j=0;e=f[j++];)Jb.test(e.type||"")&&c.push(e);return k},cleanData:function(a){for(var b,c,d,e,f,g,h=ab.event.special,i=0;void 0!==(c=a[i]);i++){if(ab.acceptData(c)&&(f=c[rb.expando],f&&(b=rb.cache[f]))){if(d=Object.keys(b.events||{}),d.length)for(g=0;void 0!==(e=d[g]);g++)h[e]?ab.event.remove(c,e):ab.removeEvent(c,e,b.handle);rb.cache[f]&&delete rb.cache[f]}delete sb.cache[c[sb.expando]]}}}),ab.fn.extend({text:function(a){return qb(this,function(a){return void 0===a?ab.text(this):this.empty().each(function(){(1===this.nodeType||11===this.nodeType||9===this.nodeType)&&(this.textContent=a)})},null,a,arguments.length)},append:function(){return this.domManip(arguments,function(a){if(1===this.nodeType||11===this.nodeType||9===this.nodeType){var b=m(this,a);b.appendChild(a)}})},prepend:function(){return this.domManip(arguments,function(a){if(1===this.nodeType||11===this.nodeType||9===this.nodeType){var b=m(this,a);b.insertBefore(a,b.firstChild)}})},before:function(){return this.domManip(arguments,function(a){this.parentNode&&this.parentNode.insertBefore(a,this)})},after:function(){return this.domManip(arguments,function(a){this.parentNode&&this.parentNode.insertBefore(a,this.nextSibling)})},remove:function(a,b){for(var c,d=a?ab.filter(a,this):this,e=0;null!=(c=d[e]);e++)b||1!==c.nodeType||ab.cleanData(r(c)),c.parentNode&&(b&&ab.contains(c.ownerDocument,c)&&p(r(c,"script")),c.parentNode.removeChild(c));return this},empty:function(){for(var a,b=0;null!=(a=this[b]);b++)1===a.nodeType&&(ab.cleanData(r(a,!1)),a.textContent="");return this},clone:function(a,b){return a=null==a?!1:a,b=null==b?a:b,this.map(function(){return ab.clone(this,a,b)})},html:function(a){return qb(this,function(a){var b=this[0]||{},c=0,d=this.length;if(void 0===a&&1===b.nodeType)return b.innerHTML;if("string"==typeof a&&!Hb.test(a)&&!Mb[(Fb.exec(a)||["",""])[1].toLowerCase()]){a=a.replace(Eb,"<$1></$2>");try{for(;d>c;c++)b=this[c]||{},1===b.nodeType&&(ab.cleanData(r(b,!1)),b.innerHTML=a);b=0}catch(e){}}b&&this.empty().append(a)},null,a,arguments.length)},replaceWith:function(){var a=arguments[0];return this.domManip(arguments,function(b){a=this.parentNode,ab.cleanData(r(this)),a&&a.replaceChild(b,this)}),a&&(a.length||a.nodeType)?this:this.remove()},detach:function(a){return this.remove(a,!0)},domManip:function(a,b){a=S.apply([],a);var c,d,e,f,g,h,i=0,j=this.length,k=this,l=j-1,m=a[0],p=ab.isFunction(m);if(p||j>1&&"string"==typeof m&&!Z.checkClone&&Ib.test(m))return this.each(function(c){var d=k.eq(c);p&&(a[0]=m.call(this,c,d.html())),d.domManip(a,b)});if(j&&(c=ab.buildFragment(a,this[0].ownerDocument,!1,this),d=c.firstChild,1===c.childNodes.length&&(c=d),d)){for(e=ab.map(r(c,"script"),n),f=e.length;j>i;i++)g=c,i!==l&&(g=ab.clone(g,!0,!0),f&&ab.merge(e,r(g,"script"))),b.call(this[i],g,i);if(f)for(h=e[e.length-1].ownerDocument,ab.map(e,o),i=0;f>i;i++)g=e[i],Jb.test(g.type||"")&&!rb.access(g,"globalEval")&&ab.contains(h,g)&&(g.src?ab._evalUrl&&ab._evalUrl(g.src):ab.globalEval(g.textContent.replace(Lb,"")))}return this}}),ab.each({appendTo:"append",prependTo:"prepend",insertBefore:"before",insertAfter:"after",replaceAll:"replaceWith"},function(a,b){ab.fn[a]=function(a){for(var c,d=[],e=ab(a),f=e.length-1,g=0;f>=g;g++)c=g===f?this:this.clone(!0),ab(e[g])[b](c),T.apply(d,c.get());return this.pushStack(d)}});var Nb,Ob={},Pb=/^margin/,Qb=new RegExp("^("+vb+")(?!px)[a-z%]+$","i"),Rb=function(a){return a.ownerDocument.defaultView.getComputedStyle(a,null)};!function(){function b(){h.style.cssText="-webkit-box-sizing:border-box;-moz-box-sizing:border-box;box-sizing:border-box;padding:1px;border:1px;display:block;width:4px;margin-top:1%;position:absolute;top:1%",f.appendChild(g);var b=a.getComputedStyle(h,null);c="1%"!==b.top,d="4px"===b.width,f.removeChild(g)}var c,d,e="padding:0;margin:0;border:0;display:block;-webkit-box-sizing:content-box;-moz-box-sizing:content-box;box-sizing:content-box",f=$.documentElement,g=$.createElement("div"),h=$.createElement("div");h.style.backgroundClip="content-box",h.cloneNode(!0).style.backgroundClip="",Z.clearCloneStyle="content-box"===h.style.backgroundClip,g.style.cssText="border:0;width:0;height:0;position:absolute;top:0;left:-9999px;margin-top:1px",g.appendChild(h),a.getComputedStyle&&ab.extend(Z,{pixelPosition:function(){return b(),c},boxSizingReliable:function(){return null==d&&b(),d},reliableMarginRight:function(){var b,c=h.appendChild($.createElement("div"));return c.style.cssText=h.style.cssText=e,c.style.marginRight=c.style.width="0",h.style.width="1px",f.appendChild(g),b=!parseFloat(a.getComputedStyle(c,null).marginRight),f.removeChild(g),h.innerHTML="",b}})}(),ab.swap=function(a,b,c,d){var e,f,g={};for(f in b)g[f]=a.style[f],a.style[f]=b[f];e=c.apply(a,d||[]);for(f in b)a.style[f]=g[f];return e};var Sb=/^(none|table(?!-c[ea]).+)/,Tb=new RegExp("^("+vb+")(.*)$","i"),Ub=new RegExp("^([+-])=("+vb+")","i"),Vb={position:"absolute",visibility:"hidden",display:"block"},Wb={letterSpacing:0,fontWeight:400},Xb=["Webkit","O","Moz","ms"];ab.extend({cssHooks:{opacity:{get:function(a,b){if(b){var c=v(a,"opacity");return""===c?"1":c}}}},cssNumber:{columnCount:!0,fillOpacity:!0,fontWeight:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,widows:!0,zIndex:!0,zoom:!0},cssProps:{"float":"cssFloat"},style:function(a,b,c,d){if(a&&3!==a.nodeType&&8!==a.nodeType&&a.style){var e,f,g,h=ab.camelCase(b),i=a.style;return b=ab.cssProps[h]||(ab.cssProps[h]=x(i,h)),g=ab.cssHooks[b]||ab.cssHooks[h],void 0===c?g&&"get"in g&&void 0!==(e=g.get(a,!1,d))?e:i[b]:(f=typeof c,"string"===f&&(e=Ub.exec(c))&&(c=(e[1]+1)*e[2]+parseFloat(ab.css(a,b)),f="number"),null!=c&&c===c&&("number"!==f||ab.cssNumber[h]||(c+="px"),Z.clearCloneStyle||""!==c||0!==b.indexOf("background")||(i[b]="inherit"),g&&"set"in g&&void 0===(c=g.set(a,c,d))||(i[b]="",i[b]=c)),void 0)}},css:function(a,b,c,d){var e,f,g,h=ab.camelCase(b);return b=ab.cssProps[h]||(ab.cssProps[h]=x(a.style,h)),g=ab.cssHooks[b]||ab.cssHooks[h],g&&"get"in g&&(e=g.get(a,!0,c)),void 0===e&&(e=v(a,b,d)),"normal"===e&&b in Wb&&(e=Wb[b]),""===c||c?(f=parseFloat(e),c===!0||ab.isNumeric(f)?f||0:e):e}}),ab.each(["height","width"],function(a,b){ab.cssHooks[b]={get:function(a,c,d){return c?0===a.offsetWidth&&Sb.test(ab.css(a,"display"))?ab.swap(a,Vb,function(){return A(a,b,d)}):A(a,b,d):void 0},set:function(a,c,d){var e=d&&Rb(a);return y(a,c,d?z(a,b,d,"border-box"===ab.css(a,"boxSizing",!1,e),e):0)}}}),ab.cssHooks.marginRight=w(Z.reliableMarginRight,function(a,b){return b?ab.swap(a,{display:"inline-block"},v,[a,"marginRight"]):void 0}),ab.each({margin:"",padding:"",border:"Width"},function(a,b){ab.cssHooks[a+b]={expand:function(c){for(var d=0,e={},f="string"==typeof c?c.split(" "):[c];4>d;d++)e[a+wb[d]+b]=f[d]||f[d-2]||f[0];return e}},Pb.test(a)||(ab.cssHooks[a+b].set=y)}),ab.fn.extend({css:function(a,b){return qb(this,function(a,b,c){var d,e,f={},g=0;if(ab.isArray(b)){for(d=Rb(a),e=b.length;e>g;g++)f[b[g]]=ab.css(a,b[g],!1,d);return f}return void 0!==c?ab.style(a,b,c):ab.css(a,b)},a,b,arguments.length>1)},show:function(){return B(this,!0)},hide:function(){return B(this)},toggle:function(a){return"boolean"==typeof a?a?this.show():this.hide():this.each(function(){xb(this)?ab(this).show():ab(this).hide()})}}),ab.Tween=C,C.prototype={constructor:C,init:function(a,b,c,d,e,f){this.elem=a,this.prop=c,this.easing=e||"swing",this.options=b,this.start=this.now=this.cur(),this.end=d,this.unit=f||(ab.cssNumber[c]?"":"px")},cur:function(){var a=C.propHooks[this.prop];return a&&a.get?a.get(this):C.propHooks._default.get(this)},run:function(a){var b,c=C.propHooks[this.prop];return this.pos=b=this.options.duration?ab.easing[this.easing](a,this.options.duration*a,0,1,this.options.duration):a,this.now=(this.end-this.start)*b+this.start,this.options.step&&this.options.step.call(this.elem,this.now,this),c&&c.set?c.set(this):C.propHooks._default.set(this),this}},C.prototype.init.prototype=C.prototype,C.propHooks={_default:{get:function(a){var b;return null==a.elem[a.prop]||a.elem.style&&null!=a.elem.style[a.prop]?(b=ab.css(a.elem,a.prop,""),b&&"auto"!==b?b:0):a.elem[a.prop]},set:function(a){ab.fx.step[a.prop]?ab.fx.step[a.prop](a):a.elem.style&&(null!=a.elem.style[ab.cssProps[a.prop]]||ab.cssHooks[a.prop])?ab.style(a.elem,a.prop,a.now+a.unit):a.elem[a.prop]=a.now}}},C.propHooks.scrollTop=C.propHooks.scrollLeft={set:function(a){a.elem.nodeType&&a.elem.parentNode&&(a.elem[a.prop]=a.now)}},ab.easing={linear:function(a){return a},swing:function(a){return.5-Math.cos(a*Math.PI)/2}},ab.fx=C.prototype.init,ab.fx.step={};var Yb,Zb,$b=/^(?:toggle|show|hide)$/,_b=new RegExp("^(?:([+-])=|)("+vb+")([a-z%]*)$","i"),ac=/queueHooks$/,bc=[G],cc={"*":[function(a,b){var c=this.createTween(a,b),d=c.cur(),e=_b.exec(b),f=e&&e[3]||(ab.cssNumber[a]?"":"px"),g=(ab.cssNumber[a]||"px"!==f&&+d)&&_b.exec(ab.css(c.elem,a)),h=1,i=20;if(g&&g[3]!==f){f=f||g[3],e=e||[],g=+d||1;do h=h||".5",g/=h,ab.style(c.elem,a,g+f);while(h!==(h=c.cur()/d)&&1!==h&&--i)}return e&&(g=c.start=+g||+d||0,c.unit=f,c.end=e[1]?g+(e[1]+1)*e[2]:+e[2]),c}]};ab.Animation=ab.extend(I,{tweener:function(a,b){ab.isFunction(a)?(b=a,a=["*"]):a=a.split(" ");for(var c,d=0,e=a.length;e>d;d++)c=a[d],cc[c]=cc[c]||[],cc[c].unshift(b)},prefilter:function(a,b){b?bc.unshift(a):bc.push(a)}}),ab.speed=function(a,b,c){var d=a&&"object"==typeof a?ab.extend({},a):{complete:c||!c&&b||ab.isFunction(a)&&a,duration:a,easing:c&&b||b&&!ab.isFunction(b)&&b};
return d.duration=ab.fx.off?0:"number"==typeof d.duration?d.duration:d.duration in ab.fx.speeds?ab.fx.speeds[d.duration]:ab.fx.speeds._default,(null==d.queue||d.queue===!0)&&(d.queue="fx"),d.old=d.complete,d.complete=function(){ab.isFunction(d.old)&&d.old.call(this),d.queue&&ab.dequeue(this,d.queue)},d},ab.fn.extend({fadeTo:function(a,b,c,d){return this.filter(xb).css("opacity",0).show().end().animate({opacity:b},a,c,d)},animate:function(a,b,c,d){var e=ab.isEmptyObject(a),f=ab.speed(b,c,d),g=function(){var b=I(this,ab.extend({},a),f);(e||rb.get(this,"finish"))&&b.stop(!0)};return g.finish=g,e||f.queue===!1?this.each(g):this.queue(f.queue,g)},stop:function(a,b,c){var d=function(a){var b=a.stop;delete a.stop,b(c)};return"string"!=typeof a&&(c=b,b=a,a=void 0),b&&a!==!1&&this.queue(a||"fx",[]),this.each(function(){var b=!0,e=null!=a&&a+"queueHooks",f=ab.timers,g=rb.get(this);if(e)g[e]&&g[e].stop&&d(g[e]);else for(e in g)g[e]&&g[e].stop&&ac.test(e)&&d(g[e]);for(e=f.length;e--;)f[e].elem!==this||null!=a&&f[e].queue!==a||(f[e].anim.stop(c),b=!1,f.splice(e,1));(b||!c)&&ab.dequeue(this,a)})},finish:function(a){return a!==!1&&(a=a||"fx"),this.each(function(){var b,c=rb.get(this),d=c[a+"queue"],e=c[a+"queueHooks"],f=ab.timers,g=d?d.length:0;for(c.finish=!0,ab.queue(this,a,[]),e&&e.stop&&e.stop.call(this,!0),b=f.length;b--;)f[b].elem===this&&f[b].queue===a&&(f[b].anim.stop(!0),f.splice(b,1));for(b=0;g>b;b++)d[b]&&d[b].finish&&d[b].finish.call(this);delete c.finish})}}),ab.each(["toggle","show","hide"],function(a,b){var c=ab.fn[b];ab.fn[b]=function(a,d,e){return null==a||"boolean"==typeof a?c.apply(this,arguments):this.animate(E(b,!0),a,d,e)}}),ab.each({slideDown:E("show"),slideUp:E("hide"),slideToggle:E("toggle"),fadeIn:{opacity:"show"},fadeOut:{opacity:"hide"},fadeToggle:{opacity:"toggle"}},function(a,b){ab.fn[a]=function(a,c,d){return this.animate(b,a,c,d)}}),ab.timers=[],ab.fx.tick=function(){var a,b=0,c=ab.timers;for(Yb=ab.now();b<c.length;b++)a=c[b],a()||c[b]!==a||c.splice(b--,1);c.length||ab.fx.stop(),Yb=void 0},ab.fx.timer=function(a){ab.timers.push(a),a()?ab.fx.start():ab.timers.pop()},ab.fx.interval=13,ab.fx.start=function(){Zb||(Zb=setInterval(ab.fx.tick,ab.fx.interval))},ab.fx.stop=function(){clearInterval(Zb),Zb=null},ab.fx.speeds={slow:600,fast:200,_default:400},ab.fn.delay=function(a,b){return a=ab.fx?ab.fx.speeds[a]||a:a,b=b||"fx",this.queue(b,function(b,c){var d=setTimeout(b,a);c.stop=function(){clearTimeout(d)}})},function(){var a=$.createElement("input"),b=$.createElement("select"),c=b.appendChild($.createElement("option"));a.type="checkbox",Z.checkOn=""!==a.value,Z.optSelected=c.selected,b.disabled=!0,Z.optDisabled=!c.disabled,a=$.createElement("input"),a.value="t",a.type="radio",Z.radioValue="t"===a.value}();var dc,ec,fc=ab.expr.attrHandle;ab.fn.extend({attr:function(a,b){return qb(this,ab.attr,a,b,arguments.length>1)},removeAttr:function(a){return this.each(function(){ab.removeAttr(this,a)})}}),ab.extend({attr:function(a,b,c){var d,e,f=a.nodeType;if(a&&3!==f&&8!==f&&2!==f)return typeof a.getAttribute===zb?ab.prop(a,b,c):(1===f&&ab.isXMLDoc(a)||(b=b.toLowerCase(),d=ab.attrHooks[b]||(ab.expr.match.bool.test(b)?ec:dc)),void 0===c?d&&"get"in d&&null!==(e=d.get(a,b))?e:(e=ab.find.attr(a,b),null==e?void 0:e):null!==c?d&&"set"in d&&void 0!==(e=d.set(a,c,b))?e:(a.setAttribute(b,c+""),c):void ab.removeAttr(a,b))},removeAttr:function(a,b){var c,d,e=0,f=b&&b.match(nb);if(f&&1===a.nodeType)for(;c=f[e++];)d=ab.propFix[c]||c,ab.expr.match.bool.test(c)&&(a[d]=!1),a.removeAttribute(c)},attrHooks:{type:{set:function(a,b){if(!Z.radioValue&&"radio"===b&&ab.nodeName(a,"input")){var c=a.value;return a.setAttribute("type",b),c&&(a.value=c),b}}}}}),ec={set:function(a,b,c){return b===!1?ab.removeAttr(a,c):a.setAttribute(c,c),c}},ab.each(ab.expr.match.bool.source.match(/\w+/g),function(a,b){var c=fc[b]||ab.find.attr;fc[b]=function(a,b,d){var e,f;return d||(f=fc[b],fc[b]=e,e=null!=c(a,b,d)?b.toLowerCase():null,fc[b]=f),e}});var gc=/^(?:input|select|textarea|button)$/i;ab.fn.extend({prop:function(a,b){return qb(this,ab.prop,a,b,arguments.length>1)},removeProp:function(a){return this.each(function(){delete this[ab.propFix[a]||a]})}}),ab.extend({propFix:{"for":"htmlFor","class":"className"},prop:function(a,b,c){var d,e,f,g=a.nodeType;if(a&&3!==g&&8!==g&&2!==g)return f=1!==g||!ab.isXMLDoc(a),f&&(b=ab.propFix[b]||b,e=ab.propHooks[b]),void 0!==c?e&&"set"in e&&void 0!==(d=e.set(a,c,b))?d:a[b]=c:e&&"get"in e&&null!==(d=e.get(a,b))?d:a[b]},propHooks:{tabIndex:{get:function(a){return a.hasAttribute("tabindex")||gc.test(a.nodeName)||a.href?a.tabIndex:-1}}}}),Z.optSelected||(ab.propHooks.selected={get:function(a){var b=a.parentNode;return b&&b.parentNode&&b.parentNode.selectedIndex,null}}),ab.each(["tabIndex","readOnly","maxLength","cellSpacing","cellPadding","rowSpan","colSpan","useMap","frameBorder","contentEditable"],function(){ab.propFix[this.toLowerCase()]=this});var hc=/[\t\r\n\f]/g;ab.fn.extend({addClass:function(a){var b,c,d,e,f,g,h="string"==typeof a&&a,i=0,j=this.length;if(ab.isFunction(a))return this.each(function(b){ab(this).addClass(a.call(this,b,this.className))});if(h)for(b=(a||"").match(nb)||[];j>i;i++)if(c=this[i],d=1===c.nodeType&&(c.className?(" "+c.className+" ").replace(hc," "):" ")){for(f=0;e=b[f++];)d.indexOf(" "+e+" ")<0&&(d+=e+" ");g=ab.trim(d),c.className!==g&&(c.className=g)}return this},removeClass:function(a){var b,c,d,e,f,g,h=0===arguments.length||"string"==typeof a&&a,i=0,j=this.length;if(ab.isFunction(a))return this.each(function(b){ab(this).removeClass(a.call(this,b,this.className))});if(h)for(b=(a||"").match(nb)||[];j>i;i++)if(c=this[i],d=1===c.nodeType&&(c.className?(" "+c.className+" ").replace(hc," "):"")){for(f=0;e=b[f++];)for(;d.indexOf(" "+e+" ")>=0;)d=d.replace(" "+e+" "," ");g=a?ab.trim(d):"",c.className!==g&&(c.className=g)}return this},toggleClass:function(a,b){var c=typeof a;return"boolean"==typeof b&&"string"===c?b?this.addClass(a):this.removeClass(a):this.each(ab.isFunction(a)?function(c){ab(this).toggleClass(a.call(this,c,this.className,b),b)}:function(){if("string"===c)for(var b,d=0,e=ab(this),f=a.match(nb)||[];b=f[d++];)e.hasClass(b)?e.removeClass(b):e.addClass(b);else(c===zb||"boolean"===c)&&(this.className&&rb.set(this,"__className__",this.className),this.className=this.className||a===!1?"":rb.get(this,"__className__")||"")})},hasClass:function(a){for(var b=" "+a+" ",c=0,d=this.length;d>c;c++)if(1===this[c].nodeType&&(" "+this[c].className+" ").replace(hc," ").indexOf(b)>=0)return!0;return!1}});var ic=/\r/g;ab.fn.extend({val:function(a){var b,c,d,e=this[0];{if(arguments.length)return d=ab.isFunction(a),this.each(function(c){var e;1===this.nodeType&&(e=d?a.call(this,c,ab(this).val()):a,null==e?e="":"number"==typeof e?e+="":ab.isArray(e)&&(e=ab.map(e,function(a){return null==a?"":a+""})),b=ab.valHooks[this.type]||ab.valHooks[this.nodeName.toLowerCase()],b&&"set"in b&&void 0!==b.set(this,e,"value")||(this.value=e))});if(e)return b=ab.valHooks[e.type]||ab.valHooks[e.nodeName.toLowerCase()],b&&"get"in b&&void 0!==(c=b.get(e,"value"))?c:(c=e.value,"string"==typeof c?c.replace(ic,""):null==c?"":c)}}}),ab.extend({valHooks:{select:{get:function(a){for(var b,c,d=a.options,e=a.selectedIndex,f="select-one"===a.type||0>e,g=f?null:[],h=f?e+1:d.length,i=0>e?h:f?e:0;h>i;i++)if(c=d[i],!(!c.selected&&i!==e||(Z.optDisabled?c.disabled:null!==c.getAttribute("disabled"))||c.parentNode.disabled&&ab.nodeName(c.parentNode,"optgroup"))){if(b=ab(c).val(),f)return b;g.push(b)}return g},set:function(a,b){for(var c,d,e=a.options,f=ab.makeArray(b),g=e.length;g--;)d=e[g],(d.selected=ab.inArray(ab(d).val(),f)>=0)&&(c=!0);return c||(a.selectedIndex=-1),f}}}}),ab.each(["radio","checkbox"],function(){ab.valHooks[this]={set:function(a,b){return ab.isArray(b)?a.checked=ab.inArray(ab(a).val(),b)>=0:void 0}},Z.checkOn||(ab.valHooks[this].get=function(a){return null===a.getAttribute("value")?"on":a.value})}),ab.each("blur focus focusin focusout load resize scroll unload click dblclick mousedown mouseup mousemove mouseover mouseout mouseenter mouseleave change select submit keydown keypress keyup error contextmenu".split(" "),function(a,b){ab.fn[b]=function(a,c){return arguments.length>0?this.on(b,null,a,c):this.trigger(b)}}),ab.fn.extend({hover:function(a,b){return this.mouseenter(a).mouseleave(b||a)},bind:function(a,b,c){return this.on(a,null,b,c)},unbind:function(a,b){return this.off(a,null,b)},delegate:function(a,b,c,d){return this.on(b,a,c,d)},undelegate:function(a,b,c){return 1===arguments.length?this.off(a,"**"):this.off(b,a||"**",c)}});var jc=ab.now(),kc=/\?/;ab.parseJSON=function(a){return JSON.parse(a+"")},ab.parseXML=function(a){var b,c;if(!a||"string"!=typeof a)return null;try{c=new DOMParser,b=c.parseFromString(a,"text/xml")}catch(d){b=void 0}return(!b||b.getElementsByTagName("parsererror").length)&&ab.error("Invalid XML: "+a),b};var lc,mc,nc=/#.*$/,oc=/([?&])_=[^&]*/,pc=/^(.*?):[ \t]*([^\r\n]*)$/gm,qc=/^(?:about|app|app-storage|.+-extension|file|res|widget):$/,rc=/^(?:GET|HEAD)$/,sc=/^\/\//,tc=/^([\w.+-]+:)(?:\/\/(?:[^\/?#]*@|)([^\/?#:]*)(?::(\d+)|)|)/,uc={},vc={},wc="*/".concat("*");try{mc=location.href}catch(xc){mc=$.createElement("a"),mc.href="",mc=mc.href}lc=tc.exec(mc.toLowerCase())||[],ab.extend({active:0,lastModified:{},etag:{},ajaxSettings:{url:mc,type:"GET",isLocal:qc.test(lc[1]),global:!0,processData:!0,async:!0,contentType:"application/x-www-form-urlencoded; charset=UTF-8",accepts:{"*":wc,text:"text/plain",html:"text/html",xml:"application/xml, text/xml",json:"application/json, text/javascript"},contents:{xml:/xml/,html:/html/,json:/json/},responseFields:{xml:"responseXML",text:"responseText",json:"responseJSON"},converters:{"* text":String,"text html":!0,"text json":ab.parseJSON,"text xml":ab.parseXML},flatOptions:{url:!0,context:!0}},ajaxSetup:function(a,b){return b?L(L(a,ab.ajaxSettings),b):L(ab.ajaxSettings,a)},ajaxPrefilter:J(uc),ajaxTransport:J(vc),ajax:function(a,b){function c(a,b,c,g){var i,k,r,s,u,w=b;2!==t&&(t=2,h&&clearTimeout(h),d=void 0,f=g||"",v.readyState=a>0?4:0,i=a>=200&&300>a||304===a,c&&(s=M(l,v,c)),s=N(l,s,v,i),i?(l.ifModified&&(u=v.getResponseHeader("Last-Modified"),u&&(ab.lastModified[e]=u),u=v.getResponseHeader("etag"),u&&(ab.etag[e]=u)),204===a||"HEAD"===l.type?w="nocontent":304===a?w="notmodified":(w=s.state,k=s.data,r=s.error,i=!r)):(r=w,(a||!w)&&(w="error",0>a&&(a=0))),v.status=a,v.statusText=(b||w)+"",i?o.resolveWith(m,[k,w,v]):o.rejectWith(m,[v,w,r]),v.statusCode(q),q=void 0,j&&n.trigger(i?"ajaxSuccess":"ajaxError",[v,l,i?k:r]),p.fireWith(m,[v,w]),j&&(n.trigger("ajaxComplete",[v,l]),--ab.active||ab.event.trigger("ajaxStop")))}"object"==typeof a&&(b=a,a=void 0),b=b||{};var d,e,f,g,h,i,j,k,l=ab.ajaxSetup({},b),m=l.context||l,n=l.context&&(m.nodeType||m.jquery)?ab(m):ab.event,o=ab.Deferred(),p=ab.Callbacks("once memory"),q=l.statusCode||{},r={},s={},t=0,u="canceled",v={readyState:0,getResponseHeader:function(a){var b;if(2===t){if(!g)for(g={};b=pc.exec(f);)g[b[1].toLowerCase()]=b[2];b=g[a.toLowerCase()]}return null==b?null:b},getAllResponseHeaders:function(){return 2===t?f:null},setRequestHeader:function(a,b){var c=a.toLowerCase();return t||(a=s[c]=s[c]||a,r[a]=b),this},overrideMimeType:function(a){return t||(l.mimeType=a),this},statusCode:function(a){var b;if(a)if(2>t)for(b in a)q[b]=[q[b],a[b]];else v.always(a[v.status]);return this},abort:function(a){var b=a||u;return d&&d.abort(b),c(0,b),this}};if(o.promise(v).complete=p.add,v.success=v.done,v.error=v.fail,l.url=((a||l.url||mc)+"").replace(nc,"").replace(sc,lc[1]+"//"),l.type=b.method||b.type||l.method||l.type,l.dataTypes=ab.trim(l.dataType||"*").toLowerCase().match(nb)||[""],null==l.crossDomain&&(i=tc.exec(l.url.toLowerCase()),l.crossDomain=!(!i||i[1]===lc[1]&&i[2]===lc[2]&&(i[3]||("http:"===i[1]?"80":"443"))===(lc[3]||("http:"===lc[1]?"80":"443")))),l.data&&l.processData&&"string"!=typeof l.data&&(l.data=ab.param(l.data,l.traditional)),K(uc,l,b,v),2===t)return v;j=l.global,j&&0===ab.active++&&ab.event.trigger("ajaxStart"),l.type=l.type.toUpperCase(),l.hasContent=!rc.test(l.type),e=l.url,l.hasContent||(l.data&&(e=l.url+=(kc.test(e)?"&":"?")+l.data,delete l.data),l.cache===!1&&(l.url=oc.test(e)?e.replace(oc,"$1_="+jc++):e+(kc.test(e)?"&":"?")+"_="+jc++)),l.ifModified&&(ab.lastModified[e]&&v.setRequestHeader("If-Modified-Since",ab.lastModified[e]),ab.etag[e]&&v.setRequestHeader("If-None-Match",ab.etag[e])),(l.data&&l.hasContent&&l.contentType!==!1||b.contentType)&&v.setRequestHeader("Content-Type",l.contentType),v.setRequestHeader("Accept",l.dataTypes[0]&&l.accepts[l.dataTypes[0]]?l.accepts[l.dataTypes[0]]+("*"!==l.dataTypes[0]?", "+wc+"; q=0.01":""):l.accepts["*"]);for(k in l.headers)v.setRequestHeader(k,l.headers[k]);if(l.beforeSend&&(l.beforeSend.call(m,v,l)===!1||2===t))return v.abort();u="abort";for(k in{success:1,error:1,complete:1})v[k](l[k]);if(d=K(vc,l,b,v)){v.readyState=1,j&&n.trigger("ajaxSend",[v,l]),l.async&&l.timeout>0&&(h=setTimeout(function(){v.abort("timeout")},l.timeout));try{t=1,d.send(r,c)}catch(w){if(!(2>t))throw w;c(-1,w)}}else c(-1,"No Transport");return v},getJSON:function(a,b,c){return ab.get(a,b,c,"json")},getScript:function(a,b){return ab.get(a,void 0,b,"script")}}),ab.each(["get","post"],function(a,b){ab[b]=function(a,c,d,e){return ab.isFunction(c)&&(e=e||d,d=c,c=void 0),ab.ajax({url:a,type:b,dataType:e,data:c,success:d})}}),ab.each(["ajaxStart","ajaxStop","ajaxComplete","ajaxError","ajaxSuccess","ajaxSend"],function(a,b){ab.fn[b]=function(a){return this.on(b,a)}}),ab._evalUrl=function(a){return ab.ajax({url:a,type:"GET",dataType:"script",async:!1,global:!1,"throws":!0})},ab.fn.extend({wrapAll:function(a){var b;return ab.isFunction(a)?this.each(function(b){ab(this).wrapAll(a.call(this,b))}):(this[0]&&(b=ab(a,this[0].ownerDocument).eq(0).clone(!0),this[0].parentNode&&b.insertBefore(this[0]),b.map(function(){for(var a=this;a.firstElementChild;)a=a.firstElementChild;return a}).append(this)),this)},wrapInner:function(a){return this.each(ab.isFunction(a)?function(b){ab(this).wrapInner(a.call(this,b))}:function(){var b=ab(this),c=b.contents();c.length?c.wrapAll(a):b.append(a)})},wrap:function(a){var b=ab.isFunction(a);return this.each(function(c){ab(this).wrapAll(b?a.call(this,c):a)})},unwrap:function(){return this.parent().each(function(){ab.nodeName(this,"body")||ab(this).replaceWith(this.childNodes)}).end()}}),ab.expr.filters.hidden=function(a){return a.offsetWidth<=0&&a.offsetHeight<=0},ab.expr.filters.visible=function(a){return!ab.expr.filters.hidden(a)};var yc=/%20/g,zc=/\[\]$/,Ac=/\r?\n/g,Bc=/^(?:submit|button|image|reset|file)$/i,Cc=/^(?:input|select|textarea|keygen)/i;ab.param=function(a,b){var c,d=[],e=function(a,b){b=ab.isFunction(b)?b():null==b?"":b,d[d.length]=encodeURIComponent(a)+"="+encodeURIComponent(b)};if(void 0===b&&(b=ab.ajaxSettings&&ab.ajaxSettings.traditional),ab.isArray(a)||a.jquery&&!ab.isPlainObject(a))ab.each(a,function(){e(this.name,this.value)});else for(c in a)O(c,a[c],b,e);return d.join("&").replace(yc,"+")},ab.fn.extend({serialize:function(){return ab.param(this.serializeArray())},serializeArray:function(){return this.map(function(){var a=ab.prop(this,"elements");return a?ab.makeArray(a):this}).filter(function(){var a=this.type;return this.name&&!ab(this).is(":disabled")&&Cc.test(this.nodeName)&&!Bc.test(a)&&(this.checked||!yb.test(a))}).map(function(a,b){var c=ab(this).val();return null==c?null:ab.isArray(c)?ab.map(c,function(a){return{name:b.name,value:a.replace(Ac,"\r\n")}}):{name:b.name,value:c.replace(Ac,"\r\n")}}).get()}}),ab.ajaxSettings.xhr=function(){try{return new XMLHttpRequest}catch(a){}};var Dc=0,Ec={},Fc={0:200,1223:204},Gc=ab.ajaxSettings.xhr();a.ActiveXObject&&ab(a).on("unload",function(){for(var a in Ec)Ec[a]()}),Z.cors=!!Gc&&"withCredentials"in Gc,Z.ajax=Gc=!!Gc,ab.ajaxTransport(function(a){var b;return Z.cors||Gc&&!a.crossDomain?{send:function(c,d){var e,f=a.xhr(),g=++Dc;if(f.open(a.type,a.url,a.async,a.username,a.password),a.xhrFields)for(e in a.xhrFields)f[e]=a.xhrFields[e];a.mimeType&&f.overrideMimeType&&f.overrideMimeType(a.mimeType),a.crossDomain||c["X-Requested-With"]||(c["X-Requested-With"]="XMLHttpRequest");for(e in c)f.setRequestHeader(e,c[e]);b=function(a){return function(){b&&(delete Ec[g],b=f.onload=f.onerror=null,"abort"===a?f.abort():"error"===a?d(f.status,f.statusText):d(Fc[f.status]||f.status,f.statusText,"string"==typeof f.responseText?{text:f.responseText}:void 0,f.getAllResponseHeaders()))}},f.onload=b(),f.onerror=b("error"),b=Ec[g]=b("abort"),f.send(a.hasContent&&a.data||null)},abort:function(){b&&b()}}:void 0}),ab.ajaxSetup({accepts:{script:"text/javascript, application/javascript, application/ecmascript, application/x-ecmascript"},contents:{script:/(?:java|ecma)script/},converters:{"text script":function(a){return ab.globalEval(a),a}}}),ab.ajaxPrefilter("script",function(a){void 0===a.cache&&(a.cache=!1),a.crossDomain&&(a.type="GET")}),ab.ajaxTransport("script",function(a){if(a.crossDomain){var b,c;return{send:function(d,e){b=ab("<script>").prop({async:!0,charset:a.scriptCharset,src:a.url}).on("load error",c=function(a){b.remove(),c=null,a&&e("error"===a.type?404:200,a.type)}),$.head.appendChild(b[0])},abort:function(){c&&c()}}}});var Hc=[],Ic=/(=)\?(?=&|$)|\?\?/;ab.ajaxSetup({jsonp:"callback",jsonpCallback:function(){var a=Hc.pop()||ab.expando+"_"+jc++;return this[a]=!0,a}}),ab.ajaxPrefilter("json jsonp",function(b,c,d){var e,f,g,h=b.jsonp!==!1&&(Ic.test(b.url)?"url":"string"==typeof b.data&&!(b.contentType||"").indexOf("application/x-www-form-urlencoded")&&Ic.test(b.data)&&"data");return h||"jsonp"===b.dataTypes[0]?(e=b.jsonpCallback=ab.isFunction(b.jsonpCallback)?b.jsonpCallback():b.jsonpCallback,h?b[h]=b[h].replace(Ic,"$1"+e):b.jsonp!==!1&&(b.url+=(kc.test(b.url)?"&":"?")+b.jsonp+"="+e),b.converters["script json"]=function(){return g||ab.error(e+" was not called"),g[0]},b.dataTypes[0]="json",f=a[e],a[e]=function(){g=arguments},d.always(function(){a[e]=f,b[e]&&(b.jsonpCallback=c.jsonpCallback,Hc.push(e)),g&&ab.isFunction(f)&&f(g[0]),g=f=void 0}),"script"):void 0}),ab.parseHTML=function(a,b,c){if(!a||"string"!=typeof a)return null;"boolean"==typeof b&&(c=b,b=!1),b=b||$;var d=gb.exec(a),e=!c&&[];return d?[b.createElement(d[1])]:(d=ab.buildFragment([a],b,e),e&&e.length&&ab(e).remove(),ab.merge([],d.childNodes))};var Jc=ab.fn.load;ab.fn.load=function(a,b,c){if("string"!=typeof a&&Jc)return Jc.apply(this,arguments);var d,e,f,g=this,h=a.indexOf(" ");return h>=0&&(d=a.slice(h),a=a.slice(0,h)),ab.isFunction(b)?(c=b,b=void 0):b&&"object"==typeof b&&(e="POST"),g.length>0&&ab.ajax({url:a,type:e,dataType:"html",data:b}).done(function(a){f=arguments,g.html(d?ab("<div>").append(ab.parseHTML(a)).find(d):a)}).complete(c&&function(a,b){g.each(c,f||[a.responseText,b,a])}),this},ab.expr.filters.animated=function(a){return ab.grep(ab.timers,function(b){return a===b.elem}).length};var Kc=a.document.documentElement;ab.offset={setOffset:function(a,b,c){var d,e,f,g,h,i,j,k=ab.css(a,"position"),l=ab(a),m={};"static"===k&&(a.style.position="relative"),h=l.offset(),f=ab.css(a,"top"),i=ab.css(a,"left"),j=("absolute"===k||"fixed"===k)&&(f+i).indexOf("auto")>-1,j?(d=l.position(),g=d.top,e=d.left):(g=parseFloat(f)||0,e=parseFloat(i)||0),ab.isFunction(b)&&(b=b.call(a,c,h)),null!=b.top&&(m.top=b.top-h.top+g),null!=b.left&&(m.left=b.left-h.left+e),"using"in b?b.using.call(a,m):l.css(m)}},ab.fn.extend({offset:function(a){if(arguments.length)return void 0===a?this:this.each(function(b){ab.offset.setOffset(this,a,b)});var b,c,d=this[0],e={top:0,left:0},f=d&&d.ownerDocument;if(f)return b=f.documentElement,ab.contains(b,d)?(typeof d.getBoundingClientRect!==zb&&(e=d.getBoundingClientRect()),c=P(f),{top:e.top+c.pageYOffset-b.clientTop,left:e.left+c.pageXOffset-b.clientLeft}):e},position:function(){if(this[0]){var a,b,c=this[0],d={top:0,left:0};return"fixed"===ab.css(c,"position")?b=c.getBoundingClientRect():(a=this.offsetParent(),b=this.offset(),ab.nodeName(a[0],"html")||(d=a.offset()),d.top+=ab.css(a[0],"borderTopWidth",!0),d.left+=ab.css(a[0],"borderLeftWidth",!0)),{top:b.top-d.top-ab.css(c,"marginTop",!0),left:b.left-d.left-ab.css(c,"marginLeft",!0)}}},offsetParent:function(){return this.map(function(){for(var a=this.offsetParent||Kc;a&&!ab.nodeName(a,"html")&&"static"===ab.css(a,"position");)a=a.offsetParent;return a||Kc})}}),ab.each({scrollLeft:"pageXOffset",scrollTop:"pageYOffset"},function(b,c){var d="pageYOffset"===c;ab.fn[b]=function(e){return qb(this,function(b,e,f){var g=P(b);return void 0===f?g?g[c]:b[e]:void(g?g.scrollTo(d?a.pageXOffset:f,d?f:a.pageYOffset):b[e]=f)},b,e,arguments.length,null)}}),ab.each(["top","left"],function(a,b){ab.cssHooks[b]=w(Z.pixelPosition,function(a,c){return c?(c=v(a,b),Qb.test(c)?ab(a).position()[b]+"px":c):void 0})}),ab.each({Height:"height",Width:"width"},function(a,b){ab.each({padding:"inner"+a,content:b,"":"outer"+a},function(c,d){ab.fn[d]=function(d,e){var f=arguments.length&&(c||"boolean"!=typeof d),g=c||(d===!0||e===!0?"margin":"border");return qb(this,function(b,c,d){var e;return ab.isWindow(b)?b.document.documentElement["client"+a]:9===b.nodeType?(e=b.documentElement,Math.max(b.body["scroll"+a],e["scroll"+a],b.body["offset"+a],e["offset"+a],e["client"+a])):void 0===d?ab.css(b,c,g):ab.style(b,c,d,g)},b,f?d:void 0,f,null)}})}),ab.fn.size=function(){return this.length},ab.fn.andSelf=ab.fn.addBack,"function"==typeof define&&define.amd&&define("jquery",[],function(){return ab});var Lc=a.jQuery,Mc=a.$;return ab.noConflict=function(b){return a.$===ab&&(a.$=Mc),b&&a.jQuery===ab&&(a.jQuery=Lc),ab},typeof b===zb&&(a.jQuery=a.$=ab),ab}),FastClick.prototype.deviceIsAndroid=navigator.userAgent.indexOf("Android")>0,FastClick.prototype.deviceIsIOS=/iP(ad|hone|od)/.test(navigator.userAgent),FastClick.prototype.deviceIsIOS4=FastClick.prototype.deviceIsIOS&&/OS 4_\d(_\d)?/.test(navigator.userAgent),FastClick.prototype.deviceIsIOSWithBadTarget=FastClick.prototype.deviceIsIOS&&/OS ([6-9]|\d{2})_\d/.test(navigator.userAgent),FastClick.prototype.needsClick=function(a){"use strict";switch(a.nodeName.toLowerCase()){case"button":case"select":case"textarea":if(a.disabled)return!0;break;case"input":if(this.deviceIsIOS&&"file"===a.type||a.disabled)return!0;break;case"label":case"video":return!0}return/\bneedsclick\b/.test(a.className)},FastClick.prototype.needsFocus=function(a){"use strict";switch(a.nodeName.toLowerCase()){case"textarea":return!0;case"select":return!this.deviceIsAndroid;case"input":switch(a.type){case"button":case"checkbox":case"file":case"image":case"radio":case"submit":return!1}return!a.disabled&&!a.readOnly;default:return/\bneedsfocus\b/.test(a.className)}},FastClick.prototype.sendClick=function(a,b){"use strict";var c,d;document.activeElement&&document.activeElement!==a&&document.activeElement.blur(),d=b.changedTouches[0],c=document.createEvent("MouseEvents"),c.initMouseEvent(this.determineEventType(a),!0,!0,window,1,d.screenX,d.screenY,d.clientX,d.clientY,!1,!1,!1,!1,0,null),c.forwardedTouchEvent=!0,a.dispatchEvent(c)},FastClick.prototype.determineEventType=function(a){"use strict";return this.deviceIsAndroid&&"select"===a.tagName.toLowerCase()?"mousedown":"click"},FastClick.prototype.focus=function(a){"use strict";var b;this.deviceIsIOS&&a.setSelectionRange&&0!==a.type.indexOf("date")&&"time"!==a.type?(b=a.value.length,a.setSelectionRange(b,b)):a.focus()},FastClick.prototype.updateScrollParent=function(a){"use strict";var b,c;if(b=a.fastClickScrollParent,!b||!b.contains(a)){c=a;do{if(c.scrollHeight>c.offsetHeight){b=c,a.fastClickScrollParent=c;break}c=c.parentElement}while(c)}b&&(b.fastClickLastScrollTop=b.scrollTop)},FastClick.prototype.getTargetElementFromEventTarget=function(a){"use strict";return a.nodeType===Node.TEXT_NODE?a.parentNode:a},FastClick.prototype.onTouchStart=function(a){"use strict";var b,c,d;if(a.targetTouches.length>1)return!0;if(b=this.getTargetElementFromEventTarget(a.target),c=a.targetTouches[0],this.deviceIsIOS){if(d=window.getSelection(),d.rangeCount&&!d.isCollapsed)return!0;if(!this.deviceIsIOS4){if(c.identifier===this.lastTouchIdentifier)return a.preventDefault(),!1;this.lastTouchIdentifier=c.identifier,this.updateScrollParent(b)}}return this.trackingClick=!0,this.trackingClickStart=a.timeStamp,this.targetElement=b,this.touchStartX=c.pageX,this.touchStartY=c.pageY,a.timeStamp-this.lastClickTime<200&&a.preventDefault(),!0},FastClick.prototype.touchHasMoved=function(a){"use strict";var b=a.changedTouches[0],c=this.touchBoundary;return Math.abs(b.pageX-this.touchStartX)>c||Math.abs(b.pageY-this.touchStartY)>c?!0:!1},FastClick.prototype.onTouchMove=function(a){"use strict";return this.trackingClick?((this.targetElement!==this.getTargetElementFromEventTarget(a.target)||this.touchHasMoved(a))&&(this.trackingClick=!1,this.targetElement=null),!0):!0},FastClick.prototype.findControl=function(a){"use strict";return void 0!==a.control?a.control:a.htmlFor?document.getElementById(a.htmlFor):a.querySelector("button, input:not([type=hidden]), keygen, meter, output, progress, select, textarea")},FastClick.prototype.onTouchEnd=function(a){"use strict";var b,c,d,e,f,g=this.targetElement;if(!this.trackingClick)return!0;if(a.timeStamp-this.lastClickTime<200)return this.cancelNextClick=!0,!0;if(this.cancelNextClick=!1,this.lastClickTime=a.timeStamp,c=this.trackingClickStart,this.trackingClick=!1,this.trackingClickStart=0,this.deviceIsIOSWithBadTarget&&(f=a.changedTouches[0],g=document.elementFromPoint(f.pageX-window.pageXOffset,f.pageY-window.pageYOffset)||g,g.fastClickScrollParent=this.targetElement.fastClickScrollParent),d=g.tagName.toLowerCase(),"label"===d){if(b=this.findControl(g)){if(this.focus(g),this.deviceIsAndroid)return!1;g=b}}else if(this.needsFocus(g))return a.timeStamp-c>100||this.deviceIsIOS&&window.top!==window&&"input"===d?(this.targetElement=null,!1):(this.focus(g),this.deviceIsIOS4&&"select"===d||(this.targetElement=null,a.preventDefault()),!1);return this.deviceIsIOS&&!this.deviceIsIOS4&&(e=g.fastClickScrollParent,e&&e.fastClickLastScrollTop!==e.scrollTop)?!0:(this.needsClick(g)||(a.preventDefault(),this.sendClick(g,a)),!1)},FastClick.prototype.onTouchCancel=function(){"use strict";this.trackingClick=!1,this.targetElement=null},FastClick.prototype.onMouse=function(a){"use strict";return this.targetElement?a.forwardedTouchEvent?!0:a.cancelable?!this.needsClick(this.targetElement)||this.cancelNextClick?(a.stopImmediatePropagation?a.stopImmediatePropagation():a.propagationStopped=!0,a.stopPropagation(),a.preventDefault(),!1):!0:!0:!0},FastClick.prototype.onClick=function(a){"use strict";var b;return this.trackingClick?(this.targetElement=null,this.trackingClick=!1,!0):"submit"===a.target.type&&0===a.detail?!0:(b=this.onMouse(a),b||(this.targetElement=null),b)},FastClick.prototype.destroy=function(){"use strict";var a=this.layer;this.deviceIsAndroid&&(a.removeEventListener("mouseover",this.onMouse,!0),a.removeEventListener("mousedown",this.onMouse,!0),a.removeEventListener("mouseup",this.onMouse,!0)),a.removeEventListener("click",this.onClick,!0),a.removeEventListener("touchstart",this.onTouchStart,!1),a.removeEventListener("touchmove",this.onTouchMove,!1),a.removeEventListener("touchend",this.onTouchEnd,!1),a.removeEventListener("touchcancel",this.onTouchCancel,!1)},FastClick.notNeeded=function(a){"use strict";var b,c;if("undefined"==typeof window.ontouchstart)return!0;if(c=+(/Chrome\/([0-9]+)/.exec(navigator.userAgent)||[,0])[1]){if(!FastClick.prototype.deviceIsAndroid)return!0;if(b=document.querySelector("meta[name=viewport]")){if(-1!==b.content.indexOf("user-scalable=no"))return!0;if(c>31&&window.innerWidth<=window.screen.width)return!0}}return"none"===a.style.msTouchAction?!0:!1},FastClick.attach=function(a){"use strict";return new FastClick(a)},"undefined"!=typeof define&&define.amd?define(function(){"use strict";return FastClick}):"undefined"!=typeof module&&module.exports?(module.exports=FastClick.attach,module.exports.FastClick=FastClick):window.FastClick=FastClick,function(a){function b(){return{empty:!1,unusedTokens:[],unusedInput:[],overflow:-2,charsLeftOver:0,nullInput:!1,invalidMonth:null,invalidFormat:!1,userInvalidated:!1,iso:!1}}function c(a,b){return function(c){return k(a.call(this,c),b)}}function d(a,b){return function(c){return this.lang().ordinal(a.call(this,c),b)}}function e(){}function f(a){w(a),h(this,a)}function g(a){var b=q(a),c=b.year||0,d=b.month||0,e=b.week||0,f=b.day||0,g=b.hour||0,h=b.minute||0,i=b.second||0,j=b.millisecond||0;this._milliseconds=+j+1e3*i+6e4*h+36e5*g,this._days=+f+7*e,this._months=+d+12*c,this._data={},this._bubble()}function h(a,b){for(var c in b)b.hasOwnProperty(c)&&(a[c]=b[c]);return b.hasOwnProperty("toString")&&(a.toString=b.toString),b.hasOwnProperty("valueOf")&&(a.valueOf=b.valueOf),a}function i(a){var b,c={};for(b in a)a.hasOwnProperty(b)&&qb.hasOwnProperty(b)&&(c[b]=a[b]);return c}function j(a){return 0>a?Math.ceil(a):Math.floor(a)}function k(a,b,c){for(var d=""+Math.abs(a),e=a>=0;d.length<b;)d="0"+d;return(e?c?"+":"":"-")+d}function l(a,b,c,d){var e,f,g=b._milliseconds,h=b._days,i=b._months;g&&a._d.setTime(+a._d+g*c),(h||i)&&(e=a.minute(),f=a.hour()),h&&a.date(a.date()+h*c),i&&a.month(a.month()+i*c),g&&!d&&db.updateOffset(a),(h||i)&&(a.minute(e),a.hour(f))}function m(a){return"[object Array]"===Object.prototype.toString.call(a)}function n(a){return"[object Date]"===Object.prototype.toString.call(a)||a instanceof Date}function o(a,b,c){var d,e=Math.min(a.length,b.length),f=Math.abs(a.length-b.length),g=0;for(d=0;e>d;d++)(c&&a[d]!==b[d]||!c&&s(a[d])!==s(b[d]))&&g++;return g+f}function p(a){if(a){var b=a.toLowerCase().replace(/(.)s$/,"$1");a=Tb[a]||Ub[b]||b}return a}function q(a){var b,c,d={};for(c in a)a.hasOwnProperty(c)&&(b=p(c),b&&(d[b]=a[c]));return d}function r(b){var c,d;if(0===b.indexOf("week"))c=7,d="day";else{if(0!==b.indexOf("month"))return;c=12,d="month"}db[b]=function(e,f){var g,h,i=db.fn._lang[b],j=[];if("number"==typeof e&&(f=e,e=a),h=function(a){var b=db().utc().set(d,a);return i.call(db.fn._lang,b,e||"")},null!=f)return h(f);for(g=0;c>g;g++)j.push(h(g));return j}}function s(a){var b=+a,c=0;return 0!==b&&isFinite(b)&&(c=b>=0?Math.floor(b):Math.ceil(b)),c}function t(a,b){return new Date(Date.UTC(a,b+1,0)).getUTCDate()}function u(a){return v(a)?366:365}function v(a){return a%4===0&&a%100!==0||a%400===0}function w(a){var b;a._a&&-2===a._pf.overflow&&(b=a._a[jb]<0||a._a[jb]>11?jb:a._a[kb]<1||a._a[kb]>t(a._a[ib],a._a[jb])?kb:a._a[lb]<0||a._a[lb]>23?lb:a._a[mb]<0||a._a[mb]>59?mb:a._a[nb]<0||a._a[nb]>59?nb:a._a[ob]<0||a._a[ob]>999?ob:-1,a._pf._overflowDayOfYear&&(ib>b||b>kb)&&(b=kb),a._pf.overflow=b)}function x(a){return null==a._isValid&&(a._isValid=!isNaN(a._d.getTime())&&a._pf.overflow<0&&!a._pf.empty&&!a._pf.invalidMonth&&!a._pf.nullInput&&!a._pf.invalidFormat&&!a._pf.userInvalidated,a._strict&&(a._isValid=a._isValid&&0===a._pf.charsLeftOver&&0===a._pf.unusedTokens.length)),a._isValid}function y(a){return a?a.toLowerCase().replace("_","-"):a}function z(a,b){return b._isUTC?db(a).zone(b._offset||0):db(a).local()}function A(a,b){return b.abbr=a,pb[a]||(pb[a]=new e),pb[a].set(b),pb[a]}function B(a){delete pb[a]}function C(a){var b,c,d,e,f=0,g=function(a){if(!pb[a]&&rb)try{require("./lang/"+a)}catch(b){}return pb[a]};if(!a)return db.fn._lang;if(!m(a)){if(c=g(a))return c;a=[a]}for(;f<a.length;){for(e=y(a[f]).split("-"),b=e.length,d=y(a[f+1]),d=d?d.split("-"):null;b>0;){if(c=g(e.slice(0,b).join("-")))return c;if(d&&d.length>=b&&o(e,d,!0)>=b-1)break;b--}f++}return db.fn._lang}function D(a){return a.match(/\[[\s\S]/)?a.replace(/^\[|\]$/g,""):a.replace(/\\/g,"")}function E(a){var b,c,d=a.match(vb);for(b=0,c=d.length;c>b;b++)d[b]=Yb[d[b]]?Yb[d[b]]:D(d[b]);return function(e){var f="";for(b=0;c>b;b++)f+=d[b]instanceof Function?d[b].call(e,a):d[b];return f}}function F(a,b){return a.isValid()?(b=G(b,a.lang()),Vb[b]||(Vb[b]=E(b)),Vb[b](a)):a.lang().invalidDate()}function G(a,b){function c(a){return b.longDateFormat(a)||a
}var d=5;for(wb.lastIndex=0;d>=0&&wb.test(a);)a=a.replace(wb,c),wb.lastIndex=0,d-=1;return a}function H(a,b){var c,d=b._strict;switch(a){case"DDDD":return Ib;case"YYYY":case"GGGG":case"gggg":return d?Jb:zb;case"Y":case"G":case"g":return Lb;case"YYYYYY":case"YYYYY":case"GGGGG":case"ggggg":return d?Kb:Ab;case"S":if(d)return Gb;case"SS":if(d)return Hb;case"SSS":if(d)return Ib;case"DDD":return yb;case"MMM":case"MMMM":case"dd":case"ddd":case"dddd":return Cb;case"a":case"A":return C(b._l)._meridiemParse;case"X":return Fb;case"Z":case"ZZ":return Db;case"T":return Eb;case"SSSS":return Bb;case"MM":case"DD":case"YY":case"GG":case"gg":case"HH":case"hh":case"mm":case"ss":case"ww":case"WW":return d?Hb:xb;case"M":case"D":case"d":case"H":case"h":case"m":case"s":case"w":case"W":case"e":case"E":return xb;default:return c=new RegExp(P(O(a.replace("\\","")),"i"))}}function I(a){a=a||"";var b=a.match(Db)||[],c=b[b.length-1]||[],d=(c+"").match(Qb)||["-",0,0],e=+(60*d[1])+s(d[2]);return"+"===d[0]?-e:e}function J(a,b,c){var d,e=c._a;switch(a){case"M":case"MM":null!=b&&(e[jb]=s(b)-1);break;case"MMM":case"MMMM":d=C(c._l).monthsParse(b),null!=d?e[jb]=d:c._pf.invalidMonth=b;break;case"D":case"DD":null!=b&&(e[kb]=s(b));break;case"DDD":case"DDDD":null!=b&&(c._dayOfYear=s(b));break;case"YY":e[ib]=s(b)+(s(b)>68?1900:2e3);break;case"YYYY":case"YYYYY":case"YYYYYY":e[ib]=s(b);break;case"a":case"A":c._isPm=C(c._l).isPM(b);break;case"H":case"HH":case"h":case"hh":e[lb]=s(b);break;case"m":case"mm":e[mb]=s(b);break;case"s":case"ss":e[nb]=s(b);break;case"S":case"SS":case"SSS":case"SSSS":e[ob]=s(1e3*("0."+b));break;case"X":c._d=new Date(1e3*parseFloat(b));break;case"Z":case"ZZ":c._useUTC=!0,c._tzm=I(b);break;case"w":case"ww":case"W":case"WW":case"d":case"dd":case"ddd":case"dddd":case"e":case"E":a=a.substr(0,1);case"gg":case"gggg":case"GG":case"GGGG":case"GGGGG":a=a.substr(0,2),b&&(c._w=c._w||{},c._w[a]=b)}}function K(a){var b,c,d,e,f,g,h,i,j,k,l=[];if(!a._d){for(d=M(a),a._w&&null==a._a[kb]&&null==a._a[jb]&&(f=function(b){var c=parseInt(b,10);return b?b.length<3?c>68?1900+c:2e3+c:c:null==a._a[ib]?db().weekYear():a._a[ib]},g=a._w,null!=g.GG||null!=g.W||null!=g.E?h=Z(f(g.GG),g.W||1,g.E,4,1):(i=C(a._l),j=null!=g.d?V(g.d,i):null!=g.e?parseInt(g.e,10)+i._week.dow:0,k=parseInt(g.w,10)||1,null!=g.d&&j<i._week.dow&&k++,h=Z(f(g.gg),k,j,i._week.doy,i._week.dow)),a._a[ib]=h.year,a._dayOfYear=h.dayOfYear),a._dayOfYear&&(e=null==a._a[ib]?d[ib]:a._a[ib],a._dayOfYear>u(e)&&(a._pf._overflowDayOfYear=!0),c=U(e,0,a._dayOfYear),a._a[jb]=c.getUTCMonth(),a._a[kb]=c.getUTCDate()),b=0;3>b&&null==a._a[b];++b)a._a[b]=l[b]=d[b];for(;7>b;b++)a._a[b]=l[b]=null==a._a[b]?2===b?1:0:a._a[b];l[lb]+=s((a._tzm||0)/60),l[mb]+=s((a._tzm||0)%60),a._d=(a._useUTC?U:T).apply(null,l)}}function L(a){var b;a._d||(b=q(a._i),a._a=[b.year,b.month,b.day,b.hour,b.minute,b.second,b.millisecond],K(a))}function M(a){var b=new Date;return a._useUTC?[b.getUTCFullYear(),b.getUTCMonth(),b.getUTCDate()]:[b.getFullYear(),b.getMonth(),b.getDate()]}function N(a){a._a=[],a._pf.empty=!0;var b,c,d,e,f,g=C(a._l),h=""+a._i,i=h.length,j=0;for(d=G(a._f,g).match(vb)||[],b=0;b<d.length;b++)e=d[b],c=(h.match(H(e,a))||[])[0],c&&(f=h.substr(0,h.indexOf(c)),f.length>0&&a._pf.unusedInput.push(f),h=h.slice(h.indexOf(c)+c.length),j+=c.length),Yb[e]?(c?a._pf.empty=!1:a._pf.unusedTokens.push(e),J(e,c,a)):a._strict&&!c&&a._pf.unusedTokens.push(e);a._pf.charsLeftOver=i-j,h.length>0&&a._pf.unusedInput.push(h),a._isPm&&a._a[lb]<12&&(a._a[lb]+=12),a._isPm===!1&&12===a._a[lb]&&(a._a[lb]=0),K(a),w(a)}function O(a){return a.replace(/\\(\[)|\\(\])|\[([^\]\[]*)\]|\\(.)/g,function(a,b,c,d,e){return b||c||d||e})}function P(a){return a.replace(/[-\/\\^$*+?.()|[\]{}]/g,"\\$&")}function Q(a){var c,d,e,f,g;if(0===a._f.length)return a._pf.invalidFormat=!0,void(a._d=new Date(0/0));for(f=0;f<a._f.length;f++)g=0,c=h({},a),c._pf=b(),c._f=a._f[f],N(c),x(c)&&(g+=c._pf.charsLeftOver,g+=10*c._pf.unusedTokens.length,c._pf.score=g,(null==e||e>g)&&(e=g,d=c));h(a,d||c)}function R(a){var b,c,d=a._i,e=Mb.exec(d);if(e){for(a._pf.iso=!0,b=0,c=Ob.length;c>b;b++)if(Ob[b][1].exec(d)){a._f=Ob[b][0]+(e[6]||" ");break}for(b=0,c=Pb.length;c>b;b++)if(Pb[b][1].exec(d)){a._f+=Pb[b][0];break}d.match(Db)&&(a._f+="Z"),N(a)}else a._d=new Date(d)}function S(b){var c=b._i,d=sb.exec(c);c===a?b._d=new Date:d?b._d=new Date(+d[1]):"string"==typeof c?R(b):m(c)?(b._a=c.slice(0),K(b)):n(c)?b._d=new Date(+c):"object"==typeof c?L(b):b._d=new Date(c)}function T(a,b,c,d,e,f,g){var h=new Date(a,b,c,d,e,f,g);return 1970>a&&h.setFullYear(a),h}function U(a){var b=new Date(Date.UTC.apply(null,arguments));return 1970>a&&b.setUTCFullYear(a),b}function V(a,b){if("string"==typeof a)if(isNaN(a)){if(a=b.weekdaysParse(a),"number"!=typeof a)return null}else a=parseInt(a,10);return a}function W(a,b,c,d,e){return e.relativeTime(b||1,!!c,a,d)}function X(a,b,c){var d=hb(Math.abs(a)/1e3),e=hb(d/60),f=hb(e/60),g=hb(f/24),h=hb(g/365),i=45>d&&["s",d]||1===e&&["m"]||45>e&&["mm",e]||1===f&&["h"]||22>f&&["hh",f]||1===g&&["d"]||25>=g&&["dd",g]||45>=g&&["M"]||345>g&&["MM",hb(g/30)]||1===h&&["y"]||["yy",h];return i[2]=b,i[3]=a>0,i[4]=c,W.apply({},i)}function Y(a,b,c){var d,e=c-b,f=c-a.day();return f>e&&(f-=7),e-7>f&&(f+=7),d=db(a).add("d",f),{week:Math.ceil(d.dayOfYear()/7),year:d.year()}}function Z(a,b,c,d,e){var f,g,h=U(a,0,1).getUTCDay();return c=null!=c?c:e,f=e-h+(h>d?7:0)-(e>h?7:0),g=7*(b-1)+(c-e)+f+1,{year:g>0?a:a-1,dayOfYear:g>0?g:u(a-1)+g}}function $(a){var b=a._i,c=a._f;return null===b?db.invalid({nullInput:!0}):("string"==typeof b&&(a._i=b=C().preparse(b)),db.isMoment(b)?(a=i(b),a._d=new Date(+b._d)):c?m(c)?Q(a):N(a):S(a),new f(a))}function _(a,b){db.fn[a]=db.fn[a+"s"]=function(a){var c=this._isUTC?"UTC":"";return null!=a?(this._d["set"+c+b](a),db.updateOffset(this),this):this._d["get"+c+b]()}}function ab(a){db.duration.fn[a]=function(){return this._data[a]}}function bb(a,b){db.duration.fn["as"+a]=function(){return+this/b}}function cb(a){var b=!1,c=db;"undefined"==typeof ender&&(a?(gb.moment=function(){return!b&&console&&console.warn&&(b=!0,console.warn("Accessing Moment through the global scope is deprecated, and will be removed in an upcoming release.")),c.apply(null,arguments)},h(gb.moment,c)):gb.moment=db)}for(var db,eb,fb="2.5.1",gb=this,hb=Math.round,ib=0,jb=1,kb=2,lb=3,mb=4,nb=5,ob=6,pb={},qb={_isAMomentObject:null,_i:null,_f:null,_l:null,_strict:null,_isUTC:null,_offset:null,_pf:null,_lang:null},rb="undefined"!=typeof module&&module.exports&&"undefined"!=typeof require,sb=/^\/?Date\((\-?\d+)/i,tb=/(\-)?(?:(\d*)\.)?(\d+)\:(\d+)(?:\:(\d+)\.?(\d{3})?)?/,ub=/^(-)?P(?:(?:([0-9,.]*)Y)?(?:([0-9,.]*)M)?(?:([0-9,.]*)D)?(?:T(?:([0-9,.]*)H)?(?:([0-9,.]*)M)?(?:([0-9,.]*)S)?)?|([0-9,.]*)W)$/,vb=/(\[[^\[]*\])|(\\)?(Mo|MM?M?M?|Do|DDDo|DD?D?D?|ddd?d?|do?|w[o|w]?|W[o|W]?|YYYYYY|YYYYY|YYYY|YY|gg(ggg?)?|GG(GGG?)?|e|E|a|A|hh?|HH?|mm?|ss?|S{1,4}|X|zz?|ZZ?|.)/g,wb=/(\[[^\[]*\])|(\\)?(LT|LL?L?L?|l{1,4})/g,xb=/\d\d?/,yb=/\d{1,3}/,zb=/\d{1,4}/,Ab=/[+\-]?\d{1,6}/,Bb=/\d+/,Cb=/[0-9]*['a-z\u00A0-\u05FF\u0700-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF]+|[\u0600-\u06FF\/]+(\s*?[\u0600-\u06FF]+){1,2}/i,Db=/Z|[\+\-]\d\d:?\d\d/gi,Eb=/T/i,Fb=/[\+\-]?\d+(\.\d{1,3})?/,Gb=/\d/,Hb=/\d\d/,Ib=/\d{3}/,Jb=/\d{4}/,Kb=/[+-]?\d{6}/,Lb=/[+-]?\d+/,Mb=/^\s*(?:[+-]\d{6}|\d{4})-(?:(\d\d-\d\d)|(W\d\d$)|(W\d\d-\d)|(\d\d\d))((T| )(\d\d(:\d\d(:\d\d(\.\d+)?)?)?)?([\+\-]\d\d(?::?\d\d)?|\s*Z)?)?$/,Nb="YYYY-MM-DDTHH:mm:ssZ",Ob=[["YYYYYY-MM-DD",/[+-]\d{6}-\d{2}-\d{2}/],["YYYY-MM-DD",/\d{4}-\d{2}-\d{2}/],["GGGG-[W]WW-E",/\d{4}-W\d{2}-\d/],["GGGG-[W]WW",/\d{4}-W\d{2}/],["YYYY-DDD",/\d{4}-\d{3}/]],Pb=[["HH:mm:ss.SSSS",/(T| )\d\d:\d\d:\d\d\.\d{1,3}/],["HH:mm:ss",/(T| )\d\d:\d\d:\d\d/],["HH:mm",/(T| )\d\d:\d\d/],["HH",/(T| )\d\d/]],Qb=/([\+\-]|\d\d)/gi,Rb="Date|Hours|Minutes|Seconds|Milliseconds".split("|"),Sb={Milliseconds:1,Seconds:1e3,Minutes:6e4,Hours:36e5,Days:864e5,Months:2592e6,Years:31536e6},Tb={ms:"millisecond",s:"second",m:"minute",h:"hour",d:"day",D:"date",w:"week",W:"isoWeek",M:"month",y:"year",DDD:"dayOfYear",e:"weekday",E:"isoWeekday",gg:"weekYear",GG:"isoWeekYear"},Ub={dayofyear:"dayOfYear",isoweekday:"isoWeekday",isoweek:"isoWeek",weekyear:"weekYear",isoweekyear:"isoWeekYear"},Vb={},Wb="DDD w W M D d".split(" "),Xb="M D H h m s w W".split(" "),Yb={M:function(){return this.month()+1},MMM:function(a){return this.lang().monthsShort(this,a)},MMMM:function(a){return this.lang().months(this,a)},D:function(){return this.date()},DDD:function(){return this.dayOfYear()},d:function(){return this.day()},dd:function(a){return this.lang().weekdaysMin(this,a)},ddd:function(a){return this.lang().weekdaysShort(this,a)},dddd:function(a){return this.lang().weekdays(this,a)},w:function(){return this.week()},W:function(){return this.isoWeek()},YY:function(){return k(this.year()%100,2)},YYYY:function(){return k(this.year(),4)},YYYYY:function(){return k(this.year(),5)},YYYYYY:function(){var a=this.year(),b=a>=0?"+":"-";return b+k(Math.abs(a),6)},gg:function(){return k(this.weekYear()%100,2)},gggg:function(){return k(this.weekYear(),4)},ggggg:function(){return k(this.weekYear(),5)},GG:function(){return k(this.isoWeekYear()%100,2)},GGGG:function(){return k(this.isoWeekYear(),4)},GGGGG:function(){return k(this.isoWeekYear(),5)},e:function(){return this.weekday()},E:function(){return this.isoWeekday()},a:function(){return this.lang().meridiem(this.hours(),this.minutes(),!0)},A:function(){return this.lang().meridiem(this.hours(),this.minutes(),!1)},H:function(){return this.hours()},h:function(){return this.hours()%12||12},m:function(){return this.minutes()},s:function(){return this.seconds()},S:function(){return s(this.milliseconds()/100)},SS:function(){return k(s(this.milliseconds()/10),2)},SSS:function(){return k(this.milliseconds(),3)},SSSS:function(){return k(this.milliseconds(),3)},Z:function(){var a=-this.zone(),b="+";return 0>a&&(a=-a,b="-"),b+k(s(a/60),2)+":"+k(s(a)%60,2)},ZZ:function(){var a=-this.zone(),b="+";return 0>a&&(a=-a,b="-"),b+k(s(a/60),2)+k(s(a)%60,2)},z:function(){return this.zoneAbbr()},zz:function(){return this.zoneName()},X:function(){return this.unix()},Q:function(){return this.quarter()}},Zb=["months","monthsShort","weekdays","weekdaysShort","weekdaysMin"];Wb.length;)eb=Wb.pop(),Yb[eb+"o"]=d(Yb[eb],eb);for(;Xb.length;)eb=Xb.pop(),Yb[eb+eb]=c(Yb[eb],2);for(Yb.DDDD=c(Yb.DDD,3),h(e.prototype,{set:function(a){var b,c;for(c in a)b=a[c],"function"==typeof b?this[c]=b:this["_"+c]=b},_months:"January_February_March_April_May_June_July_August_September_October_November_December".split("_"),months:function(a){return this._months[a.month()]},_monthsShort:"Jan_Feb_Mar_Apr_May_Jun_Jul_Aug_Sep_Oct_Nov_Dec".split("_"),monthsShort:function(a){return this._monthsShort[a.month()]},monthsParse:function(a){var b,c,d;for(this._monthsParse||(this._monthsParse=[]),b=0;12>b;b++)if(this._monthsParse[b]||(c=db.utc([2e3,b]),d="^"+this.months(c,"")+"|^"+this.monthsShort(c,""),this._monthsParse[b]=new RegExp(d.replace(".",""),"i")),this._monthsParse[b].test(a))return b},_weekdays:"Sunday_Monday_Tuesday_Wednesday_Thursday_Friday_Saturday".split("_"),weekdays:function(a){return this._weekdays[a.day()]},_weekdaysShort:"Sun_Mon_Tue_Wed_Thu_Fri_Sat".split("_"),weekdaysShort:function(a){return this._weekdaysShort[a.day()]},_weekdaysMin:"Su_Mo_Tu_We_Th_Fr_Sa".split("_"),weekdaysMin:function(a){return this._weekdaysMin[a.day()]},weekdaysParse:function(a){var b,c,d;for(this._weekdaysParse||(this._weekdaysParse=[]),b=0;7>b;b++)if(this._weekdaysParse[b]||(c=db([2e3,1]).day(b),d="^"+this.weekdays(c,"")+"|^"+this.weekdaysShort(c,"")+"|^"+this.weekdaysMin(c,""),this._weekdaysParse[b]=new RegExp(d.replace(".",""),"i")),this._weekdaysParse[b].test(a))return b},_longDateFormat:{LT:"h:mm A",L:"MM/DD/YYYY",LL:"MMMM D YYYY",LLL:"MMMM D YYYY LT",LLLL:"dddd, MMMM D YYYY LT"},longDateFormat:function(a){var b=this._longDateFormat[a];return!b&&this._longDateFormat[a.toUpperCase()]&&(b=this._longDateFormat[a.toUpperCase()].replace(/MMMM|MM|DD|dddd/g,function(a){return a.slice(1)}),this._longDateFormat[a]=b),b},isPM:function(a){return"p"===(a+"").toLowerCase().charAt(0)},_meridiemParse:/[ap]\.?m?\.?/i,meridiem:function(a,b,c){return a>11?c?"pm":"PM":c?"am":"AM"},_calendar:{sameDay:"[Today at] LT",nextDay:"[Tomorrow at] LT",nextWeek:"dddd [at] LT",lastDay:"[Yesterday at] LT",lastWeek:"[Last] dddd [at] LT",sameElse:"L"},calendar:function(a,b){var c=this._calendar[a];return"function"==typeof c?c.apply(b):c},_relativeTime:{future:"in %s",past:"%s ago",s:"a few seconds",m:"a minute",mm:"%d minutes",h:"an hour",hh:"%d hours",d:"a day",dd:"%d days",M:"a month",MM:"%d months",y:"a year",yy:"%d years"},relativeTime:function(a,b,c,d){var e=this._relativeTime[c];return"function"==typeof e?e(a,b,c,d):e.replace(/%d/i,a)},pastFuture:function(a,b){var c=this._relativeTime[a>0?"future":"past"];return"function"==typeof c?c(b):c.replace(/%s/i,b)},ordinal:function(a){return this._ordinal.replace("%d",a)},_ordinal:"%d",preparse:function(a){return a},postformat:function(a){return a},week:function(a){return Y(a,this._week.dow,this._week.doy).week},_week:{dow:0,doy:6},_invalidDate:"Invalid date",invalidDate:function(){return this._invalidDate}}),db=function(c,d,e,f){var g;return"boolean"==typeof e&&(f=e,e=a),g={},g._isAMomentObject=!0,g._i=c,g._f=d,g._l=e,g._strict=f,g._isUTC=!1,g._pf=b(),$(g)},db.utc=function(c,d,e,f){var g;return"boolean"==typeof e&&(f=e,e=a),g={},g._isAMomentObject=!0,g._useUTC=!0,g._isUTC=!0,g._l=e,g._i=c,g._f=d,g._strict=f,g._pf=b(),$(g).utc()},db.unix=function(a){return db(1e3*a)},db.duration=function(a,b){var c,d,e,f=a,h=null;return db.isDuration(a)?f={ms:a._milliseconds,d:a._days,M:a._months}:"number"==typeof a?(f={},b?f[b]=a:f.milliseconds=a):(h=tb.exec(a))?(c="-"===h[1]?-1:1,f={y:0,d:s(h[kb])*c,h:s(h[lb])*c,m:s(h[mb])*c,s:s(h[nb])*c,ms:s(h[ob])*c}):(h=ub.exec(a))&&(c="-"===h[1]?-1:1,e=function(a){var b=a&&parseFloat(a.replace(",","."));return(isNaN(b)?0:b)*c},f={y:e(h[2]),M:e(h[3]),d:e(h[4]),h:e(h[5]),m:e(h[6]),s:e(h[7]),w:e(h[8])}),d=new g(f),db.isDuration(a)&&a.hasOwnProperty("_lang")&&(d._lang=a._lang),d},db.version=fb,db.defaultFormat=Nb,db.updateOffset=function(){},db.lang=function(a,b){var c;return a?(b?A(y(a),b):null===b?(B(a),a="en"):pb[a]||C(a),c=db.duration.fn._lang=db.fn._lang=C(a),c._abbr):db.fn._lang._abbr},db.langData=function(a){return a&&a._lang&&a._lang._abbr&&(a=a._lang._abbr),C(a)},db.isMoment=function(a){return a instanceof f||null!=a&&a.hasOwnProperty("_isAMomentObject")},db.isDuration=function(a){return a instanceof g},eb=Zb.length-1;eb>=0;--eb)r(Zb[eb]);for(db.normalizeUnits=function(a){return p(a)},db.invalid=function(a){var b=db.utc(0/0);return null!=a?h(b._pf,a):b._pf.userInvalidated=!0,b},db.parseZone=function(a){return db(a).parseZone()},h(db.fn=f.prototype,{clone:function(){return db(this)},valueOf:function(){return+this._d+6e4*(this._offset||0)},unix:function(){return Math.floor(+this/1e3)},toString:function(){return this.clone().lang("en").format("ddd MMM DD YYYY HH:mm:ss [GMT]ZZ")},toDate:function(){return this._offset?new Date(+this):this._d},toISOString:function(){var a=db(this).utc();return 0<a.year()&&a.year()<=9999?F(a,"YYYY-MM-DD[T]HH:mm:ss.SSS[Z]"):F(a,"YYYYYY-MM-DD[T]HH:mm:ss.SSS[Z]")},toArray:function(){var a=this;return[a.year(),a.month(),a.date(),a.hours(),a.minutes(),a.seconds(),a.milliseconds()]},isValid:function(){return x(this)},isDSTShifted:function(){return this._a?this.isValid()&&o(this._a,(this._isUTC?db.utc(this._a):db(this._a)).toArray())>0:!1},parsingFlags:function(){return h({},this._pf)},invalidAt:function(){return this._pf.overflow},utc:function(){return this.zone(0)},local:function(){return this.zone(0),this._isUTC=!1,this},format:function(a){var b=F(this,a||db.defaultFormat);return this.lang().postformat(b)},add:function(a,b){var c;return c="string"==typeof a?db.duration(+b,a):db.duration(a,b),l(this,c,1),this},subtract:function(a,b){var c;return c="string"==typeof a?db.duration(+b,a):db.duration(a,b),l(this,c,-1),this},diff:function(a,b,c){var d,e,f=z(a,this),g=6e4*(this.zone()-f.zone());return b=p(b),"year"===b||"month"===b?(d=432e5*(this.daysInMonth()+f.daysInMonth()),e=12*(this.year()-f.year())+(this.month()-f.month()),e+=(this-db(this).startOf("month")-(f-db(f).startOf("month")))/d,e-=6e4*(this.zone()-db(this).startOf("month").zone()-(f.zone()-db(f).startOf("month").zone()))/d,"year"===b&&(e/=12)):(d=this-f,e="second"===b?d/1e3:"minute"===b?d/6e4:"hour"===b?d/36e5:"day"===b?(d-g)/864e5:"week"===b?(d-g)/6048e5:d),c?e:j(e)},from:function(a,b){return db.duration(this.diff(a)).lang(this.lang()._abbr).humanize(!b)},fromNow:function(a){return this.from(db(),a)},calendar:function(){var a=z(db(),this).startOf("day"),b=this.diff(a,"days",!0),c=-6>b?"sameElse":-1>b?"lastWeek":0>b?"lastDay":1>b?"sameDay":2>b?"nextDay":7>b?"nextWeek":"sameElse";return this.format(this.lang().calendar(c,this))},isLeapYear:function(){return v(this.year())},isDST:function(){return this.zone()<this.clone().month(0).zone()||this.zone()<this.clone().month(5).zone()},day:function(a){var b=this._isUTC?this._d.getUTCDay():this._d.getDay();return null!=a?(a=V(a,this.lang()),this.add({d:a-b})):b},month:function(a){var b,c=this._isUTC?"UTC":"";return null!=a?"string"==typeof a&&(a=this.lang().monthsParse(a),"number"!=typeof a)?this:(b=this.date(),this.date(1),this._d["set"+c+"Month"](a),this.date(Math.min(b,this.daysInMonth())),db.updateOffset(this),this):this._d["get"+c+"Month"]()},startOf:function(a){switch(a=p(a)){case"year":this.month(0);case"month":this.date(1);case"week":case"isoWeek":case"day":this.hours(0);case"hour":this.minutes(0);case"minute":this.seconds(0);case"second":this.milliseconds(0)}return"week"===a?this.weekday(0):"isoWeek"===a&&this.isoWeekday(1),this},endOf:function(a){return a=p(a),this.startOf(a).add("isoWeek"===a?"week":a,1).subtract("ms",1)},isAfter:function(a,b){return b="undefined"!=typeof b?b:"millisecond",+this.clone().startOf(b)>+db(a).startOf(b)},isBefore:function(a,b){return b="undefined"!=typeof b?b:"millisecond",+this.clone().startOf(b)<+db(a).startOf(b)},isSame:function(a,b){return b=b||"ms",+this.clone().startOf(b)===+z(a,this).startOf(b)},min:function(a){return a=db.apply(null,arguments),this>a?this:a},max:function(a){return a=db.apply(null,arguments),a>this?this:a},zone:function(a){var b=this._offset||0;return null==a?this._isUTC?b:this._d.getTimezoneOffset():("string"==typeof a&&(a=I(a)),Math.abs(a)<16&&(a=60*a),this._offset=a,this._isUTC=!0,b!==a&&l(this,db.duration(b-a,"m"),1,!0),this)},zoneAbbr:function(){return this._isUTC?"UTC":""},zoneName:function(){return this._isUTC?"Coordinated Universal Time":""},parseZone:function(){return this._tzm?this.zone(this._tzm):"string"==typeof this._i&&this.zone(this._i),this},hasAlignedHourOffset:function(a){return a=a?db(a).zone():0,(this.zone()-a)%60===0},daysInMonth:function(){return t(this.year(),this.month())},dayOfYear:function(a){var b=hb((db(this).startOf("day")-db(this).startOf("year"))/864e5)+1;return null==a?b:this.add("d",a-b)},quarter:function(){return Math.ceil((this.month()+1)/3)},weekYear:function(a){var b=Y(this,this.lang()._week.dow,this.lang()._week.doy).year;return null==a?b:this.add("y",a-b)},isoWeekYear:function(a){var b=Y(this,1,4).year;return null==a?b:this.add("y",a-b)},week:function(a){var b=this.lang().week(this);return null==a?b:this.add("d",7*(a-b))},isoWeek:function(a){var b=Y(this,1,4).week;return null==a?b:this.add("d",7*(a-b))},weekday:function(a){var b=(this.day()+7-this.lang()._week.dow)%7;return null==a?b:this.add("d",a-b)},isoWeekday:function(a){return null==a?this.day()||7:this.day(this.day()%7?a:a-7)},get:function(a){return a=p(a),this[a]()},set:function(a,b){return a=p(a),"function"==typeof this[a]&&this[a](b),this},lang:function(b){return b===a?this._lang:(this._lang=C(b),this)}}),eb=0;eb<Rb.length;eb++)_(Rb[eb].toLowerCase().replace(/s$/,""),Rb[eb]);_("year","FullYear"),db.fn.days=db.fn.day,db.fn.months=db.fn.month,db.fn.weeks=db.fn.week,db.fn.isoWeeks=db.fn.isoWeek,db.fn.toJSON=db.fn.toISOString,h(db.duration.fn=g.prototype,{_bubble:function(){var a,b,c,d,e=this._milliseconds,f=this._days,g=this._months,h=this._data;h.milliseconds=e%1e3,a=j(e/1e3),h.seconds=a%60,b=j(a/60),h.minutes=b%60,c=j(b/60),h.hours=c%24,f+=j(c/24),h.days=f%30,g+=j(f/30),h.months=g%12,d=j(g/12),h.years=d},weeks:function(){return j(this.days()/7)},valueOf:function(){return this._milliseconds+864e5*this._days+this._months%12*2592e6+31536e6*s(this._months/12)},humanize:function(a){var b=+this,c=X(b,!a,this.lang());return a&&(c=this.lang().pastFuture(b,c)),this.lang().postformat(c)},add:function(a,b){var c=db.duration(a,b);return this._milliseconds+=c._milliseconds,this._days+=c._days,this._months+=c._months,this._bubble(),this},subtract:function(a,b){var c=db.duration(a,b);return this._milliseconds-=c._milliseconds,this._days-=c._days,this._months-=c._months,this._bubble(),this},get:function(a){return a=p(a),this[a.toLowerCase()+"s"]()},as:function(a){return a=p(a),this["as"+a.charAt(0).toUpperCase()+a.slice(1)+"s"]()},lang:db.fn.lang,toIsoString:function(){var a=Math.abs(this.years()),b=Math.abs(this.months()),c=Math.abs(this.days()),d=Math.abs(this.hours()),e=Math.abs(this.minutes()),f=Math.abs(this.seconds()+this.milliseconds()/1e3);return this.asSeconds()?(this.asSeconds()<0?"-":"")+"P"+(a?a+"Y":"")+(b?b+"M":"")+(c?c+"D":"")+(d||e||f?"T":"")+(d?d+"H":"")+(e?e+"M":"")+(f?f+"S":""):"P0D"}});for(eb in Sb)Sb.hasOwnProperty(eb)&&(bb(eb,Sb[eb]),ab(eb.toLowerCase()));bb("Weeks",6048e5),db.duration.fn.asMonths=function(){return(+this-31536e6*this.years())/2592e6+12*this.years()},db.lang("en",{ordinal:function(a){var b=a%10,c=1===s(a%100/10)?"th":1===b?"st":2===b?"nd":3===b?"rd":"th";return a+c}}),rb?(module.exports=db,cb(!0)):"function"==typeof define&&define.amd?define("moment",function(b,c,d){return d.config&&d.config()&&d.config().noGlobal!==!0&&cb(d.config().noGlobal===a),db}):cb()}.call(this),function(a){function b(b){return!b||void 0!==b.allowPageScroll||void 0===b.swipe&&void 0===b.swipeStatus||(b.allowPageScroll=j),b||(b={}),b=a.extend({},a.fn.swipe.defaults,b),this.each(function(){var d=a(this),e=d.data(w);e||(e=new c(this,b),d.data(w,e))})}function c(b,c){function x(b){if(!(S()||a(b.target).closest(c.excludedElements,tb).length>0)){var d,e=b.originalEvent,f=v?e.touches[0]:e;return ub=r,v?vb=e.touches.length:b.preventDefault(),mb=0,nb=null,sb=null,ob=0,pb=0,qb=0,rb=1,pinchDistance=0,wb=X(),Q(),!v||vb===c.fingers||c.fingers===q||L()?(U(0,f),xb=db(),2==vb&&(U(1,e.touches[1]),pb=qb=Z(wb[0].start,wb[1].start)),(c.swipeStatus||c.pinchStatus)&&(d=E(e,ub))):d=!1,d===!1?(ub=u,E(e,ub),d):void T(!0)}}function y(a){var b=a.originalEvent;if(ub!==t&&ub!==u&&!R()){var d,e=v?b.touches[0]:b,f=V(e);if(yb=db(),v&&(vb=b.touches.length),ub=s,2==vb&&(0==pb?(U(1,b.touches[1]),pb=qb=Z(wb[0].start,wb[1].start)):(V(b.touches[1]),qb=Z(wb[0].end,wb[1].end),sb=_(wb[0].end,wb[1].end)),rb=$(pb,qb),pinchDistance=Math.abs(pb-qb)),vb===c.fingers||c.fingers===q||!v||L()){if(nb=cb(f.start,f.end),J(a,nb),mb=ab(f.start,f.end),ob=Y(),(c.swipeStatus||c.pinchStatus)&&(d=E(b,ub)),!c.triggerOnTouchEnd||c.triggerOnTouchLeave){var g=!0;if(c.triggerOnTouchLeave){var h=eb(this);g=fb(f.end,h)}!c.triggerOnTouchEnd&&g?ub=D(s):c.triggerOnTouchLeave&&!g&&(ub=D(t)),(ub==u||ub==t)&&E(b,ub)}}else ub=u,E(b,ub);d===!1&&(ub=u,E(b,ub))}}function z(a){var b=a.originalEvent;if(v&&b.touches.length>0)return P(),!0;if(R()&&(vb=Ab),a.preventDefault(),yb=db(),c.triggerOnTouchEnd||0==c.triggerOnTouchEnd&&ub===s){ub=t;var d=vb===c.fingers||c.fingers===q||!v,e=0!==wb[0].end.x,f=d&&e&&(K()||M());f?E(b,ub):(ub=u,E(b,ub))}else ub===s&&(ub=u,E(b,ub));T(!1)}function A(){vb=0,yb=0,xb=0,pb=0,qb=0,rb=1,Q(),T(!1)}function B(a){var b=a.originalEvent;c.triggerOnTouchLeave&&(ub=D(t),E(b,ub))}function C(){tb.unbind(hb,x),tb.unbind(lb,A),tb.unbind(ib,y),tb.unbind(jb,z),kb&&tb.unbind(kb,B),T(!1)}function D(a){var b=a,d=I(),e=G();return d?!e||a!=s||c.triggerOnTouchEnd&&!c.triggerOnTouchLeave?!e&&a==t&&c.triggerOnTouchLeave&&(b=u):b=t:b=u,b}function E(a,b){var c=void 0;return N()&&(c=F(a,b,l)),L()&&c!==!1&&(c=F(a,b,m)),O()&&c!==!1&&(c=F(a,b,n)),b===u&&A(a),b===t&&(v?0==a.touches.length&&A(a):A(a)),c}function F(a,b,j){var k=void 0;if(j==l){if(c.swipeStatus&&(k=c.swipeStatus.call(tb,a,b,nb||null,mb||0,ob||0,vb),k===!1))return!1;if(b==t&&M()){if(c.swipe&&(k=c.swipe.call(tb,a,nb,mb,ob,vb),k===!1))return!1;switch(nb){case d:c.swipeLeft&&(k=c.swipeLeft.call(tb,a,nb,mb,ob,vb));break;case e:c.swipeRight&&(k=c.swipeRight.call(tb,a,nb,mb,ob,vb));break;case f:c.swipeUp&&(k=c.swipeUp.call(tb,a,nb,mb,ob,vb));break;case g:c.swipeDown&&(k=c.swipeDown.call(tb,a,nb,mb,ob,vb))}}}if(j==m){if(c.pinchStatus&&(k=c.pinchStatus.call(tb,a,b,sb||null,pinchDistance||0,ob||0,vb,rb),k===!1))return!1;if(b==t&&K())switch(sb){case h:c.pinchIn&&(k=c.pinchIn.call(tb,a,sb||null,pinchDistance||0,ob||0,vb,rb));break;case i:c.pinchOut&&(k=c.pinchOut.call(tb,a,sb||null,pinchDistance||0,ob||0,vb,rb))}}return j==n&&b===u&&(!c.click||1!==vb&&v||!isNaN(mb)&&0!==mb||(k=c.click.call(tb,a,a.target))),k}function G(){return null!==c.threshold?mb>=c.threshold:!0}function H(){return null!==c.pinchThreshold?pinchDistance>=c.pinchThreshold:!0}function I(){var a;return a=c.maxTimeThreshold?ob>=c.maxTimeThreshold?!1:!0:!0}function J(a,b){if(c.allowPageScroll===j||L())a.preventDefault();else{var h=c.allowPageScroll===k;switch(b){case d:(c.swipeLeft&&h||!h&&c.allowPageScroll!=o)&&a.preventDefault();break;case e:(c.swipeRight&&h||!h&&c.allowPageScroll!=o)&&a.preventDefault();break;case f:(c.swipeUp&&h||!h&&c.allowPageScroll!=p)&&a.preventDefault();break;case g:(c.swipeDown&&h||!h&&c.allowPageScroll!=p)&&a.preventDefault()}}}function K(){return H()}function L(){return!!(c.pinchStatus||c.pinchIn||c.pinchOut)}function M(){var a=I(),b=G(),c=b&&a;return c}function N(){return!!(c.swipe||c.swipeStatus||c.swipeLeft||c.swipeRight||c.swipeUp||c.swipeDown)}function O(){return!!c.click}function P(){zb=db(),Ab=event.touches.length+1}function Q(){zb=0,Ab=0}function R(){var a=!1;if(zb){var b=db()-zb;b<=c.fingerReleaseThreshold&&(a=!0)}return a}function S(){return!(tb.data(w+"_intouch")!==!0)}function T(a){a===!0?(tb.bind(ib,y),tb.bind(jb,z),kb&&tb.bind(kb,B)):(tb.unbind(ib,y,!1),tb.unbind(jb,z,!1),kb&&tb.unbind(kb,B,!1)),tb.data(w+"_intouch",a===!0)}function U(a,b){var c=void 0!==b.identifier?b.identifier:0;return wb[a].identifier=c,wb[a].start.x=wb[a].end.x=b.pageX,wb[a].start.y=wb[a].end.y=b.pageY,wb[a]}function V(a){var b=void 0!==a.identifier?a.identifier:0,c=W(b);return c.end.x=a.pageX,c.end.y=a.pageY,c}function W(a){for(var b=0;b<wb.length;b++)if(wb[b].identifier==a)return wb[b]}function X(){for(var a=[],b=0;5>=b;b++)a.push({start:{x:0,y:0},end:{x:0,y:0},identifier:0});return a}function Y(){return yb-xb}function Z(a,b){var c=Math.abs(a.x-b.x),d=Math.abs(a.y-b.y);return Math.round(Math.sqrt(c*c+d*d))}function $(a,b){var c=b/a*1;return c.toFixed(2)}function _(){return 1>rb?i:h}function ab(a,b){return Math.round(Math.sqrt(Math.pow(b.x-a.x,2)+Math.pow(b.y-a.y,2)))}function bb(a,b){var c=a.x-b.x,d=b.y-a.y,e=Math.atan2(d,c),f=Math.round(180*e/Math.PI);return 0>f&&(f=360-Math.abs(f)),f}function cb(a,b){var c=bb(a,b);return 45>=c&&c>=0?d:360>=c&&c>=315?d:c>=135&&225>=c?e:c>45&&135>c?g:f}function db(){var a=new Date;return a.getTime()}function eb(b){b=a(b);var c=b.offset(),d={left:c.left,right:c.left+b.outerWidth(),top:c.top,bottom:c.top+b.outerHeight()};return d}function fb(a,b){return a.x>b.left&&a.x<b.right&&a.y>b.top&&a.y<b.bottom}var gb=v||!c.fallbackToMouseEvents,hb=gb?"touchstart":"mousedown",ib=gb?"touchmove":"mousemove",jb=gb?"touchend":"mouseup",kb=gb?null:"mouseleave",lb="touchcancel",mb=0,nb=null,ob=0,pb=0,qb=0,rb=1,sb=0,tb=a(b),ub="start",vb=0,wb=null,xb=0,yb=0,zb=0,Ab=0;try{tb.bind(hb,x),tb.bind(lb,A)}catch(Bb){a.error("events not supported "+hb+","+lb+" on jQuery.swipe")}this.enable=function(){return tb.bind(hb,x),tb.bind(lb,A),tb},this.disable=function(){return C(),tb},this.destroy=function(){return C(),tb.data(w,null),tb}}var d="left",e="right",f="up",g="down",h="in",i="out",j="none",k="auto",l="swipe",m="pinch",n="click",o="horizontal",p="vertical",q="all",r="start",s="move",t="end",u="cancel",v="ontouchstart"in window,w="TouchSwipe",x={fingers:1,threshold:75,pinchThreshold:20,maxTimeThreshold:null,fingerReleaseThreshold:250,swipe:null,swipeLeft:null,swipeRight:null,swipeUp:null,swipeDown:null,swipeStatus:null,pinchIn:null,pinchOut:null,pinchStatus:null,click:null,triggerOnTouchEnd:!0,triggerOnTouchLeave:!1,allowPageScroll:"auto",fallbackToMouseEvents:!0,excludedElements:"button, input, select, textarea, a, .noSwipe"};a.fn.swipe=function(c){var d=a(this),e=d.data(w);if(e&&"string"==typeof c){if(e[c])return e[c].apply(this,Array.prototype.slice.call(arguments,1));a.error("Method "+c+" does not exist on jQuery.swipe")}else if(!(e||"object"!=typeof c&&c))return b.apply(this,arguments);return d},a.fn.swipe.defaults=x,a.fn.swipe.phases={PHASE_START:r,PHASE_MOVE:s,PHASE_END:t,PHASE_CANCEL:u},a.fn.swipe.directions={LEFT:d,RIGHT:e,UP:f,DOWN:g,IN:h,OUT:i},a.fn.swipe.pageScroll={NONE:j,HORIZONTAL:o,VERTICAL:p,AUTO:k},a.fn.swipe.fingers={ONE:1,TWO:2,THREE:3,ALL:q}}(jQuery),!function(){var a,b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r,s,t,u,v,w,x,y,z,A,B,C,D,E,F,G,H,I,J,K,L,M,N,O,P,Q,R,S,T,U,V,W,X,Y,Z,$,_,ab,bb,cb,db,eb,fb,gb={}.hasOwnProperty,hb=[].indexOf||function(a){for(var b=0,c=this.length;c>b;b++)if(b in this&&this[b]===a)return b;return-1},ib=function(a,b){function c(){this.constructor=a}for(var d in b)gb.call(b,d)&&(a[d]=b[d]);return c.prototype=b.prototype,a.prototype=new c,a.__super__=b.prototype,a},jb=[].slice;if(A=function(){function a(){}return a}(),A.Util=function(){function a(){}return a}(),A.Http=function(){function a(){}return a}(),A.File=function(){function a(){}return a}(),i="1.0.0","undefined"!=typeof global&&"undefined"!=typeof module&&"exports"in module)o=global,p=module.require.bind(module),module.exports=A;else if("undefined"!=typeof window&&"undefined"!=typeof navigator)o=window,p=null,window.Dropbox&&function(){var a,b,c,d;c=window.Dropbox,d=[];for(a in c)gb.call(c,a)&&(b=c[a],d.push(A[a]=b));return d}(),window.Dropbox=A;else{if("undefined"==typeof self||"undefined"==typeof navigator)throw new Error("dropbox.js loaded in an unsupported JavaScript environment.");o=self,p=self.importScripts.bind(self),self.Dropbox=A}if(A.Env=function(){function a(){}return a.global=o,a.require=p,a}(),A.Util.EventSource=function(){function a(a){this._cancelable=a&&a.cancelable,this._listeners=[]}return a.prototype.addListener=function(a){if("function"!=typeof a)throw new TypeError("Invalid listener type; expected function");return hb.call(this._listeners,a)<0&&this._listeners.push(a),this},a.prototype.removeListener=function(a){var b,c,d,e,f,g;if(this._listeners.indexOf)c=this._listeners.indexOf(a),-1!==c&&this._listeners.splice(c,1);else for(g=this._listeners,b=e=0,f=g.length;f>e;b=++e)if(d=g[b],d===a){this._listeners.splice(b,1);break}return this},a.prototype.dispatch=function(a){var b,c,d,e,f;for(f=this._listeners,d=0,e=f.length;e>d;d++)if(b=f[d],c=b(a),this._cancelable&&c===!1)return!1;return!0},a}(),A.AccountInfo=function(){function a(a){var b;this._json=a,this.name=a.display_name,this.email=a.email,this.countryCode=a.country||null,this.uid=a.uid.toString(),a.public_app_url?(this.publicAppUrl=a.public_app_url,b=this.publicAppUrl.length-1,b>=0&&"/"===this.publicAppUrl.substring(b)&&(this.publicAppUrl=this.publicAppUrl.substring(0,b))):this.publicAppUrl=null,this.referralUrl=a.referral_link,this.quota=a.quota_info.quota,this.privateBytes=a.quota_info.normal||0,this.sharedBytes=a.quota_info.shared||0,this.usedQuota=this.privateBytes+this.sharedBytes}return a.parse=function(a){return a&&"object"==typeof a?new A.AccountInfo(a):a},a.prototype.name=null,a.prototype.email=null,a.prototype.countryCode=null,a.prototype.uid=null,a.prototype.referralUrl=null,a.prototype.publicAppUrl=null,a.prototype.quota=null,a.prototype.usedQuota=null,a.prototype.privateBytes=null,a.prototype.sharedBytes=null,a.prototype.json=function(){return this._json
},a}(),A.ApiError=function(){function a(a,b,c){var d,e;if(this.method=b,this.url=c,this.status=a.status,a.responseType)try{d=a.response||a.responseText}catch(f){e=f;try{d=a.responseText}catch(f){e=f,d=null}}else try{d=a.responseText}catch(f){e=f,d=null}if(d)try{this.responseText=d.toString(),this.response=JSON.parse(d)}catch(f){e=f,this.response=null}else this.responseText="(no response)",this.response=null}return a.prototype.status=null,a.prototype.method=null,a.prototype.url=null,a.prototype.responseText=null,a.prototype.response=null,a.NETWORK_ERROR=0,a.NO_CONTENT=304,a.INVALID_PARAM=400,a.INVALID_TOKEN=401,a.OAUTH_ERROR=403,a.NOT_FOUND=404,a.INVALID_METHOD=405,a.NOT_ACCEPTABLE=406,a.CONFLICT=409,a.RATE_LIMITED=429,a.SERVER_ERROR=503,a.OVER_QUOTA=507,a.prototype.toString=function(){return"Dropbox API error "+this.status+" from "+this.method+" "+this.url+" :: "+this.responseText},a.prototype.inspect=function(){return this.toString()},a}(),A.AuthDriver=function(){function a(){}return a.prototype.authType=function(){return"code"},a.prototype.url=function(){return"https://some.url"},a.prototype.doAuthorize=function(a,b,c,d){return d({code:"access-code"})},a.prototype.getStateParam=function(a,b){return b(A.Util.Oauth.randomAuthStateParam())},a.prototype.resumeAuthorize=function(a,b,c){return c({code:"access-code"})},a.prototype.onAuthStateChange=function(a,b){return b()},a.oauthQueryParams=["access_token","expires_in","scope","token_type","code","error","error_description","error_uri","mac_key","mac_algorithm"].sort(),a}(),A.AuthDriver.autoConfigure=function(a){if("undefined"!=typeof chrome&&(chrome.extension||chrome.app&&chrome.app.runtime))return void a.authDriver(new A.AuthDriver.Chrome);if("undefined"!=typeof window){if(window.cordova)return void a.authDriver(new A.AuthDriver.Cordova);window&&window.navigator&&a.authDriver(new A.AuthDriver.Redirect)}},A.AuthDriver.BrowserBase=function(){function a(a){a?(this.rememberUser="rememberUser"in a?a.rememberUser:!0,this.scope=a.scope||"default"):(this.rememberUser=!0,this.scope="default"),this.storageKey=null,this.stateRe=/^[^#]+\#(.*&)?state=([^&]+)(&|$)/}return a.prototype.authType=function(){return"token"},a.prototype.onAuthStepChange=function(a,b){var c=this;switch(this.setStorageKey(a),a.authStep){case A.Client.RESET:return this.loadCredentials(function(d){return d?(a.setCredentials(d),a.authStep!==A.Client.DONE?b():c.rememberUser?(a.setCredentials(d),a.getAccountInfo(function(d){return d&&d.status===A.ApiError.INVALID_TOKEN?(a.reset(),c.forgetCredentials(b)):b()})):c.forgetCredentials(b)):b()});case A.Client.DONE:return this.rememberUser?this.storeCredentials(a.credentials(),b):this.forgetCredentials(b);case A.Client.SIGNED_OUT:return this.forgetCredentials(b);case A.Client.ERROR:return this.forgetCredentials(b);default:return b(),this}},a.prototype.setStorageKey=function(a){return this.storageKey="dropbox-auth:"+this.scope+":"+a.appHash(),this},a.prototype.storeCredentials=function(a,b){return localStorage.setItem(this.storageKey,JSON.stringify(a)),b(),this},a.prototype.loadCredentials=function(a){var b,c;if(c=localStorage.getItem(this.storageKey),!c)return a(null),this;try{a(JSON.parse(c))}catch(d){b=d,a(null)}return this},a.prototype.forgetCredentials=function(a){return localStorage.removeItem(this.storageKey),a(),this},a.prototype.locationStateParam=function(a){var b,c;return b=a||A.AuthDriver.BrowserBase.currentLocation(),c=this.stateRe.exec(b),c?decodeURIComponent(c[2]):null},a.prototype.replaceUrlBasename=function(a,b){var c,d,e;return d=a.indexOf("#"),-1!==d&&(a=a.substring(0,d)),e=a.indexOf("?"),-1!==e&&(a=a.substring(0,e)),c=a.split("/"),c[c.length-1]=b,c.join("/")},a.currentLocation=function(){return window.location.href},a.cleanupLocation=function(){var a,b;window.history&&window.history.replaceState?(b=this.currentLocation(),a=b.indexOf("#"),window.history.replaceState({},document.title,b.substring(0,a))):window.location.hash=""},a}(),A.AuthDriver.Redirect=function(a){function b(a){b.__super__.constructor.call(this,a),this.receiverUrl=this.baseUrl(a)}return ib(b,a),b.prototype.baseUrl=function(a){var b,c;if(c=A.AuthDriver.BrowserBase.currentLocation(),a){if(a.redirectUrl)return a.redirectUrl;if(a.redirectFile)return this.replaceUrlBasename(c,a.redirectFile)}return b=c.indexOf("#"),-1!==b&&(c=c.substring(0,b)),c},b.prototype.url=function(){return this.receiverUrl},b.prototype.doAuthorize=function(a,b,c){return this.storeCredentials(c.credentials(),function(){return window.location.assign(a)})},b.prototype.resumeAuthorize=function(a,b,c){var d;return this.locationStateParam()===a?(d=A.AuthDriver.BrowserBase.currentLocation(),A.AuthDriver.BrowserBase.cleanupLocation(),c(A.Util.Oauth.queryParamsFromUrl(d))):this.forgetCredentials(function(){return c({error:"Authorization error"})})},b}(A.AuthDriver.BrowserBase),A.AuthDriver.Popup=function(a){function b(a){b.__super__.constructor.call(this,a),this.receiverUrl=this.baseUrl(a)}return ib(b,a),b.prototype.url=function(){return this.receiverUrl},b.prototype.doAuthorize=function(a,b,c,d){return this.listenForMessage(b,d),this.openWindow(a)},b.prototype.baseUrl=function(a){var b;if(b=A.AuthDriver.BrowserBase.currentLocation(),a){if(a.receiverUrl)return a.receiverUrl;if(a.receiverFile)return this.replaceUrlBasename(b,a.receiverFile)}return b},b.prototype.openWindow=function(a){return window.open(a,"_dropboxOauthSigninWindow",this.popupWindowSpec(980,700))},b.prototype.popupWindowSpec=function(a,b){var c,d,e,f,g,h,i,j,k,l;return g=null!=(i=window.screenX)?i:window.screenLeft,h=null!=(j=window.screenY)?j:window.screenTop,f=null!=(k=window.outerWidth)?k:document.documentElement.clientWidth,c=null!=(l=window.outerHeight)?l:document.documentElement.clientHeight,d=Math.round(g+(f-a)/2),e=Math.round(h+(c-b)/2.5),g>d&&(d=g),h>e&&(e=h),"width="+a+",height="+b+","+("left="+d+",top="+e)+"dialog=yes,dependent=yes,scrollbars=yes,location=yes"},b.prototype.listenForMessage=function(a,b){var c,d=this;return c=function(e){var f,g,h;f=e.data?e.data:e;try{h=JSON.parse(f)._dropboxjs_oauth_info}catch(i){return void(g=i)}return h?d.locationStateParam(h)===a?(a=!1,window.removeEventListener("message",c),A.AuthDriver.Popup.onMessage.removeListener(c),b(A.Util.Oauth.queryParamsFromUrl(f))):void 0:void 0},window.addEventListener("message",c,!1),A.AuthDriver.Popup.onMessage.addListener(c)},b.locationOrigin=function(a){var b;return(b=/^(file:\/\/[^\?\#]*)(\?|\#|$)/.exec(a))?b[1]:(b=/^([^\:]+\:\/\/[^\/\?\#]*)(\/|\?|\#|$)/.exec(a),b?b[1]:a)},b.oauthReceiver=function(){window.addEventListener("load",function(){var a,b,c,d,e,f;if(f=window.location.href,c=JSON.stringify({_dropboxjs_oauth_info:f}),A.AuthDriver.BrowserBase.cleanupLocation(),d=window.opener,window.parent!==window.top&&(d||(d=window.parent)),d){try{e=window.location.origin||locationOrigin(f),d.postMessage(c,e),window.close()}catch(g){b=g}try{return d.Dropbox.AuthDriver.Popup.onMessage.dispatch(c),window.close()}catch(g){a=g}}})},b.onMessage=new A.Util.EventSource,b}(A.AuthDriver.BrowserBase),l=null,m=null,"undefined"!=typeof chrome&&null!==chrome&&(chrome.runtime&&(chrome.runtime.onMessage&&(l=chrome.runtime.onMessage),chrome.runtime.sendMessage&&(m=chrome.runtime.sendMessage.bind(chrome.runtime))),chrome.extension&&(chrome.extension.onMessage&&(l||(l=chrome.extension.onMessage)),chrome.extension.sendMessage&&(m||(m=chrome.extension.sendMessage.bind(chrome.extension))))),A.AuthDriver.Chrome=function(a){function b(a){var c;b.__super__.constructor.call(this,a),c=a&&a.receiverPath||"chrome_oauth_receiver.html",this.useQuery=!0,this.receiverUrl=this.expandUrl(c),this.storageKey="dropbox_js_"+this.scope+"_credentials"}return ib(b,a),b.prototype.onMessage=l,b.prototype.sendMessage=m,b.prototype.expandUrl=function(a){return chrome.runtime&&chrome.runtime.getURL?chrome.runtime.getURL(a):chrome.extension&&chrome.extension.getURL?chrome.extension.getURL(a):a},b.prototype.onAuthStepChange=function(a,b){var c=this;switch(a.authStep){case A.Client.RESET:return this.loadCredentials(function(d){if(d){if(d.authStep)return c.forgetCredentials(b);a.setCredentials(d)}return b()});case A.Client.DONE:return this.storeCredentials(a.credentials(),b);case A.Client.SIGNED_OUT:return this.forgetCredentials(b);case A.Client.ERROR:return this.forgetCredentials(b);default:return b()}},b.prototype.doAuthorize=function(a,b,c,d){var e,f,g,h,i=this;return(null!=(f=chrome.identity)?f.launchWebAuthFlow:void 0)?chrome.identity.launchWebAuthFlow({url:a,interactive:!0},function(a){return i.locationStateParam(a)===b?(b=!1,d(A.Util.Oauth.queryParamsFromUrl(a))):void 0}):(null!=(g=chrome.experimental)?null!=(h=g.identity)?h.launchWebAuthFlow:void 0:void 0)?chrome.experimental.identity.launchWebAuthFlow({url:a,interactive:!0},function(a){return i.locationStateParam(a)===b?(b=!1,d(A.Util.Oauth.queryParamsFromUrl(a))):void 0}):(e={handle:null},this.listenForMessage(b,e,d),this.openWindow(a,function(a){return e.handle=a}))},b.prototype.openWindow=function(a,b){return chrome.tabs&&chrome.tabs.create?(chrome.tabs.create({url:a,active:!0,pinned:!1},function(a){return b(a)}),this):this},b.prototype.closeWindow=function(a){return chrome.tabs&&chrome.tabs.remove&&a.id?(chrome.tabs.remove(a.id),this):chrome.app&&chrome.app.window&&a.close?(a.close(),this):this},b.prototype.url=function(){return this.receiverUrl},b.prototype.listenForMessage=function(a,b,c){var d,e=this;return d=function(f,g){var h;return g&&g.tab&&g.tab.url.substring(0,e.receiverUrl.length)!==e.receiverUrl||!f.dropbox_oauth_receiver_href?void 0:(h=f.dropbox_oauth_receiver_href,e.locationStateParam(h)===a?(a=!1,b.handle&&e.closeWindow(b.handle),e.onMessage.removeListener(d),c(A.Util.Oauth.queryParamsFromUrl(h))):void 0)},this.onMessage.addListener(d)},b.prototype.storeCredentials=function(a,b){var c;return c={},c[this.storageKey]=a,chrome.storage.local.set(c,b),this},b.prototype.loadCredentials=function(a){var b=this;return chrome.storage.local.get(this.storageKey,function(c){return a(c[b.storageKey]||null)}),this},b.prototype.forgetCredentials=function(a){return chrome.storage.local.remove(this.storageKey,a),this},b.oauthReceiver=function(){return window.addEventListener("load",function(){var a,b;return a=new A.AuthDriver.Chrome,b=window.location.href,window.location.hash="",a.sendMessage({dropbox_oauth_receiver_href:b}),window.close?window.close():void 0})},b}(A.AuthDriver.BrowserBase),A.AuthDriver.Cordova=function(a){function b(a){b.__super__.constructor.call(this,a)}return ib(b,a),b.prototype.url=function(){return"https://www.dropbox.com/1/oauth2/redirect_receiver"},b.prototype.doAuthorize=function(a,b,c,d){var e,f,g,h,i,j=this;return f=window.open(a,"_blank","location=yes,closebuttoncaption=Cancel"),h=!1,e=/^[^/]*\/\/[^/]*\//.exec(a)[0],i=!1,g=function(a){if(a.url&&j.locationStateParam(a.url)===b){if(i)return;return f.removeEventListener("loadstart",g),f.removeEventListener("loaderror",g),f.removeEventListener("loadstop",g),f.removeEventListener("exit",g),i=!0,window.setTimeout(function(){return f.close()},10),void d(A.Util.Oauth.queryParamsFromUrl(a.url))}if("exit"===a.type){if(i)return;f.removeEventListener("loadstart",g),f.removeEventListener("loaderror",g),f.removeEventListener("loadstop",g),f.removeEventListener("exit",g),i=!0,d(new AuthError("error=access_denied&error_description=User+closed+browser+window"))}},f.addEventListener("loadstart",g),f.addEventListener("loaderror",g),f.addEventListener("loadstop",g),f.addEventListener("exit",g)},b}(A.AuthDriver.BrowserBase),A.AuthDriver.NodeServer=function(){function a(a){this._port=(null!=a?a.port:void 0)||8912,(null!=a?a.tls:void 0)?(this._tlsOptions=a.tls,("string"==typeof this._tlsOptions||this._tlsOptions instanceof Buffer)&&(this._tlsOptions={key:this._tlsOptions,cert:this._tlsOptions})):this._tlsOptions=null,this._fs=A.Env.require("fs"),this._http=A.Env.require("http"),this._https=A.Env.require("https"),this._open=A.Env.require("open"),this._callbacks={},this._nodeUrl=A.Env.require("url"),this.createApp()}return a.prototype.authType=function(){return"code"},a.prototype.url=function(){var a;return a=null===this._tlsOptions?"http":"https",""+a+"://localhost:"+this._port+"/oauth_callback"},a.prototype.doAuthorize=function(a,b,c,d){return this._callbacks[b]=d,this.openBrowser(a)},a.prototype.openBrowser=function(a){if(!a.match(/^https?:\/\//))throw new Error("Not a http/https URL: "+a);return"BROWSER"in process.env?this._open(a,process.env.BROWSER):this._open(a)},a.prototype.createApp=function(){var a=this;return this._app=this._tlsOptions?this._https.createServer(this._tlsOptions,function(b,c){return a.doRequest(b,c)}):this._http.createServer(function(b,c){return a.doRequest(b,c)}),this._app.listen(this._port)},a.prototype.closeServer=function(){return this._app.close()},a.prototype.doRequest=function(a,b){var c,d,e,f=this;return e=this._nodeUrl.parse(a.url,!0),"/oauth_callback"===e.pathname&&(d=e.query.state,this._callbacks[d]&&(this._callbacks[d](e.query),delete this._callbacks[d])),c="",a.on("data",function(a){return c+=a}),a.on("end",function(){return f.closeBrowser(b)})},a.prototype.closeBrowser=function(a){var b;return b='<!doctype html>\n<script type="text/javascript">window.close();</script>\n<p>Please close this window.</p>',a.writeHead(200,{"Content-Length":b.length,"Content-Type":"text/html"}),a.write(b),a.end()},a}(),A.AuthError=function(){function a(a){var b;if(!a.error)throw new Error("Not an OAuth 2.0 error: "+JSON.stringify(a));b="object"==typeof a.error&&a.error.error?a.error:a,this.code=b.error,this.description=b.error_description||null,this.uri=b.error_uri||null}return a.prototype.code=null,a.prototype.description=null,a.prototype.uri=null,a.ACCESS_DENIED="access_denied",a.INVALID_REQUEST="invalid_request",a.UNAUTHORIZED_CLIENT="unauthorized_client",a.INVALID_GRANT="invalid_grant",a.INVALID_SCOPE="invalid_scope",a.UNSUPPORTED_GRANT_TYPE="unsupported_grant_type",a.UNSUPPORTED_RESPONSE_TYPE="unsupported_response_type",a.SERVER_ERROR="server_error",a.TEMPORARILY_UNAVAILABLE="temporarily_unavailable",a.prototype.toString=function(){return"Dropbox OAuth error "+this.code+" :: "+this.description},a.prototype.inspect=function(){return this.toString()},a}(),A.Client=function(){function a(a){var b=this;this.serverRoot=a.server||this.defaultServerRoot(),this.maxApiServer="maxApiServer"in a?a.maxApiServer:this.defaultMaxApiServer(),this.authServer=a.authServer||this.defaultAuthServer(),this.fileServer=a.fileServer||this.defaultFileServer(),this.downloadServer=a.downloadServer||this.defaultDownloadServer(),this.onXhr=new A.Util.EventSource({cancelable:!0}),this.onError=new A.Util.EventSource,this.onAuthStepChange=new A.Util.EventSource,this.xhrOnErrorHandler=function(a,c){return b.handleXhrError(a,c)},this.oauth=new A.Util.Oauth(a),this.uid=a.uid||null,this.authStep=this.oauth.step(),this.driver=null,this.filter=null,this.authError=null,this._credentials=null,this._datastoreManager=null,this.setupUrls()}return a.prototype.onXhr=null,a.prototype.onError=null,a.prototype.onAuthStepChange=null,a.prototype.authDriver=function(a){return this.driver=a,this},a.prototype.dropboxUid=function(){return this.uid},a.prototype.credentials=function(){return this._credentials||this.computeCredentials(),this._credentials},a.prototype.authenticate=function(a,b){var c,d,e,f,g,h=this;if(b||"function"!=typeof a||(b=a,a=null),c=a&&"interactive"in a?a.interactive:!0,!this.driver&&this.authStep!==n.DONE&&(A.AuthDriver.autoConfigure(this),!this.driver))throw new Error("OAuth driver auto-configuration failed. Call authDriver.");if(this.authStep===n.ERROR)throw new Error("Client got in an error state. Call reset() to reuse it!");return f=function(){return h.authStep=h.oauth.step(),h.authStep===n.ERROR&&(h.authError=h.oauth.error()),h._credentials=null,h.onAuthStepChange.dispatch(h),g()},e=function(){return h.authStep=n.ERROR,h._credentials=null,h.onAuthStepChange.dispatch(h),g()},d=null,g=function(){var a;if(d!==h.authStep&&(d=h.authStep,h.driver&&h.driver.onAuthStepChange))return void h.driver.onAuthStepChange(h,g);switch(h.authStep){case n.RESET:return c?(h.driver.getStateParam&&h.driver.getStateParam(function(a){return h.client.authStep===n.RESET&&h.oauth.setAuthStateParam(a),f()}),h.oauth.setAuthStateParam(A.Util.Oauth.randomAuthStateParam()),f()):void(b&&b(null,h));case n.PARAM_SET:return c?(a=h.authorizeUrl(),h.driver.doAuthorize(a,h.oauth.authStateParam(),h,function(a){return h.oauth.processRedirectParams(a),a.uid&&(h.uid=a.uid),f()})):void(b&&b(null,h));case n.PARAM_LOADED:return h.driver.resumeAuthorize?h.driver.resumeAuthorize(h.oauth.authStateParam(),h,function(a){return h.oauth.processRedirectParams(a),a.uid&&(h.uid=a.uid),f()}):(h.oauth.setAuthStateParam(h.oauth.authStateParam()),void f());case n.AUTHORIZED:return h.getAccessToken(function(a,b){return a?(h.authError=a,e()):(h.oauth.processRedirectParams(b),h.uid=b.uid,f())});case n.DONE:b&&b(null,h);break;case n.SIGNED_OUT:return h.authStep=n.RESET,h.reset(),g();case n.ERROR:b&&b(h.authError,h)}},g(),this},a.prototype.isAuthenticated=function(){return this.authStep===n.DONE},a.prototype.signOut=function(a,b){var c,d,e=this;if(b||"function"!=typeof a||(b=a,a=null),c=a&&a.mustInvalidate,this.authStep!==n.DONE)throw new Error("This client doesn't have a user's token");return d=new A.Util.Xhr("POST",this.urls.signOut),d.signWithOauth(this.oauth),this.dispatchXhr(d,function(a){if(a)if(a.status===A.ApiError.INVALID_TOKEN)a=null;else if(c)return void(b&&b(a));return e.authStep=n.RESET,e.reset(),e.authStep=n.SIGNED_OUT,e.onAuthStepChange.dispatch(e),e.driver&&e.driver.onAuthStepChange?e.driver.onAuthStepChange(e,function(){return b?b(null):void 0}):b?b(null):void 0})},a.prototype.signOff=function(a,b){return this.signOut(a,b)},a.prototype.getAccountInfo=function(a,b){var c,d;return b||"function"!=typeof a||(b=a,a=null),c=!1,a&&a.httpCache&&(c=!0),d=new A.Util.Xhr("GET",this.urls.accountInfo),d.signWithOauth(this.oauth,c),this.dispatchXhr(d,function(a,c){return b(a,A.AccountInfo.parse(c),c)})},a.prototype.getUserInfo=function(a,b){return this.getAccountInfo(a,b)},a.prototype.readFile=function(a,b,c){var d,e,f,g,h,i,j;return c||"function"!=typeof b||(c=b,b=null),e={},i="text",g=null,d=!1,b&&(b.versionTag?e.rev=b.versionTag:b.rev&&(e.rev=b.rev),b.arrayBuffer?i="arraybuffer":b.blob?i="blob":b.buffer?i="buffer":b.binary&&(i="b"),b.length?(null!=b.start?(h=b.start,f=b.start+b.length-1):(h="",f=b.length),g="bytes="+h+"-"+f):null!=b.start&&(g="bytes="+b.start+"-"),b.httpCache&&(d=!0)),j=new A.Util.Xhr("GET",""+this.urls.getFile+"/"+this.urlEncodePath(a)),j.setParams(e).signWithOauth(this.oauth,d),j.setResponseType(i),g&&(g&&j.setHeader("Range",g),j.reportResponseHeaders()),this.dispatchXhr(j,function(a,b,d,e){var f;return f=e?A.Http.RangeInfo.parse(e["content-range"]):null,c(a,b,A.File.Stat.parse(d),f)})},a.prototype.writeFile=function(a,b,c,d){var e;return d||"function"!=typeof c||(d=c,c=null),e=A.Util.Xhr.canSendForms&&"object"==typeof b,e?this.writeFileUsingForm(a,b,c,d):this.writeFileUsingPut(a,b,c,d)},a.prototype.writeFileUsingForm=function(a,b,c,d){var e,f,g,h;return g=a.lastIndexOf("/"),-1===g?(e=a,a=""):(e=a.substring(g),a=a.substring(0,g)),f={file:e},c&&(c.noOverwrite&&(f.overwrite="false"),c.lastVersionTag?f.parent_rev=c.lastVersionTag:(c.parentRev||c.parent_rev)&&(f.parent_rev=c.parentRev||c.parent_rev)),h=new A.Util.Xhr("POST",""+this.urls.postFile+"/"+this.urlEncodePath(a)),h.setParams(f).signWithOauth(this.oauth).setFileField("file",e,b,"application/octet-stream"),delete f.file,this.dispatchXhr(h,function(a,b){return d?d(a,A.File.Stat.parse(b)):void 0})},a.prototype.writeFileUsingPut=function(a,b,c,d){var e,f;return e={},c&&(c.noOverwrite&&(e.overwrite="false"),c.lastVersionTag?e.parent_rev=c.lastVersionTag:(c.parentRev||c.parent_rev)&&(e.parent_rev=c.parentRev||c.parent_rev)),f=new A.Util.Xhr("POST",""+this.urls.putFile+"/"+this.urlEncodePath(a)),f.setBody(b).setParams(e).signWithOauth(this.oauth),this.dispatchXhr(f,function(a,b){return d?d(a,A.File.Stat.parse(b)):void 0})},a.prototype.resumableUploadStep=function(a,b,c){var d,e;return b?(d={offset:b.offset},b.tag&&(d.upload_id=b.tag)):d={offset:0},e=new A.Util.Xhr("POST",this.urls.chunkedUpload),e.setBody(a).setParams(d).signWithOauth(this.oauth),this.dispatchXhr(e,function(a,b){return a&&a.status===A.ApiError.INVALID_PARAM&&a.response&&a.response.upload_id&&a.response.offset?c(null,A.Http.UploadCursor.parse(a.response)):c(a,A.Http.UploadCursor.parse(b))})},a.prototype.resumableUploadFinish=function(a,b,c,d){var e,f;return d||"function"!=typeof c||(d=c,c=null),e={upload_id:b.tag},c&&(c.lastVersionTag?e.parent_rev=c.lastVersionTag:(c.parentRev||c.parent_rev)&&(e.parent_rev=c.parentRev||c.parent_rev),c.noOverwrite&&(e.overwrite="false")),f=new A.Util.Xhr("POST",""+this.urls.commitChunkedUpload+"/"+this.urlEncodePath(a)),f.setParams(e).signWithOauth(this.oauth),this.dispatchXhr(f,function(a,b){return d?d(a,A.File.Stat.parse(b)):void 0})},a.prototype.stat=function(a,b,c){var d,e,f;return c||"function"!=typeof b||(c=b,b=null),e={},d=!1,b&&(b.versionTag?e.rev=b.versionTag:b.rev&&(e.rev=b.rev),b.contentHash?e.hash=b.contentHash:b.hash&&(e.hash=b.hash),(b.removed||b.deleted)&&(e.include_deleted="true"),b.readDir&&(e.list="true",b.readDir!==!0&&(e.file_limit=b.readDir.toString())),b.cacheHash&&(e.hash=b.cacheHash),b.httpCache&&(d=!0)),e.include_deleted||(e.include_deleted="false"),e.list||(e.list="false"),f=new A.Util.Xhr("GET",""+this.urls.metadata+"/"+this.urlEncodePath(a)),f.setParams(e).signWithOauth(this.oauth,d),this.dispatchXhr(f,function(a,b){var d,e,f;return f=A.File.Stat.parse(b),d=(null!=b?b.contents:void 0)?function(){var a,c,d,f;for(d=b.contents,f=[],a=0,c=d.length;c>a;a++)e=d[a],f.push(A.File.Stat.parse(e));return f}():void 0,c(a,f,d)})},a.prototype.readdir=function(a,b,c){var d;return c||"function"!=typeof b||(c=b,b=null),d={readDir:!0},b&&(null!=b.limit&&(d.readDir=b.limit),b.versionTag?d.versionTag=b.versionTag:b.rev&&(d.versionTag=b.rev),b.contentHash?d.contentHash=b.contentHash:b.hash&&(d.contentHash=b.hash),(b.removed||b.deleted)&&(d.removed=b.removed||b.deleted),b.httpCache&&(d.httpCache=b.httpCache)),this.stat(a,d,function(a,b,d){var e,f;return e=d?function(){var a,b,c;for(c=[],a=0,b=d.length;b>a;a++)f=d[a],c.push(f.name);return c}():null,c(a,e,b,d)})},a.prototype.metadata=function(a,b,c){return this.stat(a,b,c)},a.prototype.makeUrl=function(a,b,c){var d,e,f,g,h,i=this;return c||"function"!=typeof b||(c=b,b=null),e=b&&(b["long"]||b.longUrl||b.downloadHack)?{short_url:"false"}:{},a=this.urlEncodePath(a),f=""+this.urls.shares+"/"+a,d=!1,g=!1,b&&(b.downloadHack?(d=!0,g=!0):b.download&&(d=!0,f=""+this.urls.media+"/"+a)),h=new A.Util.Xhr("POST",f).setParams(e).signWithOauth(this.oauth),this.dispatchXhr(h,function(a,b){return g&&(null!=b?b.url:void 0)&&(b.url=b.url.replace(i.authServer,i.downloadServer)),c(a,A.File.ShareUrl.parse(b,d))})},a.prototype.history=function(a,b,c){var d,e,f;return c||"function"!=typeof b||(c=b,b=null),e={},d=!1,b&&(null!=b.limit&&(e.rev_limit=b.limit),b.httpCache&&(d=!0)),f=new A.Util.Xhr("GET",""+this.urls.revisions+"/"+this.urlEncodePath(a)),f.setParams(e).signWithOauth(this.oauth,d),this.dispatchXhr(f,function(a,b){var d,e;return e=b?function(){var a,c,e;for(e=[],a=0,c=b.length;c>a;a++)d=b[a],e.push(A.File.Stat.parse(d));return e}():void 0,c(a,e)})},a.prototype.revisions=function(a,b,c){return this.history(a,b,c)},a.prototype.thumbnailUrl=function(a,b){var c;return c=this.thumbnailXhr(a,b),c.paramsToUrl().url},a.prototype.readThumbnail=function(a,b,c){var d,e;return c||"function"!=typeof b||(c=b,b=null),d="b",b&&(b.blob&&(d="blob"),b.arrayBuffer&&(d="arraybuffer"),b.buffer&&(d="buffer")),e=this.thumbnailXhr(a,b),e.setResponseType(d),this.dispatchXhr(e,function(a,b,d){return c(a,b,A.File.Stat.parse(d))})},a.prototype.thumbnailXhr=function(a,b){var c,d;return c={},b&&(b.format?c.format=b.format:b.png&&(c.format="png"),b.size&&(c.size=b.size)),d=new A.Util.Xhr("GET",""+this.urls.thumbnails+"/"+this.urlEncodePath(a)),d.setParams(c).signWithOauth(this.oauth)},a.prototype.revertFile=function(a,b,c){var d;return d=new A.Util.Xhr("POST",""+this.urls.restore+"/"+this.urlEncodePath(a)),d.setParams({rev:b}).signWithOauth(this.oauth),this.dispatchXhr(d,function(a,b){return c?c(a,A.File.Stat.parse(b)):void 0})},a.prototype.restore=function(a,b,c){return this.revertFile(a,b,c)},a.prototype.findByName=function(a,b,c,d){var e,f,g;return d||"function"!=typeof c||(d=c,c=null),f={query:b},e=!1,c&&(null!=c.limit&&(f.file_limit=c.limit),(c.removed||c.deleted)&&(f.include_deleted=!0),c.httpCache&&(e=!0)),g=new A.Util.Xhr("GET",""+this.urls.search+"/"+this.urlEncodePath(a)),g.setParams(f).signWithOauth(this.oauth,e),this.dispatchXhr(g,function(a,b){var c,e;return e=b?function(){var a,d,e;for(e=[],a=0,d=b.length;d>a;a++)c=b[a],e.push(A.File.Stat.parse(c));return e}():void 0,d(a,e)})},a.prototype.search=function(a,b,c,d){return this.findByName(a,b,c,d)},a.prototype.makeCopyReference=function(a,b){var c;return c=new A.Util.Xhr("GET",""+this.urls.copyRef+"/"+this.urlEncodePath(a)),c.signWithOauth(this.oauth),this.dispatchXhr(c,function(a,c){return b(a,A.File.CopyReference.parse(c))})},a.prototype.copyRef=function(a,b){return this.makeCopyReference(a,b)},a.prototype.pullChanges=function(a,b){var c,d;return b||"function"!=typeof a||(b=a,a=null),c=a?a.cursorTag?{cursor:a.cursorTag}:{cursor:a}:{},d=new A.Util.Xhr("POST",this.urls.delta),d.setParams(c).signWithOauth(this.oauth),this.dispatchXhr(d,function(a,c){return b(a,A.Http.PulledChanges.parse(c))})},a.prototype.delta=function(a,b){return this.pullChanges(a,b)},a.prototype.mkdir=function(a,b){var c;return c=new A.Util.Xhr("POST",this.urls.fileopsCreateFolder),c.setParams({root:"auto",path:this.normalizePath(a)}).signWithOauth(this.oauth),this.dispatchXhr(c,function(a,c){return b?b(a,A.File.Stat.parse(c)):void 0})},a.prototype.remove=function(a,b){var c;return c=new A.Util.Xhr("POST",this.urls.fileopsDelete),c.setParams({root:"auto",path:this.normalizePath(a)}).signWithOauth(this.oauth),this.dispatchXhr(c,function(a,c){return b?b(a,A.File.Stat.parse(c)):void 0})},a.prototype.unlink=function(a,b){return this.remove(a,b)},a.prototype["delete"]=function(a,b){return this.remove(a,b)},a.prototype.copy=function(a,b,c){var d,e,f;return c||"function"!=typeof d||(c=d,d=null),e={root:"auto",to_path:this.normalizePath(b)},a instanceof A.File.CopyReference?e.from_copy_ref=a.tag:e.from_path=this.normalizePath(a),f=new A.Util.Xhr("POST",this.urls.fileopsCopy),f.setParams(e).signWithOauth(this.oauth),this.dispatchXhr(f,function(a,b){return c?c(a,A.File.Stat.parse(b)):void 0})},a.prototype.move=function(a,b,c){var d,e;return c||"function"!=typeof d||(c=d,d=null),e=new A.Util.Xhr("POST",this.urls.fileopsMove),e.setParams({root:"auto",from_path:this.normalizePath(a),to_path:this.normalizePath(b)}).signWithOauth(this.oauth),this.dispatchXhr(e,function(a,b){return c?c(a,A.File.Stat.parse(b)):void 0})},a.prototype.appInfo=function(a,b){var c;return b||"function"!=typeof a||(b=a,a=this.oauth.credentials().key),c=new A.Util.Xhr("GET",this.urls.appsInfo),c.setParams({app_key:a}),this.dispatchXhr(c,function(c,d){return b(c,A.Http.AppInfo.parse(d,a))})},a.prototype.isAppDeveloper=function(a,b,c){var d;return"object"==typeof a&&"uid"in a&&(a=a.uid),c||"function"!=typeof b?"object"==typeof b&&"key"in b&&(b=b.key):(c=b,b=this.oauth.credentials().key),d=new A.Util.Xhr("GET",this.urls.appsCheckDeveloper),d.setParams({app_key:b,uid:a}),this.dispatchXhr(d,function(a,b){return b?c(a,b.is_developer):c(a)})},a.prototype.hasOauthRedirectUri=function(a,b,c){var d;return c||"function"!=typeof b?"object"==typeof b&&"key"in b&&(b=b.key):(c=b,b=this.oauth.credentials().key),d=new A.Util.Xhr("GET",this.urls.appsCheckRedirectUri),d.setParams({app_key:b,redirect_uri:a}),this.dispatchXhr(d,function(a,b){return b?c(a,b.has_redirect_uri):c(a)})},a.prototype.reset=function(){var a;return this.uid=null,this.oauth.reset(),a=this.authStep,this.authStep=this.oauth.step(),a!==this.authStep&&this.onAuthStepChange.dispatch(this),this.authError=null,this._credentials=null,this},a.prototype.setCredentials=function(a){var b;return b=this.authStep,this.oauth.setCredentials(a),this.authStep=this.oauth.step(),this.uid=a.uid||null,this.authError=null,this._credentials=null,b!==this.authStep&&this.onAuthStepChange.dispatch(this),this},a.prototype.appHash=function(){return this.oauth.appHash()},a.prototype.setupUrls=function(){return this.apiServer=this.chooseApiServer(),this.urls={authorize:""+this.authServer+"/1/oauth2/authorize",token:""+this.apiServer+"/1/oauth2/token",signOut:""+this.apiServer+"/1/unlink_access_token",accountInfo:""+this.apiServer+"/1/account/info",getFile:""+this.fileServer+"/1/files/auto",postFile:""+this.fileServer+"/1/files/auto",putFile:""+this.fileServer+"/1/files_put/auto",metadata:""+this.apiServer+"/1/metadata/auto",delta:""+this.apiServer+"/1/delta",revisions:""+this.apiServer+"/1/revisions/auto",restore:""+this.apiServer+"/1/restore/auto",search:""+this.apiServer+"/1/search/auto",shares:""+this.apiServer+"/1/shares/auto",media:""+this.apiServer+"/1/media/auto",copyRef:""+this.apiServer+"/1/copy_ref/auto",thumbnails:""+this.fileServer+"/1/thumbnails/auto",chunkedUpload:""+this.fileServer+"/1/chunked_upload",commitChunkedUpload:""+this.fileServer+"/1/commit_chunked_upload/auto",fileopsCopy:""+this.apiServer+"/1/fileops/copy",fileopsCreateFolder:""+this.apiServer+"/1/fileops/create_folder",fileopsDelete:""+this.apiServer+"/1/fileops/delete",fileopsMove:""+this.apiServer+"/1/fileops/move",appsInfo:""+this.apiServer+"/1/apps/info",appsCheckDeveloper:""+this.apiServer+"/1/apps/check_developer",appsCheckRedirectUri:""+this.apiServer+"/1/apps/check_redirect_uri",getDb:""+this.apiServer+"/r5/datastores/get_datastore",getOrCreateDb:""+this.apiServer+"/r5/datastores/get_or_create_datastore",createDb:""+this.apiServer+"/r5/datastores/create_datastore",listDbs:""+this.apiServer+"/r5/datastores/list_datastores",deleteDb:""+this.apiServer+"/r5/datastores/delete_datastore",getSnapshot:""+this.apiServer+"/r5/datastores/get_snapshot",getDeltas:""+this.apiServer+"/r5/datastores/get_deltas",putDelta:""+this.apiServer+"/r5/datastores/put_delta",datastoreAwait:""+this.apiServer+"/r5/datastores/await"},this},a.prototype.chooseApiServer=function(){var a,b;return b=Math.floor(Math.random()*(this.maxApiServer+1)),a=0===b?"":b.toString(),this.serverRoot.replace("$",a)},a.prototype.authStep=null,a.ERROR=0,a.RESET=1,a.PARAM_SET=2,a.PARAM_LOADED=3,a.AUTHORIZED=4,a.DONE=5,a.SIGNED_OUT=6,a.prototype.urlEncodePath=function(a){return A.Util.Xhr.urlEncodeValue(this.normalizePath(a)).replace(/%2F/gi,"/")},a.prototype.normalizePath=function(a){var b;if("/"===a.substring(0,1)){for(b=1;"/"===a.substring(b,b+1);)b+=1;return a.substring(b)}return a},a.prototype.authorizeUrl=function(){var a;return a=this.oauth.authorizeUrlParams(this.driver.authType(),this.driver.url()),this.urls.authorize+"?"+A.Util.Xhr.urlEncode(a)},a.prototype.getAccessToken=function(a){var b,c;return b=this.oauth.accessTokenParams(this.driver.url()),c=new A.Util.Xhr("POST",this.urls.token).setParams(b).addOauthParams(this.oauth),this.dispatchXhr(c,function(b,c){return b&&b.status===A.ApiError.INVALID_PARAM&&b.response&&b.response.error&&(b=new A.AuthError(b.response)),a(b,c)})},a.prototype.dispatchLongPollXhr=function(a,b,c){return null==c&&(c=6e4),this.dispatchXhr(a,b,c)},a.prototype.dispatchXhr=function(a,b,c){var d,e,f=this;return null==c&&(c=1e4),d=setTimeout(function(){return f.handleLongRequest(a)},2*c),a.setCallback(function(a,c,e,f){return clearTimeout(d),b(a,c,e,f)}),a.onError=this.xhrOnErrorHandler,a.prepare(),e=a.xhr,this.onXhr.dispatch(a)&&a.send(),e},a.prototype.handleXhrError=function(a,b){var c=this;return a.status===A.ApiError.INVALID_TOKEN&&this.authStep===n.DONE&&(this.authError=a,this.authStep=n.ERROR,this.onAuthStepChange.dispatch(this),this.driver&&this.driver.onAuthStepChange)?(this.driver.onAuthStepChange(this,function(){return c.onError.dispatch(a),b(a)
}),null):(this.onError.dispatch(a),void b(a))},a.prototype.handleLongRequest=function(){return this.setupUrls()},a.prototype.defaultServerRoot=function(){return"https://api$.dropbox.com"},a.prototype.defaultAuthServer=function(){return this.serverRoot.replace("api$","www")},a.prototype.defaultFileServer=function(){return this.serverRoot.replace("api$","api-content")},a.prototype.defaultDownloadServer=function(){return"https://dl.dropboxusercontent.com"},a.prototype.defaultWsServer=function(){return this.serverRoot.replace(/^https?:/,"wss:")},a.prototype.defaultMaxApiServer=function(){return 30},a.prototype.computeCredentials=function(){var a;a=this.oauth.credentials(),this.uid&&(a.uid=this.uid),this.serverRoot!==this.defaultServerRoot()&&(a.server=this.serverRoot),this.maxApiServer!==this.defaultMaxApiServer()&&(a.maxApiServer=this.maxApiServer),this.authServer!==this.defaultAuthServer()&&(a.authServer=this.authServer),this.fileServer!==this.defaultFileServer()&&(a.fileServer=this.fileServer),this.downloadServer!==this.defaultDownloadServer()&&(a.downloadServer=this.downloadServer),this._credentials=a},a}(),n=A.Client,A.Datastore=function(){function a(a,b){var c=this;this._datastore_manager=a,this._managed_datastore=b,this._dsid=this._managed_datastore.get_dsid(),this._handle=this._managed_datastore.get_handle(),this._record_cache=new V(this),this._last_used_timestamp=0,this.recordsChanged=new A.Util.EventSource,this.syncStatusChanged=new A.Util.EventSource,this._timeoutWrapper=function(a){return a},this._evt_mgr=new B,this._evt_mgr.register(this._managed_datastore.syncStateChanged,function(){return c._syncSoon(),c.syncStatusChanged.dispatch(null)}),this._syncPending=!1,this._closed=!1,this._metadata_table=new A.Datastore.Table(this,":info"),this._metadata_table.setResolutionRule("mtime","max")}return a.prototype.recordsChanged=null,a.prototype.syncStatusChanged=null,a.int64=function(a){var b,c;if(ab.is_number(a)&&null!=a[eb.INT64_TAG])return eb.validateInt64(a);if(ab.is_string(a)){if(!eb.is_valid_int64_string(a))throw new Error("Not a valid int64 in string form: "+a);return c=new Number(parseInt(a,10)),c[eb.INT64_TAG]=a,eb.validateInt64(c)}if(!ab.is_number(a)||!isFinite(a))throw new Error("Not a finite number: "+a);if(Number(a)!==Math.round(a))throw new Error("Number is not an integer: "+a);if(b=a.toFixed(),!eb.is_valid_int64_string(b))throw new Error("Number not in int64 range: "+a);return c=new Number(a),c[eb.INT64_TAG]=b,eb.validateInt64(c)},a.isInt64=function(a){return eb.isInt64(a)},a.prototype.getModifiedTime=function(){var a;return a=this._metadata_table.getOrInsert("info",{}),a.get("mtime")},a.prototype.getTitle=function(){var a;return a=this._metadata_table.getOrInsert("info",{}),a.get("title")},a.prototype.setTitle=function(a){var b;if(null!=a&&!ab.string(a))throw new Error("Title must be a string or null!");return b=this._metadata_table.getOrInsert("info",{}),b.set("title",a)},a.prototype.getTable=function(a){if(this._checkNotClosed(),!A.Datastore.Table.isValidId(a))throw new Error("Invalid table ID: "+a);return new A.Datastore.Table(this,a)},a.prototype.listTableIds=function(){return this._checkNotClosed(),this._managed_datastore.list_tables()},a.prototype.toString=function(){var a;return a=this._closed?"[closed] ":"","Datastore("+a+this._dsid+" ["+this._handle+"])"},a.prototype.close=function(){return this._closed=!0,this._evt_mgr.unregister_all(),this._listeners=[],void this._datastore_manager._datasync.obj_manager.close(this._dsid)},a.prototype.getId=function(){return this._dsid},a.prototype.getSyncStatus=function(){return{uploading:this._managed_datastore.get_outgoing_delta_count()>0}},a.isValidId=function(a){var b;return b=new RegExp(ab.DS_ID_REGEX),ab.is_string(a)&&b.test(a)},a.prototype._generateRid=function(){var a,b,c,d;for(d="_",b="_js_",c=Math.round(1e3*Date.now()),c<=this._last_used_timestamp&&(c=this._last_used_timestamp+1),this._last_used_timestamp=c,a=c.toString(32);a.length<11;)a="0"+a;return d+a+b+eb.randomWeb64String(5)},a.prototype._syncSoon=function(){var a=this;if(this._managed_datastore.is_deleted())throw new Error("Cannot sync deleted datastore "+this._dsid);return this._checkNotClosed(),void(this._syncPending||(this._syncPending=!0,setTimeout(this._timeoutWrapper(function(){return a._syncPending=!1,a._sync()}),0)))},a.prototype._sync=function(){var a,b,c,d,e,f,g,h,i;this._checkNotClosed(),e=this._managed_datastore.sync(),d=this._resolveAffectedRecordMap(e),a=!1;for(g in d)for(c=d[g],h=0,i=c.length;i>h;h++)b=c[h],db(g===b._tid,"tid mismatch"),a=!0,f=b._rid,this._managed_datastore.query(g,f)||(b._deleted=!0,this._record_cache.remove(g,f));return void(a&&this.recordsChanged.dispatch(new X(d,!1)))},a.prototype._resolveAffectedRecordMap=function(a){var b,c,d,e,f;c={};for(f in a){e=a[f];for(d in e)b=this._record_cache.getOrCreate(f,d),null==c[f]&&(c[f]=[]),c[f].push(b)}return c},a.prototype._recordsChangedLocally=function(a){return void(a.length>0&&(this.recordsChanged.dispatch(X._fromRecordList(a,!0)),this._syncSoon()))},a.prototype._checkNotClosed=function(){if(this._closed||!this._managed_datastore._open)throw new Error("Datastore is already closed: "+this);return void 0},a}(),eb=A.Datastore.impl={},ab=A.Datastore.impl.T={},ab.identity=function(a){return a},ab.get_coerce_fn=function(a){return null!=a.coerce?a.coerce:null!=a.load_json?function(b){return b instanceof a?b:a.load_json(b)}:ab.identity},ab.get_T_fn=function(a){return null!=a.Type?a.Type:a},ab.str=function(a){return ab.is_string(a)?a:ab.is_function(a)?a():JSON.stringify(a)},ab.assert=function(a,b){if(!a)throw new Error(ab.str(b))},db=ab.assert,ab.check=function(a,b,c,d,e,f){if(a)return c;throw ab.fail(b,c,d,e,f),new Error("unreachable")},ab.safe_to_string=function(a){var b,c;try{if(c=a.toString(),"[object Object]"!==c)return c}catch(d){b=d}try{return JSON.stringify(a)}catch(d){b=d}try{if(c=a.constructor.name,null!=c?c.match(/^[A-Za-z0-9_]+$/):void 0)return c}catch(d){b=d}return"[T.safe_to_string failed]"},ab.fail=function(a,b,c,d,e){var f,g;throw g=null!=c?null!=d?null!=e?"Wanted "+ab.str(d)+", but "+ab.str(c)+" in "+ab.str(e)+" "+ab.str(a):"Wanted "+ab.str(d)+", but "+ab.str(c)+" "+ab.str(a):""+ab.str(c)+" "+ab.str(a):null!=d?null!=e?"Wanted "+ab.str(d)+", but in "+ab.str(e)+" "+ab.str(a):"Wanted "+ab.str(d)+", but "+ab.str(a):""+ab.str(a),f=new Error(""+g+": "+ab.safe_to_string(b)),console.error(f),f},ab.any=function(a){return a},ab.defined=function(a,b,c,d){return null==c&&(c="defined"),ab.check("undefined"!=typeof a,"is undefined",a,b,c,d),a},ab.nonnull=function(a,b,c,d){return null==c&&(c="nonnull"),ab.defined(a,b,c,d),ab.check(null!=a,"is null",a,b,c,d),a},ab.member=function(a){var b,c;return c="value in "+JSON.stringify(a),b="not in "+JSON.stringify(a),function(d,e,f,g){return null==f&&(f=c),ab.check(hb.call(a,d)>=0,b,d,e,f,g)}},ab.object=function(a,b,c,d){return null==c&&(c="object"),ab.nonnull(a,b,c,d),ab.check("object"==typeof a,"not an object",a,b,c,d),a},ab.bool=function(a,b,c,d){return null==c&&(c="bool"),ab.nonnull(a,b,c,d),ab.check(a===!0||a===!1,"is not bool",a,b,c,d),a},ab.string=function(a,b,c,d){return null==c&&(c="string"),ab.nonnull(a,b,c,d),ab.check(ab.is_string(a),"is not a string",a,b,c,d),a},ab.num=function(a,b,c,d){return null==c&&(c="num"),ab.nonnull(a,b,c,d),ab.check("number"==typeof a,"is not numeric",a,b,c,d),a},ab.int=function(a,b,c,d){return null==c&&(c="int"),ab.num(a,b,c,d),ab.check(0===a%1,"is not an integer",a,b,c,d),a},ab.uint=function(a,b,c,d){return null==c&&(c="uint"),ab.int(a,b,c,d),ab.check(a>=0,"is negative",a,b,c,d),a},ab.nullable=function(a){var b,c;return c="nullable("+a+")",b=function(b,d,e,f){return null==e&&(e=function(){return c}),ab.defined(b,d,e,f),null!=b&&ab.get_T_fn(a)(b,d,e,f),b},b.toString=function(){return c},b.coerce=function(b){return null!=b?ab.get_coerce_fn(a)(b):null},b.fromJSON=function(c){return null!=c?null!=a.fromJSON?a.fromJSON(c):b.coerce(c):null},b},ab.array=function(a,b,c,d){return null==c&&(c="array"),ab.nonnull(a,b,c,d),ab.check(ab.is_array(a),"is not an array",a,b,c,d),a},ab.arrayOf=function(a){var b,c;return c="arrayOf("+a+")",b=function(b,d,e,f){var g,h,i,j,k;for(null==e&&(e=c),ab.array(b,d,e,f),i=j=0,k=b.length;k>j;i=++j)g=b[i],h=function(){return null!=d?"element "+i+" of "+ab.str(d):"element "+i},ab.get_T_fn(a)(g,h,e,f);return b},b.toString=function(){return c},b.coerce=function(b){var d,e,f,g;for(ab.array(b,null,c),g=[],e=0,f=b.length;f>e;e++)d=b[e],g.push(ab.get_coerce_fn(a)(d));return g},b.fromJSON=function(d){var e,f,g,h;if(ab.array(d,"fromJSON input",c),null!=a.fromJSON){for(h=[],f=0,g=d.length;g>f;f++)e=d[f],h.push(a.fromJSON(e));return h}return b.coerce(d)},b},ab.instance=function(a,b,c,d,e){var f;if(!(b instanceof Function))throw new Error("Invalid type given: "+b);return a instanceof b||(null==d&&(d=b.name),ab.check(!1,"got instance of "+(null!=a?null!=(f=a.constructor)?f.name:void 0:void 0),a,c,d,e)),a},ab.unimplemented=function(a){return function(){throw new Error("unimplemented "+a)}},ab.startsWith=function(a,b){return 0===a.lastIndexOf(b,0)},ab.string_matching=function(a){var b;return ab.string(a),ab.check(/^[^].*[$]$/.test(a),"does not start with ^ and end with $",a),b="does not match regex "+a,function(c,d,e,f){return ab.string(c,d,e,f),ab.check(new RegExp(a).test(c),b,c,d,e,f),c}},ab.is_defined=function(a){return"undefined"!=typeof a},ab.is_bool=function(a){return a===!0||a===!1||a&&"object"==typeof a&&a.constructor===Boolean},ab.is_number=function(a){return"number"==typeof a||a&&"object"==typeof a&&a.constructor===Number},ab.is_json_number=function(a){return ab.is_number(a)&&!isNaN(a)&&isFinite(a)},ab.is_string=function(a){return"string"==typeof a||a&&"object"==typeof a&&a.constructor===String},ab.is_function=function(a){return"function"==typeof a},ab.is_object=function(a){return null!=a&&"object"==typeof a},ab.is_array=function(a){return"[object Array]"===Object.prototype.toString.call(a)},ab.is_empty=function(a){return 0===Object.keys(a).length},ab.is_date=function(a){return"[object Date]"===Object.prototype.toString.call(a)},ab.isUint8Array=function(a){return"[object Uint8Array]"===Object.prototype.toString.call(a)},ab.is_simple_map=function(a){var b,c;if(null==a||"object"!=typeof a)return!1;for(b in a)if(c=a[b],!Object.prototype.hasOwnProperty.call(a,b))return!1;return!0},ab.simple_map=function(a,b,c,d){var e,f;null==c&&(c="simple map"),ab.object(a,b,c,d);for(e in a)f=a[e],ab.check(Object.prototype.hasOwnProperty.call(a,e),function(){return"property "+e+" is inherited"},a,b,c,a);return a},ab.simple_typed_map=function(a,b,c){var d,e,f;return d=ab.get_coerce_fn(b),e=ab.get_coerce_fn(c),f=function(d,e,f,g){var h,i;null==f&&(f=a),ab.simple_map(d,e,f,g);for(h in d)i=d[h],ab.get_T_fn(b)(h,"property",null,d),ab.get_T_fn(c)(i,function(){return"value of property "+h},null,d);return d},f.coerce=function(b){var c,f,g;ab.simple_map(b,null,a),f={};for(c in b)g=b[c],f[d(c)]=e(g);return f},f.fromJSON=function(b){var e,f,g;ab.simple_map(b,null,a),f={};for(e in b)g=b[e],f[d(e)]=null!=c.fromJSON?c.fromJSON(g):g;return f},f},ab.DS_ID_REGEX="^[-_a-z0-9]([-_a-z0-9.]{0,30}[-_a-z0-9])?$|^[.][-_a-zA-Z0-9]{1,100}$",ab.dsid=function(a,b,c,d){return null==c&&(c="dsid"),ab.string_matching(ab.DS_ID_REGEX)(a,b,c,d),a},ab.SS_ID_REGEX="^[-:._+/=a-zA-Z0-9][-._+/=a-zA-Z0-9]{0,31}$",ab.tid=function(a,b,c,d){return null==c&&(c="tid"),ab.string_matching(ab.SS_ID_REGEX)(a,b,c,d),a},ab.rowid=function(a,b,c,d){return null==c&&(c="rowid"),ab.string_matching(ab.SS_ID_REGEX)(a,b,c,d),a},ab.field_name=function(a,b,c,d){return null==c&&(c="field name"),ab.string_matching(ab.SS_ID_REGEX)(a,b,c,d),a},function(){var a,b,c;c=[];for(a in ab)b=ab[a],c.push(ab.hasOwnProperty(a)?function(a){return b.toString=function(){return"T."+a}}(a):void 0);return c}(),eb.struct=fb={},fb.define=function(a,b){var c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r;for(ab.string(a,"struct name"),ab.array(b,"fields"),p=[],o={},g=q=0,r=b.length;r>q;g=++q){e=b[g],ab.array(e,"field","field descriptor",b),ab.check(2<=e.length&&e.length<=3,"does not have length 2 or 3",e,"field descriptor"),l=ab.string(e[0],"field name","field descriptor",b),n=ab.nonnull(e[1],"field type","field descriptor",b),m=e.length<=2?{}:ab.nonnull(e[2],"map of field options","field descriptor",b);for(j in m)"init"!==j&&"initFn"!==j&&ab.fail("unknown option "+j,m,"field options","field descrptor",b);hb.call(m,"init")>=0&&hb.call(m,"initFn")>=0&&ab.fail("both 'init' and 'initFn' specified",m,"field options","field descriptor",b),i="initFn"in m?m.initFn:"init"in m?(h=m.init,function(a){return function(){return a}}(h)):null,c={name:l,type:n,initFn:i},f="undefined"!=typeof Z&&null!==Z?new Z(c):c,p.push(f),o[l]=f}return k="initializer for "+a+" (fields "+function(){var a,b,c;for(c=[],a=0,b=p.length;b>a;a++)e=p[a],c.push(e.name);return c}().join(", ")+")",d=function(a){var b,c,e;ab.defined(a,"x","initializer");for(l in a)b=a[l],a.hasOwnProperty(l)&&ab.check(null!=o[l],function(){return"has an unexpected field "+l},a,"initializer");for(c=0,e=p.length;e>c;c++)f=p[c],a[f.name]&&!a.hasOwnProperty(f.name)&&ab.fail("Has an indirect property "+f.name,a,"initializer"),a.hasOwnProperty(f.name)?(b=a[f.name],this[f.name]=ab.get_coerce_fn(f.type)(b)):null!=f.initFn?this[f.name]=f.initFn():ab.fail("lacks the field "+f.name,a,"initializer");return d.Type(this,"initializer",k,this),this},d.Type=function(b,c,e,g){var h,i,j;for(ab.defined(b,c,e,g),ab.check(b instanceof d,function(){return"is not an instance of "+a},b,c,e,g),i=0,j=p.length;j>i;i++)f=p[i],ab.check(b.hasOwnProperty(f.name),function(){return"lacks the field "+f.name},b,c,e,g),ab.get_T_fn(f.type)(b[f.name],f.name,e,g);for(l in b)h=b[l],b.hasOwnProperty(l)&&ab.check(null!=o[l],"has an unexpected field",l,c,e,g);return b},d.coerce=function(a){return a instanceof d?(d.Type(a),a):new d(a)},d.prototype.toString=function(){var a,b,c,d,e;for(b=this,a=[],d=0,e=p.length;e>d;d++)f=p[d],c=b[f.name],a.push(""+f.name+": "+(ab.is_object(c)&&ab.is_function(c.toString)?c.toString():JSON.stringify(c)));return"{"+a.join(", ")+"}"},d.prototype.toJSON=function(){var a,b,c,d;for(a=this,b=function(){return""+a},c=0,d=p.length;d>c;c++)f=p[c],ab.get_T_fn(f.type)(this[f.name],f.name,null,b);return this},d.fromJSON=function(b){var c,e,f;ab.simple_map(b,"input"),e=[];for(j in b)f=b[j],null==o[j]&&(e.push(""+j+": "+JSON.stringify(f)),delete b[j]);e.length>0&&console.info("Ignoring unknown fields while deserializing "+a+": "+e.join(", ")),c={};for(j in b)f=b[j],n=o[j].type,c[j]=null!=n.fromJSON?n.fromJSON(f):f;return new d(c)},d.toString=function(){return"struct "+a},d},Z=fb.define("StructField",[["name",ab.string],["type",ab.defined],["initFn",ab.defined]]),fb.toJSO=function(a){var b,c,d,e;if("object"!=typeof a)return a;if(ab.is_array(a))return function(){var c,d,e;for(e=[],c=0,d=a.length;d>c;c++)b=a[c],e.push(fb.toJSO(b));return e}();d={};for(c in a)e=a[c],a.hasOwnProperty(c)&&(d[c]=fb.toJSO(e));return d},fb.union_as_list=function(a,b){var c,d,e,f,g,h,i,j,k,l,m;for(ab.string(a,"union name"),ab.array(b,"variants"),d=function(){throw new Error("Use "+a+".from_array instead")},j={},i=[],k=function(b,c,e){var f;return f=fb.define(""+a+"."+b,e),f.prototype.tag=function(){return b},f.prototype.toString=function(){return""+a+"."+b+"("+JSON.stringify(this)+")"},f.prototype.toJSON=function(){var a,d,e,f,g,h;for(a=[b],g=0,h=c.length;h>g;g++)d=c[g],e=d[0],f=d[1],ab.get_T_fn(f)(this[e],e),a.push(this[e]);return a},f.from_array=function(d){var e,g,h,i,j,k,l;for(j="initializer for "+a,ab.array(d,"initializer",j),ab.check(d.length===c.length+1,"does not have length "+(c.length+1),d,"initializer",j),ab.check(d[0]===b,"does not have tag "+b,d,"initializer",j),e={_tag:b},h=k=0,l=c.length;l>k;h=++k)g=c[h],i=g[0],e[i]=d[h+1];return new f(e)},f.fromJSON=function(a){return a.length>c.length+1&&(a=a.slice(0,c.length+1)),f.from_array(a)},f.coerce=function(a){return a instanceof f?(f.Type(a),a):f.from_array(a)},j[b]=f,d[b]=f},l=0,m=b.length;m>l;l++)e=b[l],ab.array(e,"variant","variant descriptor",b),ab.check(2===e.length,"does not have length 2",e,"variant descriptor",b),h=ab.string(e[0],"tag","tag",b),f=ab.array(e[1],"fields","variant descriptor",b),g=f.slice(0),g.unshift(["_tag",ab.member([h])]),k(h,f,g),i.push(h);return c="initializer for "+a+" (variants "+i.join(", ")+")",d.from_array=function(b){var c,d;return d="initializer for "+a,ab.array(b,"initializer",d),ab.check(b.length>=1,"lacks a tag",b,"initializer",d),c=b[0],ab.string(c,"tag",d,b),ab.member(i)(c),j[c].from_array(b)},d.fromJSON=function(b){var c,d;return d="initializer for "+a,ab.array(b,"initializer",d),ab.check(b.length>=1,"lacks a tag",b,"initializer",d),c=b[0],ab.string(c,"tag",d,b),ab.member(i)(c),j[c].fromJSON(b)},d.Type=function(b,c,d,e){var f;return null==d&&(d=""+a+".Type"),ab.defined(b,c,d,e),ab.defined(b.tag,"tag",d,e),f=b.tag(),ab.string(f,"tag","initializer",b),ab.member(i)(f),j[f].Type(b,null,"object of type "+a),b},d.coerce=function(a){var b,c;for(c in j)if(b=j[c],a instanceof b)return b.Type(a),a;return d.from_array(a)},d.toString=function(){return"union "+a},d},eb.nonzero_int64_approximate_regex=new RegExp("^-?[1-9][0-9]{0,18}$"),eb.int64_max_str="9223372036854775807",eb.int64_min_str="-9223372036854775808",eb.int64_string_less_than=function(a,b){var c,d,e;return a===b?!1:(d="0"===a.charAt(0),e="0"===b.charAt(0),d&&!e?!0:e&&!d?!1:(c=a.length===b.length?a>b:a.length>b.length,d&&e?c:!c))},eb.is_valid_int64_string=function(a){return ab.is_string(a)?"0"===a?!0:eb.nonzero_int64_approximate_regex.test(a)?"-"===a.charAt(0)?a.length<eb.int64_min_str.length||a<=eb.int64_min_str:a.length<eb.int64_max_str.length||a<=eb.int64_max_str:!1:!1},eb.is_wrapped_atomic_field_value=function(a){var b,c,d,e;if(!ab.is_simple_map(a))return!1;if(b=Object.keys(a),1!==b.length)return!1;switch(b[0]){case"B":return ab.is_string(a.B);case"N":return"nan"===(d=a.N)||"+inf"===d||"-inf"===d;case"I":case"T":return c=null!=(e=a.I)?e:a.T,eb.is_valid_int64_string(c);default:return!1}},eb.is_atomic_field_value=function(a){return ab.is_bool(a)||ab.is_json_number(a)||ab.is_string(a)||eb.is_wrapped_atomic_field_value(a)},eb.is_list_value=function(a){var b,c,d;if(ab.is_array(a)){for(c=0,d=a.length;d>c;c++)if(b=a[c],!eb.is_atomic_field_value(b))return!1;return!0}return!1},eb.is_compound_field_value=function(a){return eb.is_atomic_field_value(a)||eb.is_list_value(a)},eb.atomic_field_value=function(a,b,c,d){return null==c&&(c="atomic field value"),ab.check(eb.is_atomic_field_value(a),"is not an atomic field value",a,b,c,d),a},eb.list_value=function(a,b,c,d){return null==c&&(c="list value"),ab.arrayOf(eb.atomic_field_value)(a,b,c,d),a},eb.compound_field_value=function(a,b,c,d){return null==c&&(c="field value"),ab.is_array(a)?eb.list_value(a,b,c,d):eb.atomic_field_value(a,b,c,d)},eb.FieldOp=D=fb.union_as_list("FieldOp",[["P",[["value",eb.compound_field_value]]],["D",[]],["LC",[]],["LP",[["at",ab.uint],["value",eb.atomic_field_value]]],["LI",[["before",ab.uint],["value",eb.atomic_field_value]]],["LD",[["at",ab.uint]]],["LM",[["from",ab.uint],["to",ab.uint]]]]),eb.datadict=ab.simple_typed_map("datadict",ab.field_name,eb.compound_field_value),eb.update_datadict=ab.simple_typed_map("update_datadict",ab.field_name,D),eb.Change=d=fb.union_as_list("Change",[["I",[["tid",ab.tid],["rowid",ab.rowid],["fields",eb.datadict]]],["U",[["tid",ab.tid],["rowid",ab.rowid],["updates",eb.update_datadict]]],["D",[["tid",ab.tid],["rowid",ab.rowid]]]]),eb.Delta=z=fb.define("Delta",[["rev",ab.uint],["changes",ab.arrayOf(d)],["nonce",ab.string]]),L=fb.define("ListDatastoresResponseItem",[["dsid",ab.string],["handle",ab.string],["rev",ab.uint],["info",ab.nullable(eb.datadict),{init:null}]]),K=fb.define("ListDatastoresResponse",[["token",ab.string],["datastores",ab.arrayOf(L)]]),J=fb.define("GetSnapshotResponseRow",[["tid",ab.string],["rowid",ab.string],["data",eb.datadict]]),I=fb.define("GetSnapshotResponse",[["rev",ab.uint],["rows",ab.arrayOf(J)]]),g=fb.define("CreateDatastoreResponse",[["handle",ab.string],["rev",ab.uint],["created",ab.bool]]),G=fb.define("GetDatastoreResponse",[["handle",ab.string],["rev",ab.uint]]),y=fb.define("DeleteDatastoresResponse",[]),T=fb.define("PutDeltasResponse",[["rev",ab.nullable(ab.uint),{init:null}],["conflict",ab.nullable(ab.string),{init:null}]]),H=fb.define("GetDeltasResponse",[["deltas",ab.nullable(ab.arrayOf(z)),{init:null}],["notfound",ab.nullable(ab.string),{init:null}]]),b=fb.define("AwaitResponseDeltas",[["deltas",ab.simple_typed_map("deltas map",ab.string,H)]]),eb.AwaitResponse=a=fb.define("AwaitResponse",[["get_deltas",ab.nullable(b),{init:null}],["list_datastores",ab.nullable(K),{init:null}]]),k=function(){function a(a){this.obj_manager=b(a)}var b;return b=function(a){var b,c;return c=new C(a),b=new R(c,a)},a.changeFromArray=function(a){return d.from_array(a)},a.prototype.close=function(){return this.obj_manager.destroy()},a.prototype.get_or_create=function(a,b){var c=this;return this.obj_manager.flob_client.get_or_create_db(a,function(d,e){return d?b(d):c.obj_manager.open(a,e.handle,function(a,c){return null!=a?b(a):b(null,c,e.created)})})},a.prototype.create=function(a,b,c){var d=this;return this.obj_manager.flob_client.create_db(a,b,function(b,e){return b?c(b):d.obj_manager.open(a,e.handle,function(a,b){return null!=a?c(a):c(null,b,e.created)})})},a.prototype.get_by_dsid=function(a,b){var c=this;return this.obj_manager.flob_client.get_db(a,function(d,e){return d?b(d):c.obj_manager.open(a,e.handle,function(a,c){return null!=a?b(a):b(null,c)})})},a.prototype.get=function(a,b){return this.obj_manager.open(a,function(a,c){return null!=a?b(a):b(null,c)})},a}(),c=function(){function a(){this.min_delay_millis=500,this.max_delay_millis=9e4,this.base=1.5,this._failures=0,this.log=!1}return a.prototype.set_log=function(a){this.log=a},a.prototype.set_max_delay_millis=function(a){this.max_delay_millis=a},a.prototype.get_backoff_millis=function(){var a,b;return this._failures+=1,b=Math.min(this.max_delay_millis,this.min_delay_millis*Math.pow(this.base,this._failures-1)),a=(.5+Math.random())*b,this.log&&console.log("get_backoff_millis: failures="+this._failures+", target_delay_millis="+b+", delay_millis="+a),a},a.prototype.reset=function(){return this._failures=0},a}(),Y=function(){function a(){this.backoff=new c}var b,d;return d=6e4,b=0,a.prototype.run=function(a,b,c){var e,f,g,h,i,j,k,l=this;return g=null!=(j=b.do_retry)?j:function(){return!0},h=null!=(k=b.giveup_after_ms)?k:d,i=Date.now()+h,f=!1,e=function(){return f?void 0:a(function(){var a,b,d;return a=arguments[0],b=2<=arguments.length?jb.call(arguments,1):[],f?void 0:a&&g(a)?Date.now()>i?(console.error("Giving up due to error",a),c(a)):(d=l.backoff.get_backoff_millis(),console.warn("Retrying in "+d+" ms due to error",a),setTimeout(e,d)):c.apply(null,[a].concat(jb.call(b)))})},e(),function(){return f=!0}},a}(),F=function(){function a(a){this.client=a,this._retry=new Y}var b,c;return c=10,b=2419200,a.prototype._run_with_retries=function(a,b,c){var d;return d={giveup_after_ms:1e3*a,do_retry:function(a){var b;return 0===a.status||500<=(b=a.status)&&600>b}},this._retry.run(c,d,b)},a.prototype.delete_db=function(a,b){var d=this;return this._run_with_retries(c,b,function(b){return d.client._deleteDatastore(a,function(a){return b(null!=a?a:null)})})},a.prototype.list_dbs=function(a){var c=this;return this._run_with_retries(b,a,function(a){return c.client._listDatastores(function(b,c){return null!=b?a(b):a(null,c)})})},a.prototype.get_or_create_db=function(a,b){var d=this;return this._run_with_retries(c,b,function(b){return d.client._getOrCreateDatastore(a,function(a,c){return null!=a?b(a):b(null,c)})})},a.prototype.create_db=function(a,b,d){var e=this;return this._run_with_retries(c,d,function(c){return e.client._createDatastore(a,b,function(a,b){return null!=a?c(a):c(null,b)})})},a.prototype.get_db=function(a,b){var d=this;return this._run_with_retries(c,b,function(b){return d.client._getDatastore(a,function(a,c){return null!=a?b(a):b(null,c)})})},a.prototype.await=function(a,c,d){var e,f=this;return e=this._run_with_retries(b,d,function(b){return f.client._datastoreAwait(a,c,function(a,c){return null!=a?b(a):b(null,c)})})},a.prototype.put_delta=function(a,c,d){var e,f=this;return e=function(a,b){return d(b)},this._run_with_retries(b,d,function(b){return f.client._putDelta(a,c,function(a){return b(null!=a?a:null)})})},a.prototype.get_snapshot=function(a,b){var d=this;return this._run_with_retries(c,b,function(b){return d.client._getSnapshot(a,function(a,c){return null!=a?b(a):b(null,c)})})},a}(),M=function(){function a(a,b,c){this.changes=a,this.undo_extras=b,this.finalized=null!=c?c:!1}var b;return b=function(a,b){var c,e,f,g,h;switch(g=null,e=null,a.tag()){case"I":g="D";break;case"U":g="U",e={};for(f in b)h=b[f],e[f]=null==h?["D"]:["P",h];break;case"D":g="I",e=eb.clone(b);break;default:throw new Error("Unknown change tag: "+a.tag())}return c=[g,a.tid,a.rowid],null!=e&&c.push(e),d.from_array(c)},a.prototype.add_change=function(a,b){return db(!this.finalized,"add_change: already finalized"),this.changes.push(a),this.undo_extras.push(b)},a.prototype["package"]=function(a,b){return db(this.finalized,"package: not finalized"),new z({changes:this.changes.slice(),nonce:a,rev:b})},a.prototype.inverse_changes=function(){var a,c,d,e,f,g;for(d=[],g=this.changes,c=e=0,f=g.length;f>e;c=++e)a=g[c],d.push(b(a,this.undo_extras[c]));return d.reverse(),d},a}(),eb.value_size=function(a){var b,c,d,e;if(ab.is_string(a))return A.Util.countUtf8Bytes(a);if(ab.is_bool(a))return 0;if(ab.is_number(a))return 0;if(ab.is_array(a)){for(b=20*a.length,d=0,e=a.length;e>d;d++)c=a[d],b+=eb.value_size(c);return b}if("object"!=typeof a)throw new Error("Unexpected value: "+a);if(null!=a.I)return 0;if(null!=a.N)return 0;if(null!=a.B)return Math.ceil(3*a.B.length/4);if(null!=a.T)return 0;throw new Error("Unexpected object: "+JSON.stringify(a))},P=102400,N=10485760,O=2097152,eb.size_difference_for_field_op=function(a,b,c){var d,e,f,g;switch(d=a.get(b),c.tag()){case"P":return e=c.value,d?eb.value_size(e)-eb.value_size(d):100+eb.value_size(e);case"D":return null!=d?-(100+eb.value_size(d)):0;case"LC":return db(null==d,"can't create list for field that already exists"),100;case"LP":return db(ab.is_array(d),"LP on non-list"),db(0<=(f=c.at)&&f<d.length,"bad index for LP"),eb.value_size(c.value)-eb.value_size(d[c.at]);case"LI":return null!=d?20+eb.value_size(c.value):120+eb.value_size(c.value);case"LD":return db(ab.is_array(d),"LD on non-list"),db(0<=(g=c.at)&&g<d.length,"bad index for LD"),-(20+eb.value_size(d[c.at]));case"LM":return 0;default:throw new Error("unexpected field op type "+c.tag())}},eb.size_difference_for_change=function(a,b){var c,d,e,f,g,h,i;return g=function(){var g,j;switch(b.tag()){case"I":f=100,g=b.fields;for(c in g)i=g[c],f+=100+eb.value_size(i);return f;case"U":e=a.get_record(b.tid,b.rowid),ab.assert(null!=e,function(){return"record not found: "+JSON.stringify(b)}),h=0,j=b.updates;for(c in j)d=j[c],h+=eb.size_difference_for_field_op(e,c,d);return h;case"D":return-a.get_record(b.tid,b.rowid)._size;default:throw new Error("unrecognized tag "+b.tag())}}()},W=function(){function a(a,b,c){var d,e;this._tid=a,this._rid=b,null==c&&(c={}),this._fields={},this._size=100;for(d in c)e=c[d],this._fields[d]=eb.clone(e),this._size+=100+eb.value_size(e)}return a.prototype.get=function(a){return this._fields[a]},a.prototype.get_all=function(){return this._fields},a.prototype.put=function(a,b){return void(null!=b?this._fields[a]=eb.clone(b):delete this._fields[a])},a.prototype.apply_field_op=function(a,b){var c,d,e,f,g,h,i;switch(c=this._fields[a],b.tag()){case"P":this._fields[a]=eb.clone(b.value);break;case"D":delete this._fields[a];break;case"LC":db(null==c,"can't create list for field that already exists"),this._fields[a]=[];break;case"LP":db(ab.is_array(c),"LP on non-list"),db(0<=(e=b.at)&&e<c.length,"bad index for LP"),c[b.at]=eb.clone(b.value);break;case"LI":null!=c?(db(ab.is_array(c),"LI on non-list"),db(0<=(f=b.before)&&f<=c.length,"bad index for LI"),c.splice(b.before,0,eb.clone(b.value))):(db(0===b.before,"bad index for LI on nonexistent field"),this._fields[a]=[eb.clone(b.value)]);break;case"LD":db(ab.is_array(c),"LD on non-list"),db(0<=(g=b.at)&&g<c.length,"bad index for LD"),c.splice(b.at,1);break;case"LM":db(ab.is_array(c),"LM on non-list"),db(0<=(h=b.from)&&h<c.length,"bad from index for LM"),db(0<=(i=b.to)&&i<c.length,"bad to index for LM"),d=c[b.from],c.splice(b.from,1),c.splice(b.to,0,d);break;default:throw new Error("unexpected field op type "+b.tag())}return void 0},a}(),bb=function(){function a(){this._records={}}return a.prototype.get=function(a){return this._records[a]},a.prototype.put=function(a,b){return void(null!=b?this._records[a]=b:delete this._records[a])},a.prototype.has=function(a){return null!=this._records[a]},a.prototype.is_empty=function(){var a;for(a in this._records)return!1;return!0},a.prototype.list_record_ids=function(){var a,b;b=[];for(a in this._records)b.push(a);return b},a}(),j=function(){function a(a,b){var c,d,e,f,g,h;this._tables={},this._size=1e3;for(h in b){e=b[h],g=this._get_table(h);for(f in e)c=e[f],d=new W(h,f,c),this._check_record_size(a,h,f,d._size),g.put(f,d),this._size+=d._size}this._check_datastore_size(a,this._size)}return a.from_get_snapshot_resp=function(b){var c,d,e,f,g,h;for(c={},h=b.rows,e=0,f=h.length;f>e;e++)d=h[e],c[g=d.tid]||(c[g]={}),c[d.tid][d.rowid]=d.data;return new a(!1,c)},a.prototype._size_limit_exceeded=function(a,b){var c;if(a)throw c=new Error(b),c.code="SIZE_LIMIT_EXCEEDED",c;return void console.warn(b)},a.prototype._check_record_size=function(a,b,c,d){return void(d>P&&this._size_limit_exceeded(a,"Record ("+b+", "+c+") too large: "+d+" bytes"))},a.prototype._check_datastore_size=function(a,b){return void(b>N&&this._size_limit_exceeded(a,"Datastore too large: "+b+" bytes"))},a.prototype._TEST_calculate_size_from_scratch=function(){var a,b,c,d,e,f,g,h,i,j,k,l;d=0,j=this._tables;for(f in j)for(e=j[f],k=e.list_record_ids(),h=0,i=k.length;i>h;h++){c=k[h],b=e.get(c),d+=100,l=b.get_all();for(a in l)g=l[a],d+=100+eb.value_size(g)}return d},a.prototype.raw_data=function(){var a,b,c,d,e,f,g,h;a={},g=this._tables;for(d in g)for(c=g[d],a[d]={},h=c.list_record_ids(),e=0,f=h.length;f>e;e++)b=h[e],a[d][b]=eb.clone(c.get(b).get_all());return a},a.prototype.get_record=function(a,b){var c;return null!=(c=this._tables[a])?c.get(b):void 0},a.prototype.apply_change=function(a,b){var c,d,e;switch(c=eb.size_difference_for_change(this,b),c>=0&&this._check_datastore_size(a,this._size+c),b.tag()){case"I":this._check_record_size(a,b.tid,b.rowid,c),e=this._apply_insert(b);break;case"U":d=this.get_record(b.tid,b.rowid),ab.assert(null!=d,function(){return"apply_change: record does not exist: "+JSON.stringify(b)}),c>=0&&this._check_record_size(a,b.tid,b.rowid,d._size+c),e=this._apply_update(d,b),d._size+=c;break;case"D":e=this._apply_delete(b);break;default:throw new Error("unrecognized tag "+b.tag())}return this._size+=c,e},a.prototype._get_table=function(a){return null==this._tables[a]&&(this._tables[a]=new bb),this._tables[a]},a.prototype._apply_insert=function(a){var b,c;return c=this._get_table(a.tid),ab.assert(!c.has(a.rowid),function(){return"_apply_insert: record already exists: "+JSON.stringify(a)}),b=new W(a.tid,a.rowid,a.fields),c.put(a.rowid,b),null},a.prototype._apply_update=function(a,b){var c,d,e,f,g,h,i;f={};try{h=b.updates;for(d in h)e=h[d],g=eb.clone(null!=(i=a.get(d))?i:null),a.apply_field_op(d,e),f[d]=g}catch(j){c=j;for(d in f)g=f[d],a.put(!1,d,g);throw c}return f},a.prototype._apply_delete=function(a){var b,c,d;return d=this._get_table(a.tid),ab.assert(d.has(a.rowid),function(){return"_apply_delete: record does not exist: "+JSON.stringify(a)}),c=d.get(a.rowid),b=eb.clone(c.get_all()),d.put(a.rowid,null),d.is_empty()&&delete this._tables[a.tid],b},a.prototype.query=function(a,b){var c,d;return d=this._tables[a],null==d?null:(c=d.get(b),null==c?null:eb.clone(c.get_all()))
},a.prototype.list_tables=function(){var a,b;return a=function(){var a;a=[];for(b in this._tables)a.push(b);return a}.call(this),a.sort(),a},a.prototype.list_rows_for_table=function(a){var b,c;return c=this._tables[a],null==c?[]:(b=c.list_record_ids(),b.sort(),b)},a.prototype.size=function(){return this._size},a}(),Q=function(){function a(a,b,c,d,e,f){this.dbid=a,this.handle=b,this.datastore_model=c,this.resolver=d,this.sync_state=e,this.flob_client=f,this.syncStateChanged=new A.Util.EventSource,this._deleted=!1,this._open=!0,this._commit_queue=new $}return a.fresh_managed_datastore=function(b,c,d,e,f,g){var h,i;return h=eb.randomWeb64String(10),i=new _(h,null,e,[],[]),new a(b,c,d,f,i,g)},a.prototype.get_dsid=function(){return this.dbid},a.prototype.get_handle=function(){return this.handle},a.prototype.is_deleted=function(){return this._deleted},a.prototype.mark_deleted=function(){return this._deleted=!0},a.prototype.open=function(){if(this._open)throw new Error("Attempt to open datastore multiple times");return this._open=!0},a.prototype.close=function(){if(!this._open)throw new Error("Attempt to close datastore multiple times");return this._open=!1},a.prototype._do_sync=function(){var a,b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r,s,t,u,v,w;if(0===this.sync_state.server_deltas.length)return{};for(e=this.resolver.resolve(this.sync_state.unsynced_deltas,this.sync_state.server_deltas),d=e.rebased_deltas,a=e.affected_records,f=this.sync_state.unsynced_deltas.slice().reverse(),h=0,l=f.length;l>h;h++)for(c=f[h],t=c.inverse_changes(),i=0,m=t.length;m>i;i++)b=t[i],this.datastore_model.apply_change(!1,b);for(u=this.sync_state.server_deltas,j=0,n=u.length;n>j;j++)for(c=u[j],v=c.changes,k=0,o=v.length;o>k;k++)b=v[k],this.datastore_model.apply_change(!1,b);for(r=0,p=d.length;p>r;r++)for(c=d[r],c.undo_extras=[],w=c.changes,s=0,q=w.length;q>s;s++)b=w[s],g=this.datastore_model.apply_change(!1,b),c.undo_extras.push(g);return this.sync_state.update_unsynced_deltas(d),a},a.prototype._do_commit=function(){var a,b=this;return this.sync_state.delta_pending()||(a=this.sync_state.get_next_commit(),null==a)?void 0:this._commit_queue.request(function(){return b.flob_client.put_delta(b.handle,a,function(){return b._commit_queue.finish()})})},a.prototype._apply_and_queue_local_change=function(a,b){var c;return c=this.datastore_model.apply_change(a,b),void this.sync_state.add_unsynced_change(b,c)},a.prototype._update_mtime=function(){return null},a.prototype.perform_local_change=function(a){return this._apply_and_queue_local_change(!0,a),this._update_mtime(),this.syncStateChanged.dispatch(null)},a.prototype.sync=function(){var a;return this.has_unfinalized_changes&&this.sync_state.finalize(),a=this._do_sync(),this._do_commit(),a},a.prototype.get_outgoing_delta_count=function(){return this.sync_state.unsynced_deltas.length},a.prototype.get_incoming_delta_count=function(){return this.sync_state.server_deltas.length},a.prototype.has_unfinalized_changes=function(){return this.sync_state.has_unfinalized_changes()},a.prototype.receive_server_delta=function(a){return this.syncStateChanged.dispatch(this.sync_state.receive_server_delta(a)?null:null)},a.prototype.query=function(a,b){return this.datastore_model.query(a,b)},a.prototype.list_tables=function(){var a;return function(){var b,c,d,e;for(d=this.datastore_model.list_tables(),e=[],b=0,c=d.length;c>b;b++)a=d[b],":info"!==a&&e.push(a);return e}.call(this)},a.prototype.list_rows_for_table=function(a){return this.datastore_model.list_rows_for_table(a)},a}(),_=function(){function a(a,b,c,d,e){this.last_nonce=a,this.pending_delta=b,this.last_rev=c,this.unsynced_deltas=d,this.server_deltas=e,ab.uint(this.last_rev,"last_rev")}return a.prototype.is_current=function(){return 0===this.unsynced_deltas.length&&0===this.server_deltas.length},a.prototype.add_unsynced_change=function(a,b){var c;return c=this.unsynced_deltas.length,0===c||this.unsynced_deltas[c-1].finalized?this.unsynced_deltas.push(new M([a],[b])):this.unsynced_deltas[c-1].add_change(a,b)},a.prototype._compact_deltas=function(){var a,b,c,d,e,f,g,h,i,j,k,l,m,n;if(d=this.unsynced_deltas.length,!(1>=d)){for(b=[],f=[],c=g=0,l=d-1;l>=0?l>g:g>l;c=l>=0?++g:--g){for(m=this.unsynced_deltas[c].changes,h=0,j=m.length;j>h;h++)a=m[h],b.push(a);for(n=this.unsynced_deltas[c].undo_extras,i=0,k=n.length;k>i;i++)e=n[i],f.push(e)}return this.unsynced_deltas=[new M(b,f,!0),this.unsynced_deltas[d-1]]}},a.prototype.get_next_commit=function(){var a,b,c;return db(null==this.pending_delta,"delta pending"),a=this.unsynced_deltas.length,0===a?null:(this._compact_deltas(),b=this.unsynced_deltas[0],b.finalized?(c=this.last_nonce,this.pending_delta=b["package"](c,this.last_rev),this.pending_delta):null)},a.prototype.clear_pending=function(){return this.pending_delta=null},a.prototype.delta_pending=function(){return null!=this.pending_delta},a.prototype.has_unfinalized_changes=function(){var a,b;return b=this.unsynced_deltas.length,0===b?!1:(a=this.unsynced_deltas[b-1],!a.finalized)},a.prototype.finalize=function(){var a;return this.has_unfinalized_changes()?(a=this.unsynced_deltas[this.unsynced_deltas.length-1],db(!a.finalized,"last delta already finalized"),a.finalized=!0):void 0},a.prototype.update_unsynced_deltas=function(a){return this.unsynced_deltas=a,this.last_rev+=this.server_deltas.length,this.server_deltas=[]},a.prototype.is_ours=function(a){return this.last_nonce===a.nonce},a.prototype.ack=function(a){return db(this.is_ours(a),"not ours"),db(null!=this.pending_delta,"no pending delta"),db(0===this.server_deltas.length,"server deltas exist"),this.pending_delta=null,this.unsynced_deltas.shift(),this.last_rev++},a.prototype.receive_server_delta=function(a){var b,c;return c=this.server_deltas.length,b=c>0?this.server_deltas[c-1].rev+1:this.last_rev,db(a.rev<=b,"was expecting rev "+b+", but got "+a.rev+" instead!"),a.rev<b?(console.warn("received old delta!"),!1):this.is_ours(a)?(this.ack(a),!1):(this.server_deltas.push(a),this.pending_delta=null,!0)},a}(),eb.DatastoreModel=j,S=function(){function a(a){this.update_manager=a,this.cancelled=!1,this.cancel_fn=null}return a.prototype.cancel=function(){return null!=this.cancel_fn&&this.cancel_fn(),this.cancelled=!0},a.prototype.poll=function(){var a,b=this;return(a=function(){var c;return b.cancelled?void 0:(c=eb.clone(b.update_manager._handle_version_map),b.cancel_fn=b.update_manager.flob_client.await(c,b.update_manager._last_dslist_token,function(d,e){var f,g,h,i,j,k,l,m,n,o;if(b.cancel_fn=null,d)return 0===d.status?(console.log("await deltas failed (offline):",d),setTimeout(a,1e4)):d.status&&500<=(m=d.status)&&599>=m?(console.log("server error:",d),setTimeout(a,2e3)):(console.error("Got error in longpoll:",d),setTimeout(a,1e4));if(null!=e.get_deltas){n=e.get_deltas.deltas;for(i in n)if(g=n[i],null!=g.notfound)b.update_manager._data_queue.push({handle:i,notfound:g.notfound}),delete b.update_manager._handle_version_map[i];else if(null!=g.deltas){for(o=g.deltas,k=0,l=o.length;l>k;k++)h=o[k],b.update_manager._data_queue.push({handle:i,delta:h});j=c[i]+g.deltas.length,f=b.update_manager._handle_version_map[i],null!=f&&(b.update_manager._handle_version_map[i]=Math.max(f,j))}}return null!=e.list_datastores&&(b.update_manager._last_dslist_token=e.list_datastores.token,b.update_manager._data_queue.push({dslist:e.list_datastores})),setTimeout(a,0)}))})()},a}(),C=function(){function a(a){this.flob_client=a,this._data_queue=null,this._handle_version_map={},this._last_dslist_token=".",this._pending_poll=null,this._running=!1}return a.prototype.run=function(a){return this._data_queue=new f(a),this._running=!0,this._do_longpoll()},a.prototype.stop=function(){return this._pending_poll?this._pending_poll.cancel():void 0},a.prototype.add_poll=function(a,b){var c,d;return db(this._running,"update manager is not running"),c=this._handle_version_map[a],d=b,null!=c&&(d=Math.max(b,c)),this._handle_version_map[a]=d,this._do_longpoll()},a.prototype.remove_poll=function(a){return db(this._running,"update manager is not running"),a in this._handle_version_map?(delete this._handle_version_map[a],this._do_longpoll()):void 0},a.prototype._do_longpoll=function(){return db(this._running,"update manager is not running"),this._pending_poll&&(this._pending_poll.cancel(),this._pending_poll=null),this._pending_poll=new S(this),this._pending_poll.poll()},a}(),R=function(){function a(a,b){this.update_manager=a,this.flob_client=b,this.update_manager.run(this._handle_server_update.bind(this)),this._cached_objects={},this._dslist_listener=null,this._handle_to_dsid_map={}}return a.prototype.destroy=function(){var a;for(a in this._cached_objects)this._cached_objects[a].close();return this.update_manager.stop()},a.prototype.set_dslist_listener=function(a){return this._dslist_listener=a},a.prototype._evict=function(a){var b;return b=this._handle_to_dsid_map[a],null!=b?(delete this._handle_to_dsid_map[a],b in this._cached_objects&&this._cached_objects[b].mark_deleted(),this.update_manager.remove_poll(a)):void 0},a.prototype.close=function(a){var b;if(a in this._cached_objects)return b=this._cached_objects[a].get_handle(),this._cached_objects[a].close();throw new Error("Attempt to close unknown datastore: "+a)},a.prototype._handle_server_update=function(a,b){var c,d,e;return a.dslist?(this._dslist_listener&&this._dslist_listener(a.dslist),b(null)):(e=a.handle,c=this._handle_to_dsid_map[e],null==c?(console.log("unknown handle "+e+" (maybe datastore was evicted)",a,this._handle_to_dsid_map,this._cached_objects),b(null)):(d=a.delta,null!=a.notfound?(this._evict(e),b(null)):this._retrieve(c,e,function(a,c){return a?b(a):(c.receive_server_delta(d),b(null))})))},a.prototype.open=function(a,b,c){return this._cached_objects[a]&&this._cached_objects[a].open(),this._retrieve(a,b,c)},a.prototype._retrieve=function(a,b,c){var d,e=this;return d=this._cached_objects[a],null!=d?c(null,d):(this._handle_to_dsid_map[b]=a,this.flob_client.get_snapshot(b,function(d,f){var g,h,i;return null!=d?c(d):null!=e._cached_objects[a]?c(null,e._cached_objects[a]):(g=j.from_get_snapshot_resp(f),i=new x,h=Q.fresh_managed_datastore(a,b,g,f.rev,i,e.flob_client),e.update_manager.add_poll(b,h.sync_state.last_rev),e._cached_objects[a]=h,c(null,h))}))},a}(),eb.FieldOpTransformer=E=function(){function a(a){var e,f,g,h,j,k,l,m,n,r,s,t=this;for(this.rule_name=null!=a?a:"default",this.precedence=d[this.rule_name],this._transforms={},g=0,k=c.length;k>g;g++)f=c[g],this._transforms[f]={};for(s=["P","D"],h=0,l=s.length;l>h;h++)for(f=s[h],j=0,m=b.length;m>j;j++)e=b[j],this._transforms[f][e]=o,this._transforms[e][f]=p;for(r=0,n=b.length;n>r;r++)e=b[r],"LC"===e?this._transforms.LC.LC=function(){return[null,null]}:(this._transforms.LC[e]=p,this._transforms[e].LC=o);this._transforms.P.P=function(a,b){var c;return c=t.precedence(a.value,b.value),"left"===c?[a,null]:[null,b]},this._transforms.P.D=function(a,b){var c;return c=t.precedence(a.value,null),"left"===c?[a,null]:[null,b]},this._transforms.D.P=function(a,b){var c;return c=t.precedence(null,b.value),"left"===c?[a,null]:[null,b]},this._transforms.D.D=function(a,b){var c;return c=t.precedence(null,null),"left"===c?[a,null]:[null,b]},this._transforms.LP.LP=function(a,b){var c;return a.at!==b.at?[a,b]:(c=t.precedence(a.value,b.value),"left"===c?[a,null]:[null,b])},this._transforms.LP.LI=function(a,b){var c;return c=i(a),c.at+=b.before<=a.at?1:0,[c,b]},this._transforms.LP.LD=function(a,b){var c;return a.at===b.at?[null,b]:(c=i(a),c.at-=b.at<a.at?1:0,[c,b])},this._transforms.LP.LM=function(a,b){var c;return c=i(a),a.at===b.from?c.at=b.to:(c.at-=b.from<c.at?1:0,c.at+=b.to<=c.at?1:0),[c,b]},this._transforms.LI.LP=q(this._transforms.LP.LI),this._transforms.LI.LI=function(a,b){var c,d,e;return e=[i(a),i(b)],c=e[0],d=e[1],a.before<b.before?d.before+=1:c.before+=1,[c,d]},this._transforms.LI.LD=function(a,b){var c,d,e;return e=[i(a),i(b)],c=e[0],d=e[1],c.before-=b.at<a.before?1:0,d.at+=a.before<=b.at?1:0,[c,d]},this._transforms.LI.LM=function(a,b){var c,d,e,f;return f=[i(a),i(b)],d=f[0],e=f[1],a.before===b.to+1&&b.from<=b.to?[a,b]:a.before===b.to&&b.from>b.to?(d.before++,e.from++,[d,e]):(c=b.from<a.before?a.before-1:a.before,e.from+=a.before<=b.from?1:0,d.before=b.to<c?c+1:c,e.to+=c<=b.to?1:0,[d,e])},this._transforms.LD.LP=q(this._transforms.LP.LD),this._transforms.LD.LI=q(this._transforms.LI.LD),this._transforms.LD.LD=function(a,b){var c,d,e;return a.at===b.at?[null,null]:(e=[i(a),i(b)],c=e[0],d=e[1],a.at<b.at?d.at-=1:c.at-=1,[c,d])},this._transforms.LD.LM=function(a,b){var c,d,e;return a.at===b.from?(c=i(a),c.at=b.to,[c,null]):(e=[i(a),i(b)],c=e[0],d=e[1],c.at-=b.from<c.at?1:0,c.at+=b.to<=c.at?1:0,d.to+=d.from<d.to?1:0,d.from-=a.at<d.from?1:0,d.to-=a.at<d.to?1:0,d.to-=d.from<d.to?1:0,[c,d])},this._transforms.LM.LP=q(this._transforms.LP.LM),this._transforms.LM.LI=function(a,b){var c,d,e,f;return f=[i(a),i(b)],d=f[0],e=f[1],b.before===a.to+1&&a.from<=a.to?[a,b]:b.before===a.to&&a.from>a.to?(d.from++,d.to++,[d,e]):(c=a.from<b.before?b.before-1:b.before,d.from+=b.before<=a.from?1:0,e.before=a.to<c?c+1:c,d.to+=c<=a.to?1:0,[d,e])},this._transforms.LM.LD=q(this._transforms.LD.LM),this._transforms.LM.LM=function(a,b){var c,d,e,f,g,h,j,k,l,m,n;return a.from===b.from?a.to===b.to?[null,null]:b.from===b.to?[a,b]:(f=i(b),f.from=a.to,[null,f]):a.to===a.from?(e=i(a),e.from+=(b.to<=a.from)-(b.from<a.from),a.from===b.to&&b.from<b.to&&e.from--,e.to=e.from,[e,b]):b.to===b.from?(f=i(b),f.from+=(a.to<=b.from)-(a.from<b.from),f.to=f.from,[a,f]):(j=[i(a),i(b)],e=j[0],f=j[1],a.to===b.to&&a.from>a.to&&b.from>b.to?(e.to++,b.from>a.from?e.from++:f.from++,[e,f]):a.from===b.to&&b.from===a.to&&a.from<a.to?(f.from--,e.from++,[e,f]):a.from>a.to&&b.from<b.to&&b.to+1===a.to?[a,b]:(k=[a.to,a.from],g=k[0],c=k[1],g+=a.from<g?1:0,g-=b.from<g?1:0,g+=b.to<g?1:0,c-=b.from<c?1:0,c+=b.to<=c?1:0,g-=g>c?1:0,l=[b.to,b.from],h=l[0],d=l[1],h+=b.from<h?1:0,h-=a.from<h?1:0,h+=a.to<=h?1:0,d-=a.from<d?1:0,d+=a.to<=d?1:0,h-=h>d?1:0,m=[g,c],e.to=m[0],e.from=m[1],n=[h,d],f.to=n[0],f.from=n[1],[e,f]))}}var b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r,s,t;for(q=function(a){return db(null!=a),function(b,c){var d,e,f;return f=a(c,b),d=f[0],e=f[1],[e,d]}},e=["null","bool","num","str","blob","ts","list"],f={},k=s=0,t=e.length;t>s;k=++s)r=e[k],f[r]=k;return j=function(a){if(null==a)return"null";if(ab.is_bool(a))return"bool";if(null!=a.I||ab.is_number(a))return"num";if(ab.is_string(a))return"str";if(null!=a.B)return"blob";if(null!=a.T)return"ts";if(ab.is_array(a))return"list";throw new Error("Unrecognized value "+a)},n=function(a){return ab.is_number(a)||null!=a.I},g=function(a){return null!=a.I?parseInt(a.I):a},m=function(a,b){var c,d,e;for(c=d=0,e=a.length;e>=0?e>d:d>e;c=e>=0?++d:--d){if(c>=b.length)return!1;if(l(a[c],b[c]))return!0;if(l(b[c],a[c]))return!1}return b.length>a.length},a._is_less_than=l=function(a,b){var c,d;if(c=j(a),d=j(b),c!==d)return f[c]<f[d];if("null"===c)return!1;if("bool"===c)return b&&!a;if("num"===c)return null!=a.I&&null!=b.I?eb.int64_string_less_than(a.I,b.I):g(a)<g(b);if("str"===c)return b>a;if("blob"===c)return a.B<b.B;if("ts"===c)return parseInt(a.T,10)<parseInt(b.T,10);if("list"===c)return m(a,b);throw new Error("unknown type "+c)},a._compute_sum=h=function(a,b,c){var d,e,f,g,h,i;return d=null!=a.I&&null!=b.I&&null!=c.I,null!=a.I&&(a=parseInt(a.I)),null!=b.I&&(b=parseInt(b.I)),null!=c.I&&(c=parseInt(c.I)),g=0x8000000000000000,h=0x10000000000000000,i=0xfffffffffffff800,e=b-a,f=c+e,d&&(f>=g&&(f-=i),-g>f&&(f+=i),f={I:""+f}),f},p=function(a,b){return[null,b]},o=function(a){return[a,null]},c=["P","D","LC","LP","LI","LD","LM"],b=["LC","LP","LI","LD","LM"],a.copy=i=function(a){return D.from_array(JSON.parse(JSON.stringify(a)))},d={"default":function(){return"right"},remote:function(){return"right"},local:function(){return"left"},min:function(a,b){return l(a,b)?"left":"right"},max:function(a,b){return l(a,b)?"right":"left"},sum:function(){return"right"}},a.prototype.transform=function(a,b,c){var d,e,f,g,i;return null==c&&(c=null),"sum"===this.rule_name&&"P"===a.tag()&&"P"===b.tag()&&(null==c&&(c={I:"0"}),n(c)&&n(a.value)&&n(b.value))?(f=h(c,a.value,b.value),d=e=D.from_array(["P",f]),[d,e,b.value]):(g=this._transforms[a.tag()][b.tag()](a,b),i=function(){switch(b.tag()){case"P":return b.value;case"D":return null;default:return{L:!0}}}(),g.push(i),g)},a}(),eb.ChangeTransformer=e=function(){function a(){this._transform_rules={},this._default_transformer=new E}var b,c,e,f,g,h,i,j;for(b={},j=["default","local","remote","min","max","sum"],h=0,i=j.length;i>h;h++)e=j[h],b[e]=new E(e);return g=function(a){return db(null!=a),function(b,c){var d,e,f;return f=a(c,b),d=f[0],e=f[1],[e,d]}},c=function(a){return a instanceof Array?a.slice():a},f=function(a,b){return a.tid===b.tid&&a.rowid===b.rowid},a.is_no_op=function(a){var b,c,d;if("U"!==a.tag())return!1;d=a.updates;for(c in d)return b=d[c],!1;return!0},a.compact=function(a){var b,c,d,e;for(b=[],d=0,e=a.length;e>d;d++)c=a[d],this.is_no_op(c)||b.push(c);return b},a.prototype.set_field_transformer=function(a,c,d){var e;return null==(e=this._transform_rules)[a]&&(e[a]={}),this._transform_rules[a][c]=b[d]},a.prototype.get_field_transformer=function(a,c){var d;return a in this._transform_rules?null!=(d=this._transform_rules[a][c])?d:this._default_transformer:b["default"]},a.prototype.transform_ii=function(a,b){var e,g,h;return f(a,b)?(e=function(a){var b,e,f,g,h;f={},h=a.fields;for(e in h)g=h[e],f[e]=D.from_array(["P",c(g)]);return b=d.from_array(["U",a.tid,a.rowid,f]),b.undo_extra={},b},g=e(a),h=e(b),this.transform_uu(g,h)):[[a],[b]]},a.prototype.transform_iu=function(a,b){return f(a,b)?db(!1,"Couldn't have updated a row that hasn't been inserted yet!"):[[a],[b]]},a.prototype.transform_id=function(a,b){return f(a,b)?db(!1,"Couldn't have deleted a row that hasn't been inserted yet!"):[[a],[b]]},a.prototype.transform_ui=g(a.prototype.transform_iu),a.prototype.transform_uu=function(a,b){var c,e,g,h,i,j,k,l,m,n,o,p,q,r,s,t,u,v,w;if(!f(a,b))return[[a],[b]];r=[{},{}],m=r[0],n=r[1],l={},s=a.updates;for(g in s)c=s[g],g in b.updates?(e=b.updates[g],o=null!=(u=a.undo_extra[g])?u:null,p=this.get_field_transformer(a.tid,g),v=p.transform(c,e,o),h=v[0],i=v[1],q=v[2],null!=h&&(m[g]=h,l[g]=null!=q?q:null),null!=i&&(n[g]=i)):(m[g]=c,l[g]=null!=(t=a.undo_extra[g])?t:null);w=b.updates;for(g in w)e=w[g],g in a.updates||(n[g]=e);return j=d.from_array(["U",a.tid,a.rowid,m]),j.undo_extra=l,k=d.from_array(["U",b.tid,b.rowid,n]),[[j],[k]]},a.prototype.transform_ud=function(a,b){return f(a,b)?[[],[b]]:[[a],[b]]},a.prototype.transform_di=g(a.prototype.transform_id),a.prototype.transform_du=g(a.prototype.transform_ud),a.prototype.transform_dd=function(a,b){return f(a,b)?[[],[]]:[[a],[b]]},a}(),eb.DefaultResolver=x=function(){function a(){this._change_transformer=new e}return a.prototype.add_resolution_rule=function(a,b,c){return this._change_transformer.set_field_transformer(a,b,c)},a.prototype._transform_one=function(a,b){var c,d,f,g,h;return c=function(a){switch(a.tag()){case"I":return"i";case"U":return"u";case"D":return"d";default:throw new Error("unrecognized op type "+a.tag())}},g="transform_"+c(a)+c(b),h=this._change_transformer[g](a,b),d=h[0],f=h[1],d=e.compact(d),f=e.compact(f),[d,f]},a.prototype._transform_list=function(a,b){var c,d,e,f,g,h,i,j,k,l,m,n,o,p;if(0===a.length)return[[],b];if(0===b.length)return[a,[]];for(c=a[0],d=b[0],n=this._transform_one(c,d),f=n[0],g=n[1],o=this._transform_list(a.slice(1),g),e=o[0],g=o[1],j=0,l=e.length;l>j;j++)h=e[j],f.push(h);for(p=this._transform_list(f,b.slice(1)),f=p[0],i=p[1],k=0,m=i.length;m>k;k++)h=i[k],g.push(h);return[f,g]},a.prototype._resolve=function(a,b){var c,d,e,f,g,h,i;for(f=b.slice(),d=[],g=0,h=a.length;h>g;g++)e=a[g],i=this._transform_list(e,f),c=i[0],f=i[1],d.push(c);return[d,f]},a.prototype.resolve=function(a,b){var c,e,f,g,h,i,j,k,l,m,n,o,p,q,r,s,t,u,v,w,x,y,z,A,B,C,D,E,F,G,H,I;for(n=[],s=0,w=a.length;w>s;s++){for(k=a[s],e=[],G=k.changes,m=t=0,x=G.length;x>t;m=++t)g=G[m],i=d.from_array(JSON.parse(JSON.stringify(g))),i.undo_extra=eb.clone(k.undo_extras[m]),e.push(i);n.push(e)}for(q=[],u=0,y=b.length;y>u;u++)for(k=b[u],H=k.changes,v=0,z=H.length;z>v;v++)f=H[v],q.push(f);for(I=this._resolve(n,q),o=I[0],j=I[1],p=[],m=D=0,A=o.length;A>D;m=++D){for(h=o[m],r=null,l=a[m].finalized,E=0,B=h.length;B>E;E++)g=h[E],delete g.undo_extra;h.length>0&&p.push(new M(h,r,l))}for(c={},F=0,C=j.length;C>F;F++)f=j[F],f.tid in c||(c[f.tid]={}),c[f.tid][f.rowid]=!0;return{rebased_deltas:p,affected_records:c}},a}(),$=function(){function a(){this._waiting=[],this._running=!1}return a.prototype._run_next=function(){var a;this._running||this._waiting.length>0&&(a=this._waiting[0],this._waiting.shift(),this._running=!0,a())},a.prototype.request=function(a){return this._waiting.push(a),this._run_next()},a.prototype.finish=function(){return this._running=!1,setTimeout(this._run_next.bind(this),0)},a}(),f=function(){function a(a){this.consumer=a,this.items=[],this.sync_queue=new $}return a.prototype.consume=function(){var a=this;return this.sync_queue.request(function(){var b;return 0===a.items.length?a.sync_queue.finish():(b=a.items.shift(),a.consumer(b,function(b){if(b)throw b;return a.sync_queue.finish(),a.consume()}))})},a.prototype.push=function(a){return this.items.push(a),this.consume()},a.prototype.run=function(){return this.consume()},a}(),eb.clone=function(a){var b,c,d,e,f,g,h;if(a instanceof Array){for(h=[],f=0,g=a.length;g>f;f++)b=a[f],h.push(eb.clone(b));return h}if(null!=a&&"object"==typeof a){d={};for(c in a)e=a[c],d[c]=eb.clone(e);return d}return a},eb.WEB64_ALPHABET="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_",eb.randomElement=function(a){return a[Math.floor(Math.random()*a.length)]},eb.randomWeb64String=function(a){var b;return function(){var c,d;for(d=[],b=c=0;a>=0?a>c:c>a;b=a>=0?++c:--c)d.push(eb.randomElement(eb.WEB64_ALPHABET));return d}().join("")},eb.uint8ArrayFromBase64String=function(a){var b,c,d,e,f;for(a=a.replace("-","+").replace("_","/"),b=A.Util.atob(a),d=b.length,e=new Uint8Array(d),c=f=0;d>=0?d>f:f>d;c=d>=0?++f:--f)e[c]=b.charCodeAt(c);return e},eb.dbase64FromBase64=function(a){return a.replace(/[+]/g,"-").replace(/[/]/g,"_").replace(/[\=]+$/g,"")},eb.base64StringFromUint8Array=function(a){var b,c,d,e,f;for(c="",e=0,f=a.length;f>e;e++)b=a[e],c+=String.fromCharCode(b);return d=A.Util.btoa(c),eb.dbase64FromBase64(d)},eb.INT64_TAG="dbxInt64",eb.isInt64=function(a){var b;return a&&"object"==typeof a&&a.constructor===Number&&isFinite(a)?(b=a[eb.INT64_TAG],!ab.is_string(b)||"0"!==b&&!eb.nonzero_int64_approximate_regex.test(b)?!1:!0):!1},eb.validateInt64=function(a){var b,c;if(!a&&"object"==typeof a&&a.constructor===Number&&isFinite(a))throw new Error("Not a finite boxed number: "+a);if(c=a[eb.INT64_TAG],!ab.is_string(c)||"0"!==c&&!eb.nonzero_int64_approximate_regex.test(c))throw new Error("Missing or invalid tag in int64: "+c);if(b=parseInt(c,10),b!==Number(a))throw new Error("Tag in int64 does not match value "+Number(a)+": "+c);return a},eb.toDsValue=function(a,b){var c,d;if(null==b&&(b=!0),null===a||"undefined"==typeof a)throw new Error("Bad value: "+a);if(ab.is_string(a))return a;if(ab.is_bool(a))return a;if(ab.is_number(a)){if(null!=a[eb.INT64_TAG])return eb.validateInt64(a),{I:a[eb.INT64_TAG]};if(isFinite(a))return a;if(isNaN(a))return{N:"nan"};if(1/0===Number(a))return{N:"+inf"};if(Number(a)===-1/0)return{N:"-inf"};throw new Error("Unexpected number: "+a)}if(ab.is_array(a)){if(b)return function(){var b,c,e;for(e=[],b=0,c=a.length;c>b;b++)d=a[b],e.push(eb.toDsValue(d,!1));return e}();throw new Error("Nested array not allowed: "+JSON.stringify(a))}if(ab.is_date(a))return c=Math.round(a.getTime()),{T:""+c};if(ab.isUint8Array(a))return{B:eb.base64StringFromUint8Array(a)};throw new Error("Unexpected object: "+JSON.stringify(a))},eb.fromDsValue=function(a,b,c,d){if(ab.is_string(d))return d;if(ab.is_bool(d))return d;if(ab.is_number(d))return d;if(ab.is_array(d))return new A.Datastore.List(a,b,c);if("object"!=typeof d)throw new Error("Unexpected value: "+d);if(null!=d.I)return A.Datastore.int64(d.I);if(null==d.N){if(null!=d.B)return eb.uint8ArrayFromBase64String(d.B);if(null!=d.T)return new Date(parseInt(d.T,10));throw new Error("Unexpected object: "+JSON.stringify(d))}switch(d.N){case"nan":return 0/0;case"+inf":return 1/0;case"-inf":return-1/0;default:throw new Error("Unexpected object: "+JSON.stringify(d))}},eb.matchDsValues=function(a,b){var c,d,e,f,g;d=function(a,b){if(null==a)throw new Error("Unexpected object: "+a);return null==b?!1:c(a,b)},c=function(a,b){var c,e,f,g,h,i;if(eb.toDsValue(a),ab.is_string(a)&&ab.is_string(b))return String(a)===String(b);if(ab.is_bool(a)&&ab.is_bool(b))return"object"==typeof a&&(a=a.valueOf()),"object"==typeof b&&(b=b.valueOf()),Boolean(a)===Boolean(b);if(ab.is_number(a)&&(ab.is_number(b)||null!=b.N||null!=b.I))return b=eb.fromDsValue(void 0,void 0,void 0,b),a[eb.INT64_TAG]&&b[eb.INT64_TAG]?(g=[A.Datastore.int64(a),A.Datastore.int64(b)],a=g[0],b=g[1],String(a[eb.INT64_TAG])===String(b[eb.INT64_TAG])):isNaN(a)&&isNaN(b)?!0:Number(a)===Number(b);if(ab.is_array(a)&&ab.is_array(b)){if(a.length!==b.length)return!1;for(c=e=0,h=a.length-1;h>=0?h>=e:e>=h;c=h>=0?++e:--e)if(!d(a[c],b[c]))return!1;return!0}if(ab.is_date(a)&&(ab.is_date(b)||null!=b.T))return null!=b.T&&(b=eb.fromDsValue(void 0,void 0,void 0,b)),a-0===b-0;if(ab.isUint8Array(a)&&(ab.isUint8Array(b)||null!=b.B)){if(null!=b.B&&(b=eb.fromDsValue(void 0,void 0,void 0,b)),a.length!==b.length)return!1;for(c=f=0,i=a.length-1;i>=0?i>=f:f>=i;c=i>=0?++f:--f)if(a[c]!==b[c])return!1;return!0}return!1};for(e in a)if(g=a[e],f=d(g,b[e]),!f)return f;return!0},V=function(){function a(a){this._datastore=a,this._cache={}}return a.prototype.get=function(a,b){return null==this._cache[a]?null:this._cache[a][b]},a.prototype.getOrCreate=function(a,b){var c;return null==this._cache[a]&&(this._cache[a]={}),c=this._cache[a][b],null==c&&(c=this._cache[a][b]=new A.Datastore.Record(this._datastore,a,b)),c},a.prototype.remove=function(a,b){return delete this._cache[a][b],void(ab.is_empty(this._cache[a])&&delete this._cache[a])},a}(),B=function(){function a(){this._registered_handlers=[]}return a.prototype.register=function(a,b){return a.addListener(b),void this._registered_handlers.push([a,b])},a.prototype.unregister_all=function(){var a,b,c,d,e,f;for(e=this._registered_handlers,c=0,d=e.length;d>c;c++)f=e[c],b=f[0],a=f[1],b.removeListener(a);return void 0},a}(),A.Datastore.DatastoreInfo=function(){function a(a,b,c){this._dsid=a,this._handle=b,this._info_record_data=c}return a.prototype.toString=function(){return"Datastore.DatastoreInfo("+this._dsid+")"},a.prototype.getId=function(){return this._dsid},a.prototype.getHandle=function(){return this._handle},a.prototype.getTitle=function(){var a;return null!=(a=this._info_record_data)?a.title:void 0},a.prototype.getModifiedTime=function(){var a;return null!=(a=this._info_record_data)?a.mtime:void 0},a}(),A.Datastore.DatastoreListChanged=function(){function a(a){this._dsinfos=a}return a.prototype.toString=function(){return"Datastore.DatastoreListChanged("+this._dsinfos.length+" datastores)"},a.prototype.getDatastoreInfos=function(){return this._dsinfos},a}(),A.Datastore.impl.EventSourceWithInitialData=function(a){function b(a){this.options=a,b.__super__.constructor.call(this,a),this._have_event=!1,this._last_event=null,this._listenersChanged=new A.Util.EventSource}return ib(b,a),b.prototype._clearLastEvent=function(){return this._have_event=!1,this._last_event=null},b.prototype.addListener=function(a){var c;return c=b.__super__.addListener.call(this,a),this._have_event&&a(event),this._listenersChanged.dispatch(this._listeners),c},b.prototype.removeListener=function(a){var c;return c=b.__super__.removeListener.call(this,a),this._listenersChanged.dispatch(this._listeners),c},b.prototype.dispatch=function(a){return this._last_event=a,this._have_event=!0,b.__super__.dispatch.call(this,a)},b}(A.Util.EventSource),h="default",A.Datastore.DatastoreManager=function(){function a(a){var b=this;if(!a.isAuthenticated())throw new Error("DatastoreManager requires an authenticated Dropbox.Client!");this._flob_client=new F(a),this._datasync=new k(this._flob_client),this._dslist_initialized=!1,this.datastoreListChanged=new A.Datastore.impl.EventSourceWithInitialData,this.datastoreListChanged._listenersChanged.addListener(function(a){return 0!==a.length?b._init_live_dslist():void 0})}return a.prototype.datastoreListChanged=null,a.prototype.close=function(){return this._datasync.close()},a.prototype.toString=function(){return"Datastore.DatastoreManager()"},a.prototype._datastoreInfoFromListDatastoresResponseItem=function(a){var b,c,d,e,f;if(null!=a.info){b={},f=a.info;for(c in f)e=f[c],b[c]=ab.is_array(e)?function(){var a,b,c;for(c=[],a=0,b=e.length;b>a;a++)d=e[a],c.push(eb.fromDsValue(null,null,null,d));return c}():eb.fromDsValue(null,null,null,e)}else b=null;return new A.Datastore.DatastoreInfo(a.dsid,a.handle,b)},a.prototype._getDatastoreInfosFromListResponse=function(a){var b;return function(){var c,d,e,f;for(e=a.datastores,f=[],c=0,d=e.length;d>c;c++)b=e[c],f.push(this._datastoreInfoFromListDatastoresResponseItem(b));return f}.call(this)},a.prototype._init_live_dslist=function(){var a,b=this;return this._dslist_initialized?void 0:(this._dslist_initialized=!0,a=function(a){return b.datastoreListChanged.dispatch(new A.Datastore.DatastoreListChanged(b._getDatastoreInfosFromListResponse(a)))},this._datasync.obj_manager.set_dslist_listener(a),this._flob_client.list_dbs(function(b,c){return b?void console.warn("Failed to get datastore list"):a(c)}))},a.prototype._wrapDatastore=function(a,b){return b&&(a._update_mtime(),a.sync()),new A.Datastore(this,a)},a.prototype._getOrCreateDatastoreByDsid=function(a,b){var c=this;return void this._datasync.get_or_create(a,function(a,d,e){return null!=a?b(a):b(null,c._wrapDatastore(d,e))})},a.prototype._createDatastore=function(a,b,c){var d=this;return void this._datasync.create(a,b,function(a,b,e){return null!=a?c(a):c(null,d._wrapDatastore(b,e))})},a.prototype._getExistingDatastoreByDsid=function(a,b){var c=this;return void this._datasync.get_by_dsid(a,function(a,d){return null!=a?b(a):b(null,new A.Datastore(c,d))})},a.prototype.openDefaultDatastore=function(a){return this._getOrCreateDatastoreByDsid(h,a)},a.prototype.openDatastore=function(a,b){return void this._getExistingDatastoreByDsid(a,b)},a.prototype.createDatastore=function(a){var b,c;return c=eb.randomWeb64String(Math.ceil(256/6)),b="."+eb.dbase64FromBase64(A.Util.sha256(c)),void this._createDatastore(b,c,a)},a.prototype.deleteDatastore=function(a,b){var c=this;return void this._flob_client.get_db(a,function(a,d){return null!=a?b(a):c._flob_client.delete_db(d.handle,function(a){return b(a?a:null)})})},a.prototype.listDatastores=function(a){var b=this;return this.datastoreListChanged._have_event?a(null,this.datastoreListChanged._last_event.getDatastoreInfos()):void this._flob_client.list_dbs(function(c,d){return c?a(c):a(null,b._getDatastoreInfosFromListResponse(d))})},a}(),A.Datastore.List=function(){function a(a,b,c){this._datastore=a,this._record=b,this._field=c}return a.prototype.toString=function(){return"Datastore.List(("+this._record._tid+", "+this._record._rid+", "+this._field+"): "+JSON.stringify(this._array)+")"},a.prototype._array=function(){return this._record._rawFieldValues()[this._field]},a.prototype._checkValid=function(){if(this._record._checkNotDeleted(),!ab.is_array(this._array()))throw new Error("Attempt to operate on deleted list ("+this._record._tid+", "+this._record._rid+", "+this._field+")")},a.prototype._storeUpdate=function(a){var b;return b={},b[this._field]=a,void this._record._storeUpdate(b)},a.prototype._fixInsertionIndex=function(a){var b,c;if(!ab.is_json_number(a))throw new RangeError("Index not a number: "+a);if(b=this._array().length,c=a>=0?a:b+a,c>=0&&b>=c)return c;throw new RangeError("Bad index for list of length "+b+": "+a)
},a.prototype._fixIndex=function(a){var b,c;if(c=this._fixInsertionIndex(a),b=this._array().length,b>c)return c;throw new RangeError("Bad index for list of length "+b+": "+a)},a.prototype.get=function(a){var b;return this._checkValid(),b=eb.clone(this._array()[this._fixIndex(a)]),eb.fromDsValue(void 0,void 0,void 0,b)},a.prototype.set=function(a,b){return this._checkValid(),a=this._fixIndex(a),void this._storeUpdate(["LP",a,eb.toDsValue(b,!1)])},a.prototype.length=function(){return this._checkValid(),this._array().length},a.prototype.pop=function(){if(this._checkValid(),0===this._array().length)throw new Error("List is empty");return this.remove(this._array.length-1)},a.prototype.push=function(a){return this._checkValid(),void this.insert(this._array().length,a)},a.prototype.shift=function(){if(this._checkValid(),0===this._array().length)throw new Error("List is empty");return this.remove(0)},a.prototype.unshift=function(a){return void this.insert(0,a)},a.prototype.splice=function(){var a,b,c,d,e,f,g,h,i;if(d=arguments[0],b=arguments[1],a=3<=arguments.length?jb.call(arguments,2):[],this._checkValid(),!ab.is_json_number(b)||0>b)throw new RangeError("Bad second arg to splice: "+d+", "+b);for(d=this._fixInsertionIndex(d),e=this.slice(d,d+b),c=g=0;b>=0?b>g:g>b;c=b>=0?++g:--g)this.remove(d);for(h=0,i=a.length;i>h;h++)f=a[h],this.insert(d,f),d++;return e},a.prototype.move=function(a,b){return this._checkValid(),a=this._fixIndex(a),b=this._fixIndex(b),a===b?void 0:void this._storeUpdate(["LM",a,b])},a.prototype.remove=function(a){var b;return this._checkValid(),a=this._fixIndex(a),b=this.get(a),this._storeUpdate(["LD",a]),b},a.prototype.insert=function(a,b){return this._checkValid(),a=this._fixInsertionIndex(a),void this._storeUpdate(["LI",a,eb.toDsValue(b,!1)])},a.prototype.slice=function(a,b){var c;return this._checkValid(),function(){var d,e,f,g;for(f=this._array().slice(a,b),g=[],d=0,e=f.length;e>d;d++)c=f[d],g.push(eb.fromDsValue(void 0,void 0,void 0,c));return g}.call(this)},a.prototype.toArray=function(){var a;return this._checkValid(),function(){var b,c,d,e;for(d=this._array().slice(),e=[],b=0,c=d.length;c>b;b++)a=d[b],e.push(eb.fromDsValue(void 0,void 0,void 0,a));return e}.call(this)},a}(),A.Datastore.Record=function(){function a(a,b,c){this._datastore=a,this._tid=b,this._rid=c,this._deleted=!1,this._record_cache=this._datastore._record_cache,this._managed_datastore=this._datastore._managed_datastore}return a.prototype.get=function(a){var b;return this._checkNotDeleted(),b=this._rawFieldValues(),a in b?eb.fromDsValue(this._datastore,this,a,b[a]):null},a.prototype.set=function(a,b){var c;return c={},c[a]=b,this.update(c)},a.prototype.getOrCreateList=function(a){var b,c;if(this._checkNotDeleted(),c=this._rawFieldValues(),null==c[a])b={},b[a]=["LC"],this._storeUpdate(b),c=this._rawFieldValues();else if(!ab.is_array(c[a]))throw new Error("Can't call getOrCreateList on field "+a+" for record ("+this.tid+", "+this.rid+"): existing value "+c[a]+" is not a list");return eb.fromDsValue(this._datastore,this,a,c[a])},a.prototype.getFields=function(){var a,b,c,d;this._checkNotDeleted(),a={},d=this._rawFieldValues();for(b in d)c=d[b],a[b]=eb.fromDsValue(this._datastore,this,b,c);return a},a.prototype.update=function(a){var b,c,d;this._checkNotDeleted(),b={};for(c in a)d=a[c],null!=d?b[c]=["P",eb.toDsValue(d)]:null!=this.get(c)&&(b[c]=["D"]);return ab.is_empty(b)||this._storeUpdate(b),this},a.prototype.deleteRecord=function(){var a;return this._checkNotDeleted(),this._deleted=!0,this._record_cache.remove(this._tid,this._rid),a=k.changeFromArray(["D",this._tid,this._rid]),this._managed_datastore.perform_local_change(a),this._datastore._recordsChangedLocally([this]),this},a.prototype.has=function(a){var b;return this._checkNotDeleted(),b=this._rawFieldValues(),a in b},a.prototype.getId=function(){return this._rid},a.prototype.getTable=function(){return this._datastore.getTable(this._tid)},a.prototype.isDeleted=function(){return this._deleted},a.prototype.toString=function(){var a;return a=this.isDeleted()?"deleted":JSON.stringify(this.getFields()),"Datastore.Record(("+this._tid+", "+this._rid+"): "+a+")"},a.prototype._rawFieldValues=function(){return this._managed_datastore.query(this._tid,this._rid)},a.prototype._storeUpdate=function(a){var b;b=k.changeFromArray(["U",this._tid,this._rid,a]),this._managed_datastore.perform_local_change(b),this._datastore._recordsChangedLocally([this])},a.isValidId=function(a){var b;return b=new RegExp(ab.SS_ID_REGEX),ab.is_string(a)&&b.test(a)},a.prototype._checkNotDeleted=function(){if(this._deleted)throw new Error("Attempt to operate on deleted record ("+this._tid+", "+this._rid+")")},a}(),A.Datastore.RecordsChanged=function(){function a(a,b){this._recordsByTable=a,this._local=b}return a.prototype.toString=function(){var a,b,c,d,e,f,g;e=0,c=0,g=this._recordsByTable;for(f in g)a=g[f],e+=1,c+=a.length;return d=""+e+" "+(1===e?"table":"tables"),b=""+c+" "+(1===c?"record":"records"),"Datastore.RecordsChanged("+b+" in "+d+" changed "+(this._local?"locally":"remotely")+")"},a._fromRecordList=function(b,c){var d,e,f,g,h;for(e={},g=0,h=b.length;h>g;g++)d=b[g],f=d._tid,null==e[f]&&(e[f]=[]),e[f].push(d);return new a(e,c)},a.prototype.affectedRecordsByTable=function(){return this._recordsByTable},a.prototype.affectedRecordsForTable=function(a){var b;return null!=(b=this._recordsByTable[a])?b:[]},a.prototype.isLocal=function(){return this._local},a}(),X=A.Datastore.RecordsChanged,A.Datastore.Table=function(){function a(a,b){this._datastore=a,this._tid=b,this._record_cache=this._datastore._record_cache,this._managed_datastore=this._datastore._managed_datastore}return a.prototype.getId=function(){return this._tid},a.prototype.get=function(a){var b,c;if(!A.Datastore.Record.isValidId(a))throw new Error("Invalid record ID: "+a);return c=this._record_cache.get(this._tid,a),null!=c?(db(!c._deleted),c):(b=this._managed_datastore.query(this._tid,a),null==b?null:this._record_cache.getOrCreate(this._tid,a))},a.prototype.getOrInsert=function(a,b){var c;return c=this.get(a),c?c:this._insertWithId(a,b)},a.prototype.insert=function(a){var b;return b=this._datastore._generateRid(),db(null==this.get(b)),this._insertWithId(b,a)},a.prototype.query=function(a){var b,c,d,e,f,g,h;for(f=this._managed_datastore.list_rows_for_table(this._tid),d=[],g=0,h=f.length;h>g;g++)e=f[g],b=this._managed_datastore.query(this._tid,e),(null==a||eb.matchDsValues(a,b))&&(c=this.get(e),db(null!=c),d.push(c));return d},a.prototype.setResolutionRule=function(a,b){if("remote"!==b&&"local"!==b&&"min"!==b&&"max"!==b&&"sum"!==b)throw new Error(""+b+" is not a valid resolution rule. Valid rules are 'remote', 'local', 'min', 'max', and 'sum'.");return this._managed_datastore.resolver.add_resolution_rule(this._tid,a,b),this},a.isValidId=function(a){var b;return b=new RegExp(ab.SS_ID_REGEX),ab.is_string(a)&&b.test(a)},a.prototype.toString=function(){return"Datastore.Table("+this._tid+")"},a.prototype._insertWithId=function(a,b){var c,d,e,f,g;d={};for(e in b)g=b[e],d[e]=eb.toDsValue(g);return c=k.changeFromArray(["I",this._tid,a,d]),this._managed_datastore.perform_local_change(c),f=this._record_cache.getOrCreate(this._tid,a),this._datastore._recordsChangedLocally([f]),f},a}(),A.File.ShareUrl=function(){function a(a,b){this.url=a.url,this.expiresAt=A.Util.parseDate(a.expires),this.isDirect=b===!0?!0:b===!1?!1:"direct"in a?a.direct:Date.now()-this.expiresAt<=864e5,this.isPreview=!this.isDirect,this._json=null}return a.parse=function(a,b){return a&&"object"==typeof a?new A.File.ShareUrl(a,b):a},a.prototype.url=null,a.prototype.expiresAt=null,a.prototype.isDirect=null,a.prototype.isPreview=null,a.prototype.json=function(){return this._json||(this._json={url:this.url,expires:this.expiresAt.toUTCString(),direct:this.isDirect})},a}(),A.File.CopyReference=function(){function a(a){"object"==typeof a?(this.tag=a.copy_ref,this.expiresAt=A.Util.parseDate(a.expires),this._json=a):(this.tag=a,this.expiresAt=new Date(1e3*Math.ceil(Date.now()/1e3)),this._json=null)}return a.parse=function(a){return!a||"object"!=typeof a&&"string"!=typeof a?a:new A.File.CopyReference(a)},a.prototype.tag=null,a.prototype.expiresAt=null,a.prototype.json=function(){return this._json||(this._json={copy_ref:this.tag,expires:this.expiresAt.toUTCString()})},a}(),A.File.Stat=function(){function a(a){var b,c,d,e;switch(this._json=a,this.path=a.path,"/"!==this.path.substring(0,1)&&(this.path="/"+this.path),b=this.path.length-1,b>=0&&"/"===this.path.substring(b)&&(this.path=this.path.substring(0,b)),c=this.path.lastIndexOf("/"),this.name=this.path.substring(c+1),this.isFolder=a.is_dir||!1,this.isFile=!this.isFolder,this.isRemoved=a.is_deleted||!1,this.typeIcon=a.icon,this.modifiedAt=(null!=(d=a.modified)?d.length:void 0)?A.Util.parseDate(a.modified):null,this.clientModifiedAt=(null!=(e=a.client_mtime)?e.length:void 0)?A.Util.parseDate(a.client_mtime):null,a.root){case"dropbox":this.inAppFolder=!1;break;case"app_folder":this.inAppFolder=!0;break;default:this.inAppFolder=null}this.size=a.bytes||0,this.humanSize=a.size||"",this.hasThumbnail=a.thumb_exists||!1,this.versionTag=a.rev,this.contentHash=a.hash||null,this.mimeType=this.isFolder?a.mime_type||"inode/directory":a.mime_type||"application/octet-stream"}return a.parse=function(a){return a&&"object"==typeof a?new A.File.Stat(a):a},a.prototype.path=null,a.prototype.name=null,a.prototype.inAppFolder=null,a.prototype.isFolder=null,a.prototype.isFile=null,a.prototype.isRemoved=null,a.prototype.typeIcon=null,a.prototype.versionTag=null,a.prototype.contentHash=null,a.prototype.mimeType=null,a.prototype.size=null,a.prototype.humanSize=null,a.prototype.hasThumbnail=null,a.prototype.modifiedAt=null,a.prototype.clientModifiedAt=null,a.prototype.json=function(){return this._json},a}(),A.Http.AppInfo=function(){function a(a,b){var c;this.name=a.name,this._icons=a.icons,c=a.permissions||{},this.canUseDatastores=!!c.datastores,this.canUseFiles=!!c.files,this.canUseFullDropbox="full_dropbox"===c.files,this.hasAppFolder="app_folder"===c.files,this.key=b?b:a.key||null}return a.parse=function(a,b){return a?new A.Http.AppInfo(a,b):a},a.prototype.name=void 0,a.prototype.key=void 0,a.prototype.canUseDatastores=void 0,a.prototype.canUseFiles=void 0,a.prototype.hasAppFolder=void 0,a.prototype.canUseFullDropbox=void 0,a.prototype.icon=function(a,b){return b||(b=a),this._icons[""+a+"x"+b]||null},a.ICON_SMALL=64,a.ICON_LARGE=256,a}(),A.Http.PulledChanges=function(){function a(a){var b;this.blankSlate=a.reset||!1,this.cursorTag=a.cursor,this.shouldPullAgain=a.has_more,this.shouldBackOff=!this.shouldPullAgain,this.changes=a.cursor&&a.cursor.length?function(){var c,d,e,f;for(e=a.entries,f=[],c=0,d=e.length;d>c;c++)b=e[c],f.push(A.Http.PulledChange.parse(b));return f}():[]}return a.parse=function(a){return a&&"object"==typeof a?new A.Http.PulledChanges(a):a},a.prototype.blankSlate=void 0,a.prototype.cursorTag=void 0,a.prototype.changes=void 0,a.prototype.shouldPullAgain=void 0,a.prototype.shouldBackOff=void 0,a.prototype.cursor=function(){return this.cursorTag},a}(),A.Http.PulledChange=function(){function a(a){this.path=a[0],this.stat=A.File.Stat.parse(a[1]),this.stat?this.wasRemoved=!1:(this.stat=null,this.wasRemoved=!0)}return a.parse=function(a){return a&&"object"==typeof a?new A.Http.PulledChange(a):a},a.prototype.path=void 0,a.prototype.wasRemoved=void 0,a.prototype.stat=void 0,a}(),A.Http.RangeInfo=function(){function a(a){var b;(b=/^bytes (\d*)-(\d*)\/(.*)$/.exec(a))?(this.start=parseInt(b[1]),this.end=parseInt(b[2]),this.size="*"===b[3]?null:parseInt(b[3])):(this.start=0,this.end=0,this.size=null)}return a.parse=function(a){return"string"==typeof a?new A.Http.RangeInfo(a):a},a.prototype.start=null,a.prototype.size=null,a.prototype.end=null,a}(),A.Http.UploadCursor=function(){function a(a){this.replace(a)}return a.parse=function(a){return!a||"object"!=typeof a&&"string"!=typeof a?a:new A.Http.UploadCursor(a)},a.prototype.tag=null,a.prototype.offset=null,a.prototype.expiresAt=null,a.prototype.json=function(){return this._json||(this._json={upload_id:this.tag,offset:this.offset,expires:this.expiresAt.toUTCString()})},a.prototype.replace=function(a){return"object"==typeof a?(this.tag=a.upload_id||null,this.offset=a.offset||0,this.expiresAt=A.Util.parseDate(a.expires)||Date.now(),this._json=a):(this.tag=a||null,this.offset=0,this.expiresAt=new Date(1e3*Math.floor(Date.now()/1e3)),this._json=null),this},a}(),"function"==typeof A.Env.global.atob&&"function"==typeof A.Env.global.btoa?(A.Util.atob=function(a){return A.Env.global.atob(a)},A.Util.btoa=function(a){return A.Env.global.btoa(a)}):A.Env.global.require&&A.Env.global.Buffer?(A.Util.atob=function(a){var b,c;return b=new Buffer(a,"base64"),function(){var a,d,e;for(e=[],c=a=0,d=b.length;d>=0?d>a:a>d;c=d>=0?++a:--a)e.push(String.fromCharCode(b[c]));return e}().join("")},A.Util.btoa=function(a){var b,c;return b=new Buffer(function(){var b,d,e;for(e=[],c=b=0,d=a.length;d>=0?d>b:b>d;c=d>=0?++b:--b)e.push(a.charCodeAt(c));return e}()),b.toString("base64")}):function(){var a,b,c;return b="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",c=function(a,c,d){var e,f;for(f=3-c,a<<=8*f,e=3;e>=f;)d.push(b.charAt(63&a>>6*e)),e-=1;for(e=c;3>e;)d.push("="),e+=1;return null},a=function(a,b,c){var d,e;for(e=4-b,a<<=6*e,d=2;d>=e;)c.push(String.fromCharCode(255&a>>8*d)),d-=1;return null},A.Util.btoa=function(a){var b,d,e,f,g,h;for(f=[],b=0,d=0,e=g=0,h=a.length;h>=0?h>g:g>h;e=h>=0?++g:--g)b=b<<8|a.charCodeAt(e),d+=1,3===d&&(c(b,d,f),b=d=0);return d>0&&c(b,d,f),f.join("")},A.Util.atob=function(c){var d,e,f,g,h,i,j;for(h=[],d=0,f=0,g=i=0,j=c.length;(j>=0?j>i:i>j)&&(e=c.charAt(g),"="!==e);g=j>=0?++i:--i)d=d<<6|b.indexOf(e),f+=1,4===f&&(a(d,f,h),d=f=0);return f>0&&a(d,f,h),h.join("")}}(),function(){var a,b,c,d,e,f,g,h,i,j,k;if(A.Util.hmac=function(b,d){return a(c(i(b),i(d),b.length,d.length))},A.Util.sha1=function(b){return a(e(i(b),b.length))},A.Util.sha256=function(b){return a(f(i(b),b.length))},A.Env.require)try{b=A.Env.require("crypto"),b.createHmac&&b.createHash&&(A.Util.hmac=function(a,c){var d;return d=b.createHmac("sha1",c),d.update(a),d.digest("base64")},A.Util.sha1=function(a){var c;return c=b.createHash("sha1"),c.update(a),c.digest("base64")},A.Util.sha256=function(a){var c;return c=b.createHash("sha256"),c.update(a),c.digest("base64")})}catch(l){d=l}return c=function(a,b,c,d){var f,g,h,i;return b.length>16&&(b=e(b,d)),h=function(){var a,c;for(c=[],g=a=0;16>a;g=++a)c.push(909522486^b[g]);return c}(),i=function(){var a,c;for(c=[],g=a=0;16>a;g=++a)c.push(1549556828^b[g]);return c}(),f=e(h.concat(a),64+c),e(i.concat(f),84)},e=function(a,b){var c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r,s;for(a[b>>2]|=1<<31-((3&b)<<3),a[(b+8>>6<<4)+15]=b<<3,q=Array(80),c=1732584193,e=4023233417,g=2562383102,i=271733878,k=3285377520,m=0,o=a.length;o>m;){for(d=c,f=e,h=g,j=i,l=k,n=s=0;80>s;n=++s)16>n?q[n]=0|a[m+n<<2>>2]:(p=(0|q[n-3<<2>>2])^(0|q[n-8<<2>>2])^(0|q[n-14<<2>>2])^(0|q[n-16<<2>>2]),q[n]=p<<1|p>>>31),r=0|(0|(c<<5|c>>>27)+k)+q[n<<2>>2],r=20>n?0|r+(0|(e&g|~e&i)+1518500249):40>n?0|r+(0|(e^g^i)+1859775393):60>n?0|(0|r+((e&g|e&i|g&i)-1894007588)):0|r+(0|(e^g^i)-899497514),k=i,i=g,g=e<<30|e>>>2,e=c,c=r;c=0|d+c,e=0|f+e,g=0|h+g,i=0|j+i,k=0|l+k,m=0|m+16}return[c,e,g,i,k]},f=function(a,b){var c,d,e,f,i,j,k,l,m,n,o,p,q,r,s,t,u,v,w,x,y,z,A,B,C,D,E,F,G,H,I,J;for(a[b>>2]|=1<<31-((3&b)<<3),a[(b+8>>6<<4)+15]=b<<3,G=Array(80),c=g[0],e=g[1],i=g[2],l=g[3],n=g[4],p=g[5],r=g[6],x=g[7],z=0,B=a.length;B>z;){for(d=c,f=e,j=i,m=l,o=n,q=p,s=r,y=x,A=J=0;64>J;A=++J)16>A?F=G[A]=0|a[z+A<<2>>2]:(u=0|G[A-15<<2>>2],t=(u<<25|u>>>7)^(u<<14|u>>>18)^u>>>3,w=0|G[A-2<<2>>2],v=(w<<15|w>>>17)^(w<<13|w>>>19)^w>>>10,F=G[A]=0|(0|t+(0|G[A-7<<2>>2]))+(0|v+(0|G[A-16<<2>>2]))),k=n&p^~n&r,C=c&e^c&i^e&i,D=(c<<30|c>>>2)^(c<<19|c>>>13)^(c<<10|c>>>22),E=(n<<26|n>>>6)^(n<<21|n>>>11)^(n<<7|n>>>25),H=0|(0|(0|x+E)+(0|k+F))+(0|h[A<<2>>2]),I=0|D+C,x=r,r=p,p=n,n=0|l+H,l=i,i=e,e=c,c=0|H+I;c=0|d+c,e=0|f+e,i=0|j+i,l=0|m+l,n=0|o+n,p=0|q+p,r=0|s+r,x=0|y+x,z+=16}return[c,e,i,l,n,p,r,x]},j=function(a){return 0>a&&(a=4*(1<<30)+a),a.toString(16)},g=[],h=[],function(){var a,b,c,d,e,f,i;for(b=function(a){return 0|4294967296*(a-Math.floor(a))},e=2,i=[],c=f=0;64>f;c=++f){for(;;){for(d=!0,a=2;e>=a*a;){if(0===e%a){d=!1;break}a+=1}if(d)break;e+=1}8>c&&(g[c]=b(Math.pow(e,.5))),h[c]=b(Math.pow(e,1/3)),i.push(e+=1)}return i}(),a=function(a){var b,c,d,e,f;for(e="",b=0,d=4*a.length;d>b;)c=b,f=(255&a[c>>2]>>(3-(3&c)<<3))<<16,c+=1,f|=(255&a[c>>2]>>(3-(3&c)<<3))<<8,c+=1,f|=255&a[c>>2]>>(3-(3&c)<<3),e+=k[63&f>>18],e+=k[63&f>>12],b+=1,e+=b>=d?"=":k[63&f>>6],b+=1,e+=b>=d?"=":k[63&f],b+=1;return e},k="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",i=function(a){var b,c,d,e,f;for(b=[],d=255,c=e=0,f=a.length;f>=0?f>e:e>f;c=f>=0?++e:--e)b[c>>2]|=(a.charCodeAt(c)&d)<<(3-(3&c)<<3);return b}}(),A.Util.Oauth=function(){function a(a){this._id=null,this._secret=null,this._stateParam=null,this._authCode=null,this._token=null,this._tokenKey=null,this._tokenKid=null,this._error=null,this._appHash=null,this._loaded=null,this.setCredentials(a)}return a.prototype.setCredentials=function(a){if(a.key)this._id=a.key;else{if(!a.token)throw new Error("No API key supplied");this._id=null}return this._secret=a.secret||null,this._appHash=null,this._error=null,this._loaded=!0,this.reset(),a.token?(this._token=a.token,a.tokenKey&&(this._tokenKey=a.tokenKey,this._tokenKid=a.tokenKid)):a.oauthCode?this._authCode=a.oauthCode:a.oauthStateParam&&(this._stateParam=a.oauthStateParam),this},a.prototype.credentials=function(){var a;return a={},this._id&&(a.key=this._id),this._secret&&(a.secret=this._secret),null!==this._token?(a.token=this._token,this._tokenKey&&(a.tokenKey=this._tokenKey,a.tokenKid=this._tokenKid)):null!==this._authCode?a.oauthCode=this._authCode:null!==this._stateParam&&(a.oauthStateParam=this._stateParam),a},a.prototype.step=function(){return null!==this._token?A.Client.DONE:null!==this._authCode?A.Client.AUTHORIZED:null!==this._stateParam?this._loaded?A.Client.PARAM_LOADED:A.Client.PARAM_SET:null!==this._error?A.Client.ERROR:A.Client.RESET},a.prototype.setAuthStateParam=function(a){if(null===this._id)throw new Error("No API key supplied, cannot do authorization");return this.reset(),this._loaded=!1,this._stateParam=a,this},a.prototype.checkAuthStateParam=function(a){return this._stateParam===a&&null!==this._stateParam},a.prototype.authStateParam=function(){return this._stateParam},a.prototype.error=function(){return this._error},a.prototype.processRedirectParams=function(a){var b;if(a.error){if(null===this._id)throw new Error("No API key supplied, cannot process errors");return this.reset(),this._error=new A.AuthError(a),!0}if(a.code){if(null===this._id)throw new Error("No API key supplied, cannot do Authorization Codes");return this.reset(),this._loaded=!1,this._authCode=a.code,!0}if(b=a.token_type){if(b=b.toLowerCase(),"bearer"!==b&&"mac"!==b)throw new Error("Unimplemented token type "+b);if(this.reset(),this._loaded=!1,"mac"===b){if("hmac-sha-1"!==a.mac_algorithm)throw new Error("Unimplemented MAC algorithms "+a.mac_algorithm);this._tokenKey=a.mac_key,this._tokenKid=a.kid}return this._token=a.access_token,!0}return!1},a.prototype.authHeader=function(a,b,c){var d,e;return null===this._token?(e=A.Util.btoa(null===this._secret?""+this._id+":":""+this._id+":"+this._secret),"Basic "+e):null===this._tokenKey?"Bearer "+this._token:(d=this.macParams(a,b,c),"MAC kid="+d.kid+" ts="+d.ts+" "+("access_token="+this._token+" mac="+d.mac))},a.prototype.addAuthParams=function(a,b,c){var d;return null===this._token?(c.client_id=this._id,null!==this._secret&&(c.client_secret=this._secret)):(null!==this._tokenKey&&(d=this.macParams(a,b,c),c.kid=d.kid,c.ts=d.ts,c.mac=d.mac),c.access_token=this._token),c},a.prototype.authorizeUrlParams=function(a,b){var c;if("token"!==a&&"code"!==a)throw new Error("Unimplemented /authorize response type "+a);return c={client_id:this._id,state:this._stateParam,response_type:a},b&&(c.redirect_uri=b),c},a.prototype.accessTokenParams=function(a){var b;return b={grant_type:"authorization_code",code:this._authCode},a&&(b.redirect_uri=a),b},a.queryParamsFromUrl=function(a){var b,c,d,e,f,g,h,i,j,k;if(e=/^[^?#]+(\?([^\#]*))?(\#(.*))?$/.exec(a),!e)return{};for(h=e[2]||"","/"===h.substring(0,1)&&(h=h.substring(1)),b=e[4]||"",c=b.indexOf("?"),-1!==c&&(b=b.substring(c+1)),"/"===b.substring(0,1)&&(b=b.substring(1)),g={},k=h.split("&").concat(b.split("&")),i=0,j=k.length;j>i;i++)d=k[i],f=d.indexOf("="),-1!==f&&(g[decodeURIComponent(d.substring(0,f))]=decodeURIComponent(d.substring(f+1)));return g},a.prototype.macParams=function(a,b,c){var d,e;return d={kid:this._tokenKid,ts:A.Util.Oauth.timestamp()},e=a.toUpperCase()+"&"+A.Util.Xhr.urlEncodeValue(b)+"&"+A.Util.Xhr.urlEncodeValue(A.Util.Xhr.urlEncode(c)),d.mac=A.Util.hmac(e,this._tokenKey),d},a.prototype.appHash=function(){return this._appHash?this._appHash:this._appHash=A.Util.sha1("oauth2-"+this._id).replace(/[\/+=]/g,"")},a.prototype.reset=function(){return this._stateParam=null,this._authCode=null,this._token=null,this._tokenKey=null,this._tokenKid=null,this._error=null,this},a.timestamp=function(){return Math.floor(Date.now()/1e3)},a.randomAuthStateParam=function(){return["oas",Date.now().toString(36),Math.random().toString(36)].join("_")},a}(),null==Date.now&&(A.Util.Oauth.timestamp=function(){return Math.floor((new Date).getTime()/1e3)}),2274814865e3===new Date("Fri, 31 Jan 2042 21:01:05 +0000").valueOf()?A.Util.parseDate=function(a){return new Date(a)}:2274814865e3===Date.parse("Fri, 31 Jan 2042 21:01:05 +0000")?A.Util.parseDate=function(a){return new Date(Date.parse(a))}:function(){var a,b;return b=/^\w+\, (\d+) (\w+) (\d+) (\d+)\:(\d+)\:(\d+) (\+\d+|UTC|GMT)$/,a={Jan:0,Feb:1,Mar:2,Apr:3,May:4,Jun:5,Jul:6,Aug:7,Sep:8,Oct:9,Nov:10,Dec:11},A.Util.parseDate=function(c){var d;return(d=b.exec(c))?new Date(Date.UTC(parseInt(d[3]),a[d[2]],parseInt(d[1]),parseInt(d[4]),parseInt(d[5]),parseInt(d[6]),0)):0/0}}(),A.Util.countUtf8Bytes=function(a){var b,c,d,e,f;for(b=0,d=e=0,f=a.length;f>=0?f>e:e>f;d=f>=0?++e:--e)c=a.charCodeAt(d),127>=c?b+=1:2047>=c?b+=2:c>=55296&&57343>=c?b+=2:65535>=c?b+=3:db(!1);return b},A.Env.global.XMLHttpRequest?(!A.Env.global.XDomainRequest||"withCredentials"in new XMLHttpRequest?(u=XMLHttpRequest,t=!1,r="undefined"!=typeof FormData&&-1===navigator.userAgent.indexOf("Firefox")):(u=XDomainRequest,t=!0,r=!1),s=!0):(u=A.Env.require("xhr2"),t=!1,r=!1,s=!1),A.Env.global.Uint8Array)if(Object.getPrototypeOf?q=Object.getPrototypeOf(Object.getPrototypeOf(new Uint8Array(0))).constructor:Object.__proto__&&(q=new Uint8Array(0).__proto__.__proto__.constructor),A.Env.global.Blob){try{!function(){return 2===new Blob([new Uint8Array(2)]).size?(w=!0,v=!0):(v=!1,w=2===new Blob([new ArrayBuffer(2)]).size)}()}catch(kb){v=!1,w=!1,A.Env.global.WebKitBlobBuilder&&-1!==navigator.userAgent.indexOf("Android")&&(r=!1)}q===Object&&(v=!1)}else w=!1,v=!0;else q=null,w=!1,v=!1;A.Util.Xhr=function(){function a(a,b){this.method=a,this.isGet="GET"===this.method,this.url=b,this.wantHeaders=!1,this.headers={},this.params=null,this.body=null,this.preflight=!(this.isGet||"POST"===this.method),this.signed=!1,this.completed=!1,this.responseType=null,this.callback=null,this.xhr=null,this.onError=null}return a.Request=u,a.ieXdr=t,a.canSendForms=r,a.doesPreflight=s,a.ArrayBufferView=q,a.sendArrayBufferView=v,a.wrapBlob=w,a.prototype.xhr=null,a.prototype.onError=null,a.prototype.setParams=function(a){if(this.signed)throw new Error("setParams called after addOauthParams or addOauthHeader");if(this.params)throw new Error("setParams cannot be called twice");return this.params=a,this},a.prototype.setCallback=function(a){return this.callback=a,this},a.prototype.signWithOauth=function(a,b){return A.Util.Xhr.ieXdr?this.addOauthParams(a):this.preflight||!A.Util.Xhr.doesPreflight?this.addOauthHeader(a):this.isGet&&b?this.addOauthHeader(a):this.addOauthParams(a)},a.prototype.addOauthParams=function(a){if(this.signed)throw new Error("Request already has an OAuth signature");return this.params||(this.params={}),a.addAuthParams(this.method,this.url,this.params),this.signed=!0,this},a.prototype.addOauthHeader=function(a){if(this.signed)throw new Error("Request already has an OAuth signature");return this.params||(this.params={}),this.signed=!0,this.setHeader("Authorization",a.authHeader(this.method,this.url,this.params))},a.prototype.setBody=function(a){if(this.isGet)throw new Error("setBody cannot be called on GET requests");if(null!==this.body)throw new Error("Request already has a body");return"string"==typeof a||"undefined"!=typeof FormData&&a instanceof FormData||(this.headers["Content-Type"]="application/octet-stream",this.preflight=!0),this.body=a,this},a.prototype.setResponseType=function(a){return this.responseType=a,this},a.prototype.setHeader=function(a,b){var c;if(this.headers[a])throw c=this.headers[a],new Error("HTTP header "+a+" already set to "+c);if("Content-Type"===a)throw new Error("Content-Type is automatically computed based on setBody");return this.preflight=!0,this.headers[a]=b,this},a.prototype.reportResponseHeaders=function(){return this.wantHeaders=!0},a.prototype.setFileField=function(a,b,c,d){var e,f,g,h,i;if(null!==this.body)throw new Error("Request already has a body");if(this.isGet)throw new Error("setFileField cannot be called on GET requests");if("object"==typeof c){"undefined"!=typeof ArrayBuffer&&(c instanceof ArrayBuffer?A.Util.Xhr.sendArrayBufferView&&(c=new Uint8Array(c)):!A.Util.Xhr.sendArrayBufferView&&0===c.byteOffset&&c.buffer instanceof ArrayBuffer&&(c=c.buffer)),d||(d="application/octet-stream");try{c=new Blob([c],{type:d})}catch(j){f=j,window.WebKitBlobBuilder&&(h=new WebKitBlobBuilder,h.append(c),(e=h.getBlob(d))&&(c=e))}"undefined"!=typeof File&&c instanceof File&&(c=new Blob([c],{type:c.type})),i=c instanceof Blob}else i=!1;return i?(this.body=new FormData,this.body.append(a,c,b)):(d||(d="application/octet-stream"),g=this.multipartBoundary(),this.headers["Content-Type"]="multipart/form-data; boundary="+g,this.body=["--",g,"\r\n",'Content-Disposition: form-data; name="',a,'"; filename="',b,'"\r\n',"Content-Type: ",d,"\r\n","Content-Transfer-Encoding: binary\r\n\r\n",c,"\r\n","--",g,"--","\r\n"].join(""))},a.prototype.multipartBoundary=function(){return[Date.now().toString(36),Math.random().toString(36)].join("----")},a.prototype.paramsToUrl=function(){var a;return this.params&&(a=A.Util.Xhr.urlEncode(this.params),0!==a.length&&(this.url=[this.url,"?",a].join("")),this.params=null),this},a.prototype.paramsToBody=function(){if(this.params){if(null!==this.body)throw new Error("Request already has a body");if(this.isGet)throw new Error("paramsToBody cannot be called on GET requests");this.headers["Content-Type"]="application/x-www-form-urlencoded",this.body=A.Util.Xhr.urlEncode(this.params),this.params=null}return this},a.prototype.prepare=function(){var a,b,c,d,e=this;if(b=A.Util.Xhr.ieXdr,this.isGet||null!==this.body||b?(this.paramsToUrl(),null!==this.body&&"string"==typeof this.body&&(this.headers["Content-Type"]="text/plain; charset=utf8")):this.paramsToBody(),this.xhr=new A.Util.Xhr.Request,b?(this.xhr.onload=function(){return e.onXdrLoad()},this.xhr.onerror=function(){return e.onXdrError()},this.xhr.ontimeout=function(){return e.onXdrError()},this.xhr.onprogress=function(){}):this.xhr.onreadystatechange=function(){return e.onReadyStateChange()},this.xhr.open(this.method,this.url,!0),!b){d=this.headers;for(a in d)gb.call(d,a)&&(c=d[a],this.xhr.setRequestHeader(a,c))}return this.responseType&&("b"===this.responseType?this.xhr.overrideMimeType&&this.xhr.overrideMimeType("text/plain; charset=x-user-defined"):this.xhr.responseType=this.responseType),this},a.prototype.send=function(a){var b,c;if(this.callback=a||this.callback,null!==this.body){b=this.body,A.Util.Xhr.sendArrayBufferView?b instanceof ArrayBuffer&&(b=new Uint8Array(b)):0===b.byteOffset&&b.buffer instanceof ArrayBuffer&&(b=b.buffer);try{this.xhr.send(b)}catch(d){if(c=d,A.Util.Xhr.sendArrayBufferView||!A.Util.Xhr.wrapBlob)throw c;b=new Blob([b],{type:"application/octet-stream"}),this.xhr.send(b)}}else this.xhr.send();return this},a.urlEncode=function(a){var b,c,d;b=[];for(c in a)d=a[c],b.push(this.urlEncodeValue(c)+"="+this.urlEncodeValue(d));return b.sort().join("&")},a.urlEncodeValue=function(a){return encodeURIComponent(a.toString()).replace(/\!/g,"%21").replace(/'/g,"%27").replace(/\(/g,"%28").replace(/\)/g,"%29").replace(/\*/g,"%2A")},a.urlDecode=function(a){var b,c,d,e,f,g;for(c={},g=a.split("&"),e=0,f=g.length;f>e;e++)d=g[e],b=d.split("="),c[decodeURIComponent(b[0])]=decodeURIComponent(b[1]);return c},a.prototype.onReadyStateChange=function(){var a,b,c,d,e,f,g,h,i,j,k,l,m,n,o;if(4!==this.xhr.readyState)return!0;if(this.completed)return!0;if(this.completed=!0,this.xhr.status<200||this.xhr.status>=300)return b=new A.ApiError(this.xhr,this.method,this.url),this.onError?this.onError(b,this.callback):this.callback(b),!0;if(this.wantHeaders?(a=this.xhr.getAllResponseHeaders(),g=a?A.Util.Xhr.parseResponseHeaders(a):this.guessResponseHeaders(),k=g["x-dropbox-metadata"]):(g=void 0,k=this.xhr.getResponseHeader("x-dropbox-metadata")),null!=k?k.length:void 0)try{j=JSON.parse(k)}catch(p){if(i=p,f=k.search(/\}\,\s*\{/),-1!==f)try{k=k.substring(0,f+1),j=JSON.parse(k)}catch(p){i=p,j=void 0}else j=void 0}else j=void 0;if(this.responseType){if("b"===this.responseType){for(e=null!=this.xhr.responseText?this.xhr.responseText:this.xhr.response,c=[],h=n=0,o=e.length;o>=0?o>n:n>o;h=o>=0?++n:--n)c.push(String.fromCharCode(255&e.charCodeAt(h)));m=c.join(""),this.callback(null,m,j,g)}else this.callback(null,this.xhr.response,j,g);return!0}switch(m=null!=this.xhr.responseText?this.xhr.responseText:this.xhr.response,d=this.xhr.getResponseHeader("Content-Type"),d&&(l=d.indexOf(";"),-1!==l&&(d=d.substring(0,l))),d){case"application/x-www-form-urlencoded":this.callback(null,A.Util.Xhr.urlDecode(m),j,g);break;case"application/json":case"text/javascript":this.callback(null,JSON.parse(m),j,g);break;default:this.callback(null,m,j,g)}return!0},a.parseResponseHeaders=function(a){var b,c,d,e,f,g,h,i;for(d={},c=a.split("\n"),h=0,i=c.length;i>h;h++)e=c[h],b=e.indexOf(":"),f=e.substring(0,b).trim().toLowerCase(),g=e.substring(b+1).trim(),d[f]=g;return d},a.prototype.guessResponseHeaders=function(){var a,b,c,d,e,f;for(a={},f=["cache-control","content-language","content-range","content-type","expires","last-modified","pragma","x-dropbox-metadata"],d=0,e=f.length;e>d;d++)b=f[d],c=this.xhr.getResponseHeader(b),c&&(a[b]=c);return a},a.prototype.onXdrLoad=function(){var a,b,c;if(this.completed)return!0;if(this.completed=!0,c=this.xhr.responseText,a=this.wantHeaders?{"content-type":this.xhr.contentType}:void 0,b=void 0,this.responseType)return this.callback(null,c,b,a),!0;switch(this.xhr.contentType){case"application/x-www-form-urlencoded":this.callback(null,A.Util.Xhr.urlDecode(c),b,a);break;case"application/json":case"text/javascript":this.callback(null,JSON.parse(c),b,a);break;default:this.callback(null,c,b,a)}return!0},a.prototype.onXdrError=function(){var a;return this.completed?!0:(this.completed=!0,a=new A.ApiError(this.xhr,this.method,this.url),this.onError?this.onError(a,this.callback):this.callback(a),!0)},a}(),cb="X-Dropbox-User-Agent",U="X-Dropbox-Request-Id",A.DatastoresClient={_dispatchDatastoreXhr:function(a,b,c,d,e,f){var g,h,j;return j=new A.Util.Xhr(a,b),e.setRequestId&&(h="xxxxxxxxxxxxxxxx".replace(/x/g,function(){return Math.floor(16*Math.random()).toString(16)}),j.setHeader(U,h)),db(null==c[cb]),c=eb.clone(c),c[cb]="dropbox-js-datastore-sdk/"+i,j.setParams(c),j.signWithOauth(this.oauth,!1),g=function(a,b){var c;if(null!=a)return f(a);if(ab.is_string(b)){console.log("Treating server response string as JSON:",b);try{b=JSON.parse(b)}catch(e){c=e,console.log("Error parsing response as JSON",c.stack)
}}return f(null,d.fromJSON(b))},e.isLongPoll?this.dispatchLongPollXhr(j,g):this.dispatchXhr(j,g),j},_listDatastores:function(a){return this._dispatchDatastoreXhr("GET",this.urls.listDbs,{},K,{},a)},_getOrCreateDatastore:function(a,b){return this._dispatchDatastoreXhr("POST",this.urls.getOrCreateDb,{dsid:a},g,{},b)},_createDatastore:function(a,b,c){return this._dispatchDatastoreXhr("POST",this.urls.createDb,{dsid:a,key:b},g,{},c)},_getDatastore:function(a,b){return this._dispatchDatastoreXhr("GET",this.urls.getDb,{dsid:a},G,{},b)},_deleteDatastore:function(a,b){return this._dispatchDatastoreXhr("POST",this.urls.deleteDb,{handle:a},y,{setRequestId:!0},b)},_putDelta:function(a,b,c){return this._dispatchDatastoreXhr("POST",this.urls.putDelta,{handle:a,rev:b.rev,nonce:b.nonce,changes:JSON.stringify(b.changes)},T,{setRequestId:!0},c)},_getSnapshot:function(a,b){return this._dispatchDatastoreXhr("GET",this.urls.getSnapshot,{handle:a},I,{},b)},_datastoreAwait:function(b,c,d){return this._dispatchDatastoreXhr("GET",this.urls.datastoreAwait,{get_deltas:JSON.stringify({cursors:b}),list_datastores:JSON.stringify({token:c})},a,{isLongPoll:!0},d)},getDatastoreManager:function(){var a,b=this;return null==this._datastoreManager&&(this._datastoreManager=new A.Datastore.DatastoreManager(this),a=function(){return b.authStep===A.Client.SIGNED_OUT?(b._datastoreManager.close(),b._datastoreManager=null,b.onAuthStepChange.removeListener(a)):void 0},this.onAuthStepChange.addListener(a)),this._datastoreManager}},function(){var a,b,c,d;c=A.DatastoresClient,d=[];for(b in c)a=c[b],d.push(A.Client.prototype[b]=a);return d}(),A.File.PublicUrl=A.File.ShareUrl,A.UserInfo=A.AccountInfo}.call(this),function(a){{var b={isMsie:function(){return/(msie|trident)/i.test(navigator.userAgent)?navigator.userAgent.match(/(msie |rv:)(\d+(.\d+)?)/i)[2]:!1},isBlankString:function(a){return!a||/^\s*$/.test(a)},escapeRegExChars:function(a){return a.replace(/[\-\[\]\/\{\}\(\)\*\+\?\.\\\^\$\|]/g,"\\$&")},isString:function(a){return"string"==typeof a},isNumber:function(a){return"number"==typeof a},isArray:a.isArray,isFunction:a.isFunction,isObject:a.isPlainObject,isUndefined:function(a){return"undefined"==typeof a},bind:a.proxy,each:function(b,c){function d(a,b){return c(b,a)}a.each(b,d)},map:a.map,filter:a.grep,every:function(b,c){var d=!0;return b?(a.each(b,function(a,e){return(d=c.call(null,e,a,b))?void 0:!1}),!!d):d},some:function(b,c){var d=!1;return b?(a.each(b,function(a,e){return(d=c.call(null,e,a,b))?!1:void 0}),!!d):d},mixin:a.extend,getUniqueId:function(){var a=0;return function(){return a++}}(),templatify:function(b){function c(){return String(b)}return a.isFunction(b)?b:c},defer:function(a){setTimeout(a,0)},debounce:function(a,b,c){var d,e;return function(){var f,g,h=this,i=arguments;return f=function(){d=null,c||(e=a.apply(h,i))},g=c&&!d,clearTimeout(d),d=setTimeout(f,b),g&&(e=a.apply(h,i)),e}},throttle:function(a,b){var c,d,e,f,g,h;return g=0,h=function(){g=new Date,e=null,f=a.apply(c,d)},function(){var i=new Date,j=b-(i-g);return c=this,d=arguments,0>=j?(clearTimeout(e),e=null,g=i,f=a.apply(c,d)):e||(e=setTimeout(h,j)),f}},noop:function(){}},c="0.10.0",d=function(){function a(a){this.maxSize=a||100,this.size=0,this.hash={},this.list=new c}function c(){this.head=this.tail=null}function d(a,b){this.key=a,this.val=b,this.prev=this.next=null}return b.mixin(a.prototype,{set:function(a,b){var c,e=this.list.tail;this.size>=this.maxSize&&(this.list.remove(e),delete this.hash[e.key]),(c=this.hash[a])?(c.val=b,this.list.moveToFront(c)):(c=new d(a,b),this.list.add(c),this.hash[a]=c,this.size++)},get:function(a){var b=this.hash[a];return b?(this.list.moveToFront(b),b.val):void 0}}),b.mixin(c.prototype,{add:function(a){this.head&&(a.next=this.head,this.head.prev=a),this.head=a,this.tail=this.tail||a},remove:function(a){a.prev?a.prev.next=a.next:this.head=a.next,a.next?a.next.prev=a.prev:this.tail=a.prev},moveToFront:function(a){this.remove(a),this.add(a)}}),a}(this),e=function(){function a(a){this.prefix=["__",a,"__"].join(""),this.ttlKey="__ttl__",this.keyMatcher=new RegExp("^"+this.prefix)}function c(){return(new Date).getTime()}function d(a){return JSON.stringify(b.isUndefined(a)?null:a)}function e(a){return JSON.parse(a)}var f,g;try{f=window.localStorage,f.setItem("~~~","!"),f.removeItem("~~~")}catch(h){f=null}return g=f&&window.JSON?{_prefix:function(a){return this.prefix+a},_ttlKey:function(a){return this._prefix(a)+this.ttlKey},get:function(a){return this.isExpired(a)&&this.remove(a),e(f.getItem(this._prefix(a)))},set:function(a,e,g){return b.isNumber(g)?f.setItem(this._ttlKey(a),d(c()+g)):f.removeItem(this._ttlKey(a)),f.setItem(this._prefix(a),d(e))},remove:function(a){return f.removeItem(this._ttlKey(a)),f.removeItem(this._prefix(a)),this},clear:function(){var a,b,c=[],d=f.length;for(a=0;d>a;a++)(b=f.key(a)).match(this.keyMatcher)&&c.push(b.replace(this.keyMatcher,""));for(a=c.length;a--;)this.remove(c[a]);return this},isExpired:function(a){var d=e(f.getItem(this._ttlKey(a)));return b.isNumber(d)&&c()>d?!0:!1}}:{get:b.noop,set:b.noop,remove:b.noop,clear:b.noop,isExpired:b.noop},b.mixin(a.prototype,g),a}(),f=function(){function c(b){b=b||{},this._send=b.send?e(b.send):a.ajax,this._get=b.rateLimiter?b.rateLimiter(this._get):this._get}function e(c){return function(d,e){function f(a){b.defer(function(){h.resolve(a)})}function g(a){b.defer(function(){h.reject(a)})}var h=a.Deferred();return c(d,e,f,g),h}}var f=0,g={},h=6,i=new d(10);return c.setMaxPendingRequests=function(a){h=a},c.resetCache=function(){i=new d(10)},b.mixin(c.prototype,{_get:function(a,b,c){function d(b){c&&c(b),i.set(a,b)}function e(){f--,delete g[a],k.onDeckRequestArgs&&(k._get.apply(k,k.onDeckRequestArgs),k.onDeckRequestArgs=null)}var j,k=this;(j=g[a])?j.done(d):h>f?(f++,g[a]=this._send(a,b).done(d).always(e)):this.onDeckRequestArgs=[].slice.call(arguments,0)},get:function(a,c,d){var e;return b.isFunction(c)&&(d=c,c={}),(e=i.get(a))?b.defer(function(){d&&d(e)}):this._get(a,c,d),!!e}}),c}(),g=function(){function c(b){b=b||{},b.datumTokenizer&&b.queryTokenizer||a.error("datumTokenizer and queryTokenizer are both required"),this.datumTokenizer=b.datumTokenizer,this.queryTokenizer=b.queryTokenizer,this.datums=[],this.trie=e()}function d(a){return a=b.filter(a,function(a){return!!a}),a=b.map(a,function(a){return a.toLowerCase()})}function e(){return{ids:[],children:{}}}function f(a){for(var b={},c=[],d=0;d<a.length;d++)b[a[d]]||(b[a[d]]=!0,c.push(a[d]));return c}function g(a,b){function c(a,b){return a-b}var d=0,e=0,f=[];for(a=a.sort(c),b=b.sort(c);d<a.length&&e<b.length;)a[d]<b[e]?d++:a[d]>b[e]?e++:(f.push(a[d]),d++,e++);return f}return b.mixin(c.prototype,{bootstrap:function(a){this.datums=a.datums,this.trie=a.trie},add:function(a){var c=this;a=b.isArray(a)?a:[a],b.each(a,function(a){var f,g;f=c.datums.push(a)-1,g=d(c.datumTokenizer(a)),b.each(g,function(a){var b,d,g;for(b=c.trie,d=a.split("");g=d.shift();)b=b.children[g]||(b.children[g]=e()),b.ids.push(f)})})},get:function(a){var c,e,h=this;return c=d(this.queryTokenizer(a)),b.each(c,function(a){var b,c,d,f;if(e&&0===e.length)return!1;for(b=h.trie,c=a.split("");b&&(d=c.shift());)b=b.children[d];return b&&0===c.length?(f=b.ids.slice(0),void(e=e?g(e,f):f)):(e=[],!1)}),e?b.map(f(e),function(a){return h.datums[a]}):[]},serialize:function(){return{datums:this.datums,trie:this.trie}}}),c}(),h=function(){function d(a){return a.local||null}function e(d){var e,f;return f={url:null,thumbprint:"",ttl:864e5,filter:null,ajax:{}},(e=d.prefetch||null)&&(e=b.isString(e)?{url:e}:e,e=b.mixin(f,e),e.thumbprint=c+e.thumbprint,e.ajax.method=e.ajax.method||"get",e.ajax.dataType=e.ajax.dataType||"json",!e.url&&a.error("prefetch requires url to be set")),e}function f(c){function d(a){return function(c){return b.debounce(c,a)}}function e(a){return function(c){return b.throttle(c,a)}}var f,g;return g={url:null,wildcard:"%QUERY",replace:null,rateLimitBy:"debounce",rateLimitWait:300,send:null,filter:null,ajax:{}},(f=c.remote||null)&&(f=b.isString(f)?{url:f}:f,f=b.mixin(g,f),f.rateLimiter=/^throttle$/i.test(f.rateLimitBy)?e(f.rateLimitWait):d(f.rateLimitWait),f.ajax.method=f.ajax.method||"get",f.ajax.dataType=f.ajax.dataType||"json",delete f.rateLimitBy,delete f.rateLimitWait,!f.url&&a.error("remote requires url to be set")),f}return{local:d,prefetch:e,remote:f}}();window.Bloodhound=function(){function c(b){b&&(b.local||b.prefetch||b.remote)||a.error("one of local, prefetch, or remote is required"),this.limit=b.limit||5,this.sorter=b.sorter||d,this.dupDetector=b.dupDetector||i,this.local=h.local(b),this.prefetch=h.prefetch(b),this.remote=h.remote(b),this.cacheKey=this.prefetch?this.prefetch.cacheKey||this.prefetch.url:null,this.index=new g({datumTokenizer:b.datumTokenizer,queryTokenizer:b.queryTokenizer}),this.storage=this.cacheKey?new e(this.cacheKey):null}function d(){return 0}function i(){return!1}var j;return j={data:"data",protocol:"protocol",thumbprint:"thumbprint"},c.tokenizers={whitespace:function(a){return a.split(/\s+/)},nonword:function(a){return a.split(/\W+/)}},b.mixin(c.prototype,{_loadPrefetch:function(b){function c(a){var c;c=b.filter?b.filter(a):a,f.add(c),f._saveToStorage(f.index.serialize(),b.thumbprint,b.ttl)}var d,e,f=this;return(d=this._readFromStorage(b.thumbprint))?(this.index.bootstrap(d),e=a.Deferred().resolve()):e=a.ajax(b.url,b.ajax).done(c),e},_getFromRemote:function(a,b){function c(a){var c=f.remote.filter?f.remote.filter(a):a;b(c)}var d,e,f=this;return a=a||"",e=encodeURIComponent(a),d=this.remote.replace?this.remote.replace(this.remote.url,a):this.remote.url.replace(this.remote.wildcard,e),this.transport.get(d,this.remote.ajax,c)},_saveToStorage:function(a,b,c){this.storage&&(this.storage.set(j.data,a,c),this.storage.set(j.protocol,location.protocol,c),this.storage.set(j.thumbprint,b,c))},_readFromStorage:function(a){var b={};return this.storage&&(b.data=this.storage.get(j.data),b.protocol=this.storage.get(j.protocol),b.thumbprint=this.storage.get(j.thumbprint)),isExpired=b.thumbprint!==a||b.protocol!==location.protocol,b.data&&!isExpired?b.data:null},initialize:function(){function b(){d.add(d.local)}var c,d=this;return c=this.prefetch?this._loadPrefetch(this.prefetch):a.Deferred().resolve(),this.local&&c.done(b),this.transport=this.remote?new f(this.remote):null,this.initialize=function(){return c.promise()},c.promise()},add:function(a){this.index.add(a)},get:function(a,c){function d(a){var d=e.slice(0);b.each(a,function(a){var c;return c=b.some(d,function(b){return f.dupDetector(a,b)}),!c&&d.push(a),d.length<f.limit}),c&&c(d.sort(f.sorter))}var e,f=this,g=!1;e=this.index.get(a).sort(this.sorter).slice(0,this.limit),e.length<this.limit&&this.transport&&(g=this._getFromRemote(a,d)),!g&&c&&c(e)},ttAdapter:function(){return b.bind(this.get,this)}}),c}()}}(window.jQuery);